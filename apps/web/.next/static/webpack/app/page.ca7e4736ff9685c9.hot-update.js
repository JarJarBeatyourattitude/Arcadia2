"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/page",{

/***/ "(app-pages-browser)/./app/page.tsx":
/*!**********************!*\
  !*** ./app/page.tsx ***!
  \**********************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": function() { return /* binding */ Home; }\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/jsx-dev-runtime.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var next_link__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/link */ \"(app-pages-browser)/./node_modules/next/dist/api/link.js\");\n/* __next_internal_client_entry_do_not_use__ default auto */ \nvar _s = $RefreshSig$();\n\n\nvar _process_env_NEXT_PUBLIC_API_URL;\nconst API = (_process_env_NEXT_PUBLIC_API_URL = \"http://localhost:8000\") !== null && _process_env_NEXT_PUBLIC_API_URL !== void 0 ? _process_env_NEXT_PUBLIC_API_URL : \"http://localhost:8000\";\nfunction Home() {\n    _s();\n    const [prompt, setPrompt] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"Create a neon arcade racer where the player dodges obstacles, collects boosts, and reaches 1000 points to win.\");\n    const [loading, setLoading] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [error, setError] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [generated, setGenerated] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [progress, setProgress] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"\");\n    const [streaming, setStreaming] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [lastCode, setLastCode] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"\");\n    const [editInstruction, setEditInstruction] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"\");\n    const [editingPreview, setEditingPreview] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const draftKey = \"gf_draft_game\";\n    const [previewErrors, setPreviewErrors] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [previewWarnings, setPreviewWarnings] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [showCode, setShowCode] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [perfMode, setPerfMode] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(true);\n    const [games, setGames] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [myGames, setMyGames] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [me, setMe] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [arcadeTab, setArcadeTab] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"community\");\n    const [search, setSearch] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"\");\n    const [sort, setSort] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"recent\");\n    const [saving, setSaving] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const iframeRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const previewRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const previewKey = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(()=>generated ? generated.title + generated.code.length + String(perfMode) : \"empty\", [\n        generated,\n        perfMode\n    ]);\n    async function refreshGames() {\n        const params = new URLSearchParams();\n        if (search) params.set(\"q\", search);\n        params.set(\"sort\", sort);\n        const res = await fetch(\"\".concat(API, \"/games?\").concat(params.toString()));\n        const data = await res.json();\n        setGames(data);\n    }\n    async function refreshMe() {\n        const res = await fetch(\"\".concat(API, \"/auth/me\"), {\n            credentials: \"include\"\n        });\n        if (res.ok) {\n            const data = await res.json();\n            setMe(data);\n        } else {\n            setMe(null);\n        }\n    }\n    async function refreshMyGames() {\n        const res = await fetch(\"\".concat(API, \"/games/mine\"), {\n            credentials: \"include\"\n        });\n        if (!res.ok) return;\n        const data = await res.json();\n        setMyGames(data);\n    }\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        refreshGames().catch(()=>{});\n        refreshMe().catch(()=>{});\n        refreshMyGames().catch(()=>{});\n    }, [\n        search,\n        sort\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        const raw = localStorage.getItem(draftKey);\n        if (!raw) return;\n        try {\n            const draft = JSON.parse(raw);\n            if (draft === null || draft === void 0 ? void 0 : draft.code) {\n                setGenerated({\n                    title: draft.title || \"Draft\",\n                    description: draft.description || \"\",\n                    code: draft.code\n                });\n                setLastCode(draft.code);\n            }\n            if (draft === null || draft === void 0 ? void 0 : draft.prompt) setPrompt(draft.prompt);\n        } catch (e) {}\n    }, []);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (!generated) return;\n        const payload = {\n            title: generated.title,\n            description: generated.description,\n            code: generated.code,\n            prompt\n        };\n        localStorage.setItem(draftKey, JSON.stringify(payload));\n    }, [\n        generated,\n        prompt\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        function onMessage(event) {\n            const data = event.data;\n            if (data && data.type === \"game_error\") {\n                setPreviewErrors((prev)=>[\n                        data.message,\n                        ...prev\n                    ].slice(0, 5));\n            }\n        }\n        window.addEventListener(\"message\", onMessage);\n        return ()=>window.removeEventListener(\"message\", onMessage);\n    }, []);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (!generated) return;\n        const warnings = [];\n        if (generated.code.length > 800000) warnings.push(\"Very large HTML output; preview may be slow.\");\n        if (/<script[^>]+src=/i.test(generated.code)) warnings.push(\"External <script src> was stripped for safety.\");\n        if (new RegExp(\"<link[^>]+href=['\\\"]https?://\", \"i\").test(generated.code)) {\n            warnings.push(\"External <link href> was stripped for safety.\");\n        }\n        setPreviewWarnings(warnings);\n    }, [\n        generated\n    ]);\n    function withAIHelper(code) {\n        const wsUrl = API.replace(\"http://\", \"ws://\").replace(\"https://\", \"wss://\");\n        const helper = \"\\n<script>\\n(() => {\\n  const perf = \".concat(perfMode ? \"true\" : \"false\", \";\\n  window.__GF_PERF_MODE = perf;\\n  if (perf) {\\n    const dpr = window.devicePixelRatio || 1;\\n    try {\\n      Object.defineProperty(window, 'devicePixelRatio', { get: () => Math.min(1, dpr), configurable: true });\\n    } catch {}\\n  }\\n})();\\nwindow.GameFactoryAI = async function(prompt, system, timeoutMs=8000){\\n  const controller = new AbortController();\\n  const timer = setTimeout(()=>controller.abort(), timeoutMs);\\n  try{\\n    const res = await fetch(\\\"\").concat(API, '/ai\", {\\n      method: \"POST\",\\n      headers: {\"Content-Type\": \"application/json\"},\\n      body: JSON.stringify({ prompt, system }),\\n      signal: controller.signal\\n    });\\n    const data = await res.json();\\n    return data.content || \"\";\\n  } finally {\\n    clearTimeout(timer);\\n  }\\n};\\nwindow.GameFactoryMultiplayer = function(roomId){\\n  const ws = new WebSocket(\"').concat(wsUrl, \"/ws/\\\" + encodeURIComponent(roomId || \\\"lobby\\\"));\\n  const handlers = [];\\n  ws.onmessage = (evt) => {\\n    handlers.forEach((fn) => fn(evt.data));\\n  };\\n  return {\\n    send: (data) => {\\n      if (ws.readyState === 1) ws.send(typeof data === \\\"string\\\" ? data : JSON.stringify(data));\\n    },\\n    onMessage: (fn) => handlers.push(fn),\\n    disconnect: () => ws.close()\\n  };\\n};\\nwindow.GameFactoryKit = (function(){\\n  const clamp = (v,min,max)=>Math.max(min,Math.min(max,v));\\n  const lerp = (a,b,t)=>a+(b-a)*t;\\n  const map = (v,inMin,inMax,outMin,outMax)=>outMin+(outMax-outMin)*((v-inMin)/(inMax-inMin));\\n  const rand = (min=0,max=1)=>Math.random()*(max-min)+min;\\n  const choice = (arr)=>arr[Math.floor(Math.random()*arr.length)];\\n  const now = ()=>performance.now();\\n  const easing = {\\n    linear:t=>t,\\n    inQuad:t=>t*t,\\n    outQuad:t=>t*(2-t),\\n    inOutQuad:t=>t<0.5?2*t*t:-1+(4-2*t)*t\\n  };\\n  const tween = (obj, prop, to, duration, ease=easing.inOutQuad) => {\\n    const from = obj[prop];\\n    const start = now();\\n    return new Promise((resolve)=>{\\n      function tick(){\\n        const t = Math.min(1, (now()-start)/duration);\\n        obj[prop] = from + (to-from)*ease(t);\\n        if (t<1) requestAnimationFrame(tick); else resolve(true);\\n      }\\n      tick();\\n    });\\n  };\\n  const storage = {\\n    save:(key,val)=>localStorage.setItem(key,JSON.stringify(val)),\\n    load:(key,def=null)=>{ try{const v=localStorage.getItem(key); return v?JSON.parse(v):def;}catch{return def;} },\\n    slotSave:(slot,val)=>localStorage.setItem(\\\"gf_slot_\\\"+slot,JSON.stringify(val)),\\n    slotLoad:(slot,def=null)=>{ try{const v=localStorage.getItem(\\\"gf_slot_\\\"+slot); return v?JSON.parse(v):def;}catch{return def;} }\\n  };\\n  const input = (function(){\\n    const keys = {};\\n    const mouse = {x:0,y:0,down:false};\\n    window.addEventListener('keydown',e=>keys[e.key]=true);\\n    window.addEventListener('keyup',e=>keys[e.key]=false);\\n    window.addEventListener('mousemove',e=>{mouse.x=e.clientX; mouse.y=e.clientY;});\\n    window.addEventListener('mousedown',()=>mouse.down=true);\\n    window.addEventListener('mouseup',()=>mouse.down=false);\\n    return { keys, mouse, isDown:(k)=>!!keys[k] };\\n  })();\\n  const audio = (function(){\\n    let ctx;\\n    const ensure=()=>ctx||(ctx=new (window.AudioContext||window.webkitAudioContext)());\\n    const beep=(freq=440,dur=0.1,type='sine',vol=0.2)=>{\\n      if (dur > 5) dur = dur / 1000;\\n      const c=ensure();\\n      const o=c.createOscillator(); const g=c.createGain();\\n      o.type=type; o.frequency.value=freq;\\n      const t=c.currentTime;\\n      g.gain.setValueAtTime(0.0001, t);\\n      g.gain.exponentialRampToValueAtTime(Math.max(0.0001, vol), t+0.01);\\n      g.gain.exponentialRampToValueAtTime(0.0001, t+dur);\\n      o.connect(g); g.connect(c.destination);\\n      o.start(t); o.stop(t+dur+0.02);\\n    };\\n    return { beep };\\n  })();\\n  const physics2d = {\\n    step:(obj,dt)=>{ obj.vx=(obj.vx||0)+(obj.ax||0)*dt; obj.vy=(obj.vy||0)+(obj.ay||0)*dt; obj.x+=obj.vx*dt; obj.y+=obj.vy*dt; },\\n    aabb:(a,b)=>a.x<a.w+b.x&&a.x+a.w>b.x&&a.y<a.h+b.y&&a.y+a.h>b.y,\\n    circle:(a,b)=>Math.hypot(a.x-b.x,a.y-b.y)<(a.r+b.r)\\n  };\\n  const cooldown = (function(){\\n    const map = new Map();\\n    const ready=(key,ms)=>{ const t=now(); if(!map.has(key)||t-map.get(key)>=ms){ map.set(key,t); return true;} return false; };\\n    return { ready };\\n  })();\\n  const timers = (function(){\\n    const list=[];\\n    const after=(ms,fn)=>{ const t=now()+ms; list.push({t,fn}); };\\n    const tick=()=>{ const t=now(); for(let i=list.length-1;i>=0;i--){ if(t>=list[i].t){ list[i].fn(); list.splice(i,1);} } };\\n    return { after, tick };\\n  })();\\n  const particles = (function(){\\n    const list=[];\\n    const spawn=(x,y,count=20)=>{ for(let i=0;i<count;i++){ list.push({x,y,vx:rand(-1,1),vy:rand(-1,1),life:rand(0.4,1)});} };\\n    const update=(dt)=>{ for(const p of list){ p.x+=p.vx*dt*60; p.y+=p.vy*dt*60; p.life-=dt; } };\\n    const draw=(ctx)=>{ for(const p of list){ if(p.life<=0) continue; ctx.globalAlpha=Math.max(0,p.life); ctx.fillRect(p.x,p.y,2,2);} ctx.globalAlpha=1; };\\n    const prune=()=>{ for(let i=list.length-1;i>=0;i--){ if(list[i].life<=0) list.splice(i,1);} };\\n    return { spawn, update, draw, prune, list };\\n  })();\\n  const pseudo3d = {\\n    project:(pt,cam)=>{ const z=pt.z-(cam.z||0); const scale=(cam.fov||400)/(z||1); return { x:(pt.x-(cam.x||0))*scale+(cam.cx||0), y:(pt.y-(cam.y||0))*scale+(cam.cy||0), scale }; }\\n  };\\n  const color = {\\n    hexToRgb:(hex)=>{ const h=hex.replace('#',''); const bigint=parseInt(h,16); return {r:(bigint>>16)&255,g:(bigint>>8)&255,b:bigint&255}; },\\n    rgbToHex:(r,g,b)=>'#'+[r,g,b].map(v=>v.toString(16).padStart(2,'0')).join(''),\\n    lerp:(a,b,t)=>({ r:Math.round(a.r+(b.r-a.r)*t), g:Math.round(a.g+(b.g-a.g)*t), b:Math.round(a.b+(b.b-a.b)*t) })\\n  };\\n  const text = {\\n    wrap:(ctx,text,maxWidthOrX,y,maybeW,maybeLineH)=>{\\n      if (typeof maxWidthOrX === 'number' && typeof y === 'number' && typeof maybeW === 'number') {\\n        const x = maxWidthOrX;\\n        const maxW = maybeW;\\n        const lineH = typeof maybeLineH === 'number' ? maybeLineH : 18;\\n        const lines = textWrap(ctx, text, maxW);\\n        lines.forEach((ln,i)=>ctx.fillText(ln,x,y+i*lineH));\\n        return lines;\\n      }\\n      return textWrap(ctx, text, maxWidthOrX);\\n    }\\n  };\\n  function textWrap(ctx, txt, maxWidth){\\n    const words=String(txt||'').split(' '); let line=''; const lines=[];\\n    for(const w of words){ const test=line+w+' '; if(ctx.measureText(test).width>maxWidth){ lines.push(line.trim()); line=w+' '; } else { line=test; } }\\n    lines.push(line.trim()); return lines;\\n  }\\n  const rng = (function(){\\n    let seed = 1234567;\\n    const setSeed = (s)=>{ seed = s>>>0; };\\n    const next = ()=>{ seed = (seed*1664525+1013904223)>>>0; return seed/4294967296; };\\n    return { setSeed, next };\\n  })();\\n  const eventBus = (function(){\\n    const map=new Map();\\n    const on=(evt,fn)=>{ if(!map.has(evt)) map.set(evt,[]); map.get(evt).push(fn); };\\n    const emit=(evt,data)=>{ (map.get(evt)||[]).forEach(fn=>fn(data)); };\\n    return { on, emit };\\n  })();\\n  const fsm = (initial)=>{ let state=initial; const transitions=new Map(); const on=(from,to,fn)=>transitions.set(from+'>'+to,fn); const set=(to)=>{ const fn=transitions.get(state+'>'+to); state=to; if(fn) fn(); }; const get=()=>state; return { on, set, get }; };\\n  const sprites = {\\n    draw:(ctx,img,frame,fw,fh,x,y,scale=1)=>{ const sx=frame*fw; ctx.drawImage(img,sx,0,fw,fh,x,y,fw*scale,fh*scale); }\\n  };\\n  const pathfinding = {\\n    aStar:(grid,start,end)=>{ const open=[start]; const came=new Map(); const g=new Map(); const f=new Map(); const key=(p)=>p.x+','+p.y; const h=(a,b)=>Math.abs(a.x-b.x)+Math.abs(a.y-b.y); g.set(key(start),0); f.set(key(start),h(start,end)); while(open.length){ open.sort((a,b)=>f.get(key(a))-f.get(key(b))); const current=open.shift(); if(current.x===end.x&&current.y===end.y){ const path=[current]; let k=key(current); while(came.has(k)){ const p=came.get(k); path.push(p); k=key(p); } return path.reverse(); } const dirs=[{x:1,y:0},{x:-1,y:0},{x:0,y:1},{x:0,y:-1}]; for(const d of dirs){ const nx={x:current.x+d.x,y:current.y+d.y}; if(grid[nx.y]?.[nx.x]===1) continue; const tentative=(g.get(key(current))||0)+1; const nk=key(nx); if(tentative < (g.get(nk)??Infinity)){ came.set(nk,current); g.set(nk,tentative); f.set(nk,tentative+h(nx,end)); if(!open.find(p=>p.x===nx.x&&p.y===nx.y)) open.push(nx); } } } return []; }\\n  };\\n  const navmesh = {\\n    build:(grid,diag=false)=>({ grid, diag }),\\n    neighbors:(mesh,node)=>{ const dirs=mesh.diag?[{x:1,y:0},{x:-1,y:0},{x:0,y:1},{x:0,y:-1},{x:1,y:1},{x:-1,y:1},{x:1,y:-1},{x:-1,y:-1}]:[{x:1,y:0},{x:-1,y:0},{x:0,y:1},{x:0,y:-1}]; return dirs.map(d=>({x:node.x+d.x,y:node.y+d.y})).filter(n=>mesh.grid[n.y]?.[n.x]!==1); },\\n    lineOfSight:(mesh,a,b)=>{ let x0=a.x,y0=a.y,x1=b.x,y1=b.y; const dx=Math.abs(x1-x0), dy=Math.abs(y1-y0); let sx=x0<x1?1:-1, sy=y0<y1?1:-1; let err=dx-dy; while(true){ if(mesh.grid[y0]?.[x0]===1) return false; if(x0===x1 && y0===y1) break; const e2=2*err; if(e2>-dy){ err-=dy; x0+=sx; } if(e2<dx){ err+=dx; y0+=sy; } } return true; },\\n    smooth:(path,mesh)=>{ if(path.length<=2) return path; const out=[path[0]]; let i=0; while(i<path.length-1){ let j=path.length-1; for(;j>i+1;j--){ if(navmesh.lineOfSight(mesh,path[i],path[j])) break; } out.push(path[j]); i=j; } return out; },\\n    findPath:(mesh,start,end)=>{ const p=pathfinding.aStar(mesh.grid,start,end); return navmesh.smooth(p,mesh); }\\n  };\\n  const levelGrammar = {\\n    expand:(rules,axiom,depth=3)=>{ let str=axiom; for(let i=0;i<depth;i++){ let out=\\\"\\\"; for(const ch of str){ const rule=rules[ch]; if(!rule){ out+=ch; continue; } if(Array.isArray(rule)){ const pick=rule[Math.floor(Math.random()*rule.length)]; out+=pick; } else if(typeof rule==='object'){ const entries=Object.entries(rule); const total=entries.reduce((s,[,w])=>s+Number(w||0),0); let r=Math.random()*total; for(const [sym,w] of entries){ r-=Number(w||0); if(r<=0){ out+=sym; break; } } } else { out+=String(rule); } } str=out; } return str; },\\n    toGrid:(str,w,wall='#')=>{ const rows=[]; for(let i=0;i<str.length;i+=w){ rows.push(str.slice(i,i+w).split(\\\"\\\").map(c=>c===wall?1:0)); } return rows; },\\n    interpret:(str,handlers)=>{ const state={ x:0,y:0,dir:0,stack:[] }; for(const ch of str){ if(handlers[ch]) handlers[ch](state); } return state; }\\n  };\\n  const audioSeq = (function(){\\n    let ctx;\\n    const ensure=()=>ctx||(ctx=new (window.AudioContext||window.webkitAudioContext)());\\n    const noteToFreq=(n)=>{ const A4=440; const map={'C':-9,'C#':-8,'D':-7,'D#':-6,'E':-5,'F':-4,'F#':-3,'G':-2,'G#':-1,'A':0,'A#':1,'B':2}; const m=n.match(/([A-G]#?)(d)/); if(!m) return 440; const sem=map[m[1]]+(Number(m[2])-4)*12; return A4*Math.pow(2,sem/12); };\\n    const play=(pattern,bpm=120)=>{ const c=ensure(); const beat=60/bpm; let t=c.currentTime; for(const note of pattern){ const o=c.createOscillator(); const g=c.createGain(); o.type=note.type||'sine'; o.frequency.value=note.freq|| (note.note?noteToFreq(note.note):440); g.gain.value=note.vol||0.15; o.connect(g); g.connect(c.destination); o.start(t); o.stop(t+(note.dur||0.2)); t+=beat*(note.beats||1); } };\\n    const track=(steps,bpm=120)=>{ const c=ensure(); const beat=60/bpm; const start=c.currentTime; steps.forEach((s,i)=>{ if(!s) return; const o=c.createOscillator(); const g=c.createGain(); o.type=s.type||'square'; o.frequency.value=s.freq|| (s.note?noteToFreq(s.note):440); g.gain.value=s.vol||0.1; o.connect(g); g.connect(c.destination); o.start(start+i*beat); o.stop(start+i*beat+(s.dur||0.2)); }); };\\n    return { play, track, noteToFreq };\\n  })();\\n  const ui = {\\n    button:(text, x, y, w, h, onClick)=>({ type:'button', text, x,y,w,h,onClick,hover:false }),\\n    slider:(label,x,y,w,min,max,value,onChange)=>({ type:'slider', label,x,y,w,h:24,min,max,value,onChange }),\\n    checkbox:(label,x,y,value,onChange)=>({ type:'checkbox', label,x,y,w:18,h:18,value,onChange }),\\n    draw:(ctx, widgets)=>{ widgets.forEach(w=>{ if(w.type==='button'){ ctx.fillStyle=w.hover?'rgba(255,255,255,0.2)':'rgba(0,0,0,0.5)'; ctx.fillRect(w.x,w.y,w.w,w.h); ctx.fillStyle='#fff'; ctx.fillText(w.text,w.x+8,w.y+w.h/2+4); } if(w.type==='slider'){ ctx.fillStyle='rgba(0,0,0,0.5)'; ctx.fillRect(w.x,w.y,w.w,w.h); const t=(w.value-w.min)/(w.max-w.min); ctx.fillStyle='#7df9ff'; ctx.fillRect(w.x, w.y, w.w*t, w.h); ctx.fillStyle='#fff'; ctx.fillText(w.label+': '+w.value.toFixed(1), w.x+4, w.y-4); } if(w.type==='checkbox'){ ctx.strokeStyle='#fff'; ctx.strokeRect(w.x,w.y,w.w,w.h); if(w.value){ ctx.fillStyle='#7df9ff'; ctx.fillRect(w.x+3,w.y+3,w.w-6,w.h-6); } ctx.fillStyle='#fff'; ctx.fillText(w.label, w.x+w.w+6, w.y+w.h-2); } }); },\\n    hit:(w, mx, my)=>mx>=w.x&&mx<=w.x+w.w&&my>=w.y&&my<=w.y+w.h,\\n    handleClick:(widgets,mx,my)=>{ widgets.forEach(w=>{ if(ui.hit(w,mx,my)){ if(w.type==='button' && w.onClick) w.onClick(); if(w.type==='checkbox' && w.onChange){ w.value=!w.value; w.onChange(w.value); } } }); },\\n    handleDrag:(widgets,mx,my)=>{ widgets.forEach(w=>{ if(w.type==='slider' && ui.hit(w,mx,my)){ const t=Math.max(0,Math.min(1,(mx-w.x)/w.w)); w.value=w.min + (w.max-w.min)*t; if(w.onChange) w.onChange(w.value); } }); }\\n  };\\n  const ecs = (function(){\\n    let nextId=1;\\n    const entities=new Set();\\n    const components=new Map();\\n    const systems=[];\\n    const create=()=>{ const id=nextId++; entities.add(id); return id; };\\n    const add=(id,name,data)=>{ if(!components.has(name)) components.set(name,new Map()); components.get(name).set(id,data); return data; };\\n    const get=(id,name)=>components.get(name)?.get(id);\\n    const has=(id,name)=>components.get(name)?.has(id);\\n    const remove=(id)=>{ entities.delete(id); for(const map of components.values()){ map.delete(id);} };\\n    const query=(names)=>{ const sets=names.map(n=>components.get(n)||new Map()); return [...entities].filter(id=>names.every(n=>sets[names.indexOf(n)].has(id))); };\\n    const system=(names,fn)=>{ systems.push({names,fn}); };\\n    const update=(dt)=>{ for(const s of systems){ const ids=query(s.names); for(const id of ids){ const comps=s.names.map(n=>get(id,n)); s.fn(id, ...comps, dt); } } };\\n    return { create, add, get, has, remove, query, system, update, components, entities };\\n  })();\\n  const terrain = {\\n    perlin2:(x,y)=>{ const s=Math.sin(x*12.9898+y*78.233)*43758.5453; return s-Math.floor(s); },\\n    heightMap:(w,h,scale=0.1)=>{ const map=[]; for(let y=0;y<h;y++){ const row=[]; for(let x=0;x<w;x++){ row.push(terrain.perlin2(x*scale,y*scale)); } map.push(row);} return map; }\\n  };\\n  const camera = {\\n    shake:(state,strength=6,decay=0.9)=>{ state.shake= {strength,decay,x:0,y:0}; },\\n    applyShake:(state,ctx)=>{ if(!state.shake) return; state.shake.x = rand(-state.shake.strength,state.shake.strength); state.shake.y = rand(-state.shake.strength,state.shake.strength); ctx.translate(state.shake.x,state.shake.y); state.shake.strength*=state.shake.decay; if(state.shake.strength<0.3) state.shake=null; }\\n  };\\n  const webgl = {\\n    create:(canvas)=>canvas.getContext('webgl')||canvas.getContext('experimental-webgl')\\n  };\\n  const gamepad = (function(){\\n    const state={ axes:[], buttons:[] };\\n    const poll=()=>{ const gp=navigator.getGamepads?.()[0]; if(!gp) return state; state.axes=gp.axes; state.buttons=gp.buttons.map(b=>b.pressed); return state; };\\n    return { poll, state };\\n  })();\\n  const assets = {\\n    image:(src)=>new Promise((res,rej)=>{ const img=new Image(); img.onload=()=>res(img); img.onerror=rej; img.src=src; }),\\n    audio:(src)=>new Promise((res,rej)=>{ const a=new Audio(); a.oncanplaythrough=()=>res(a); a.onerror=rej; a.src=src; })\\n  };\\n  const grid = {\\n    make:(w,h,fill=0)=>Array.from({length:h},()=>Array.from({length:w},()=>fill)),\\n    inBounds:(g,x,y)=>y>=0&&y<g.length&&x>=0&&x<g[0].length\\n  };\\n  const camera2d = {\\n    worldToScreen:(cam,x,y)=>({ x: x-cam.x, y: y-cam.y }),\\n    screenToWorld:(cam,x,y)=>({ x: x+cam.x, y: y+cam.y })\\n  };\\n  const metrics = (function(){\\n    let last=now(), fps=0;\\n    const tick=()=>{ const t=now(); fps=1000/(t-last); last=t; return fps; };\\n    return { tick, get:()=>fps };\\n  })();\\n  const logger = (function(){\\n    const logs=[]; const push=(msg)=>{ logs.unshift({ msg, t:now() }); if(logs.length>20) logs.pop(); };\\n    return { logs, push };\\n  })();\\n  const dialogue = (function(){\\n    const lines=[]; const say=(text)=>lines.push(text); const next=()=>lines.shift();\\n    return { say, next, lines };\\n  })();\\n  const timeline = (function(){\\n    const steps=[]; const add=(at,fn)=>steps.push({at,fn,done:false}); const run=(t)=>{ for(const s of steps){ if(!s.done && t>=s.at){ s.done=true; s.fn(); } } };\\n    return { add, run };\\n  })();\\n  return { clamp, lerp, map, rand, choice, now, easing, tween, storage, input, audio, physics2d, cooldown, timers, particles, pseudo3d, color, text, rng, eventBus, fsm, sprites, pathfinding, navmesh, levelGrammar, audioSeq, ui, ecs, terrain, camera, webgl, gamepad, assets, grid, camera2d, metrics, logger, dialogue, timeline };\\n})();\\n// Compatibility shims for models that don't namespace helpers\\n(function(){\\n  const K = window.GameFactoryKit;\\n  if (!K) return;\\n  window.clamp = window.clamp || K.clamp;\\n  window.lerp = window.lerp || K.lerp;\\n  window.map = window.map || K.map;\\n  window.rand = window.rand || K.rand;\\n  window.rng = window.rng || K.rng;\\n  window.choice = window.choice || K.choice;\\n  window.now = window.now || K.now;\\n  window.audio = window.audio || K.audio;\\n  window.input = window.input || K.input;\\n  window.storage = window.storage || K.storage;\\n  window.text = window.text || K.text;\\n  window.timers = window.timers || K.timers;\\n  window.circle = window.circle || ((a,b)=>K.physics2d.circle(a,b));\\n  window.pseudo3d = window.pseudo3d || K.pseudo3d;\\n  const camState = { shake: null };\\n  window.camera = window.camera || {\\n    shake: (strength=6, decay=0.9) => K.camera.shake(camState, strength, decay),\\n    applyShake: (ctx) => K.camera.applyShake(camState, ctx)\\n  };\\n  window.particles = window.particles || {\\n    spawn: (a,b,c) => {\\n      if (typeof a === \\\"object\\\") {\\n        const o = a || {};\\n        K.particles.spawn(o.x || 0, o.y || 0, o.count || 20);\\n      } else {\\n        K.particles.spawn(a || 0, b || 0, c || 20);\\n      }\\n    },\\n    update: (dt) => {\\n      const v = dt > 10 ? dt / 1000 : dt;\\n      K.particles.update(v);\\n      K.particles.prune();\\n    },\\n    draw: (ctx) => K.particles.draw(ctx),\\n    prune: () => K.particles.prune()\\n  };\\n  window.onerror = function(message, source, lineno, colno) {\\n    parent.postMessage({ type: \\\"game_error\\\", message: String(message) + \\\" @ \\\" + lineno + \\\":\\\" + colno }, \\\"*\\\");\\n  };\\n  window.onunhandledrejection = function(event) {\\n    parent.postMessage({ type: \\\"game_error\\\", message: String(event?.reason || \\\"Unhandled rejection\\\") }, \\\"*\\\");\\n  };\\n})();\\n</script>\\n\");\n        if (code.includes(\"window.GameFactoryKit\") || code.includes(\"GameFactoryAI = async function\")) return code;\n        if (code.includes(\"</head>\")) return code.replace(\"</head>\", \"\".concat(helper, \"</head>\"));\n        return helper + code;\n    }\n    async function generateGame() {\n        setLoading(true);\n        setStreaming(true);\n        setError(null);\n        setProgress(\"\");\n        setGenerated(null);\n        try {\n            const controller = new AbortController();\n            const timeout = setTimeout(()=>controller.abort(), 300000);\n            const res = await fetch(\"\".concat(API, \"/generate/stream\"), {\n                method: \"POST\",\n                headers: {\n                    \"Content-Type\": \"application/json\"\n                },\n                body: JSON.stringify({\n                    prompt\n                }),\n                signal: controller.signal\n            });\n            if (!res.ok || !res.body) {\n                clearTimeout(timeout);\n                throw new Error(await res.text());\n            }\n            const reader = res.body.getReader();\n            const decoder = new TextDecoder();\n            let buffer = \"\";\n            let didSet = false;\n            let doneSeen = false;\n            while(true){\n                const { value, done } = await reader.read();\n                if (done) break;\n                buffer += decoder.decode(value, {\n                    stream: true\n                });\n                buffer = buffer.replace(/\\r/g, \"\");\n                const parts = buffer.split(\"\\n\\n\");\n                buffer = parts.pop() || \"\";\n                for (const part of parts){\n                    const lines = part.split(\"\\n\");\n                    const eventLine = lines.find((l)=>l.startsWith(\"event:\"));\n                    const dataLines = lines.filter((l)=>l.startsWith(\"data:\"));\n                    const event = eventLine ? eventLine.replace(\"event:\", \"\").trim() : \"message\";\n                    const dataRaw = dataLines.map((l)=>l.replace(\"data:\", \"\").trim()).join(\"\\\\n\").trim();\n                    if (!dataRaw) continue;\n                    if (event === \"delta\") {\n                        try {\n                            const data = JSON.parse(dataRaw);\n                            setProgress((prev)=>prev + (data.chunk || \"\"));\n                        } catch (e) {}\n                    }\n                    if (event === \"done\") {\n                        try {\n                            const data = JSON.parse(dataRaw);\n                            setGenerated({\n                                title: data.title,\n                                description: data.description,\n                                code: data.code\n                            });\n                            setLastCode(data.code || \"\");\n                            didSet = true;\n                            setStreaming(false);\n                            clearTimeout(timeout);\n                            controller.abort();\n                            doneSeen = true;\n                            reader.cancel().catch(()=>{});\n                        } catch (e) {}\n                    }\n                }\n                if (doneSeen) break;\n            }\n            clearTimeout(timeout);\n            if (!didSet) {\n                const resFallback = await fetch(\"\".concat(API, \"/generate\"), {\n                    method: \"POST\",\n                    headers: {\n                        \"Content-Type\": \"application/json\"\n                    },\n                    body: JSON.stringify({\n                        prompt\n                    })\n                });\n                if (resFallback.ok) {\n                    const data = await resFallback.json();\n                    setGenerated(data);\n                    setLastCode(data.code || \"\");\n                }\n            }\n        } catch (err) {\n            setError(err.message || \"Failed to generate game\");\n        } finally{\n            setLoading(false);\n            setStreaming(false);\n        }\n    }\n    async function saveGame() {\n        if (!generated) return;\n        setSaving(true);\n        setError(null);\n        try {\n            if (!me) {\n                throw new Error(\"Please log in to save games.\");\n            }\n            const res = await fetch(\"\".concat(API, \"/games\"), {\n                method: \"POST\",\n                headers: {\n                    \"Content-Type\": \"application/json\"\n                },\n                credentials: \"include\",\n                body: JSON.stringify({\n                    title: generated.title,\n                    description: generated.description,\n                    prompt,\n                    code: generated.code\n                })\n            });\n            if (!res.ok) {\n                throw new Error(await res.text());\n            }\n            await refreshGames();\n            await refreshMyGames();\n            localStorage.removeItem(draftKey);\n        } catch (err) {\n            setError(err.message || \"Failed to save game\");\n        } finally{\n            setSaving(false);\n        }\n    }\n    async function editPreview() {\n        if (!generated || !editInstruction.trim()) return;\n        setEditingPreview(true);\n        setError(null);\n        try {\n            const res = await fetch(\"\".concat(API, \"/edit-preview\"), {\n                method: \"POST\",\n                headers: {\n                    \"Content-Type\": \"application/json\"\n                },\n                body: JSON.stringify({\n                    instruction: editInstruction,\n                    code: generated.code\n                })\n            });\n            if (!res.ok) throw new Error(await res.text());\n            const data = await res.json();\n            setGenerated(data);\n            localStorage.setItem(draftKey, JSON.stringify({\n                ...data,\n                prompt\n            }));\n            setLastCode(data.code || \"\");\n            setEditInstruction(\"\");\n        } catch (err) {\n            setError(err.message || \"Edit failed\");\n        } finally{\n            setEditingPreview(false);\n        }\n    }\n    async function openFullscreen() {\n        if (!previewRef.current) return;\n        if (document.fullscreenElement) {\n            await document.exitFullscreen();\n            return;\n        }\n        await previewRef.current.requestFullscreen();\n    }\n    function focusPreview() {\n        var _iframeRef_current_contentWindow, _iframeRef_current;\n        (_iframeRef_current = iframeRef.current) === null || _iframeRef_current === void 0 ? void 0 : (_iframeRef_current_contentWindow = _iframeRef_current.contentWindow) === null || _iframeRef_current_contentWindow === void 0 ? void 0 : _iframeRef_current_contentWindow.focus();\n    }\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"main\", {\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"section\", {\n                className: \"hero\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"hero-card\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"badge\",\n                                children: \"AI Game Forge\"\n                            }, void 0, false, {\n                                fileName: \"/Users/jarjarbeatu/Documents/Arcadia/apps/web/app/page.tsx\",\n                                lineNumber: 605,\n                                columnNumber: 11\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h1\", {\n                                children: \"Describe a game. Get something you can actually play.\"\n                            }, void 0, false, {\n                                fileName: \"/Users/jarjarbeatu/Documents/Arcadia/apps/web/app/page.tsx\",\n                                lineNumber: 606,\n                                columnNumber: 11\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                children: \"Write your idea, generate a full HTML game, then save it to your local arcade. No Docker, no drama.\"\n                            }, void 0, false, {\n                                fileName: \"/Users/jarjarbeatu/Documents/Arcadia/apps/web/app/page.tsx\",\n                                lineNumber: 607,\n                                columnNumber: 11\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"prompt-area\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"textarea\", {\n                                        value: prompt,\n                                        onChange: (e)=>setPrompt(e.target.value)\n                                    }, void 0, false, {\n                                        fileName: \"/Users/jarjarbeatu/Documents/Arcadia/apps/web/app/page.tsx\",\n                                        lineNumber: 611,\n                                        columnNumber: 13\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"button-row\",\n                                        children: [\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                                onClick: generateGame,\n                                                disabled: loading,\n                                                children: loading ? \"Generating...\" : \"Generate Game\"\n                                            }, void 0, false, {\n                                                fileName: \"/Users/jarjarbeatu/Documents/Arcadia/apps/web/app/page.tsx\",\n                                                lineNumber: 613,\n                                                columnNumber: 15\n                                            }, this),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                                className: \"secondary\",\n                                                onClick: saveGame,\n                                                disabled: !generated || saving,\n                                                children: saving ? \"Saving...\" : \"Save Game\"\n                                            }, void 0, false, {\n                                                fileName: \"/Users/jarjarbeatu/Documents/Arcadia/apps/web/app/page.tsx\",\n                                                lineNumber: 616,\n                                                columnNumber: 15\n                                            }, this)\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"/Users/jarjarbeatu/Documents/Arcadia/apps/web/app/page.tsx\",\n                                        lineNumber: 612,\n                                        columnNumber: 13\n                                    }, this),\n                                    error && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                        style: {\n                                            color: \"#ff9b9b\"\n                                        },\n                                        children: error\n                                    }, void 0, false, {\n                                        fileName: \"/Users/jarjarbeatu/Documents/Arcadia/apps/web/app/page.tsx\",\n                                        lineNumber: 620,\n                                        columnNumber: 23\n                                    }, this)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"/Users/jarjarbeatu/Documents/Arcadia/apps/web/app/page.tsx\",\n                                lineNumber: 610,\n                                columnNumber: 11\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/Users/jarjarbeatu/Documents/Arcadia/apps/web/app/page.tsx\",\n                        lineNumber: 604,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"hero-card\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"preview-header\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"card-title\",\n                                        children: \"Live Preview\"\n                                    }, void 0, false, {\n                                        fileName: \"/Users/jarjarbeatu/Documents/Arcadia/apps/web/app/page.tsx\",\n                                        lineNumber: 625,\n                                        columnNumber: 13\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"button-row\",\n                                        children: [\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                                className: \"secondary\",\n                                                onClick: ()=>setPerfMode((v)=>!v),\n                                                children: perfMode ? \"Perf Mode: On\" : \"Perf Mode: Off\"\n                                            }, void 0, false, {\n                                                fileName: \"/Users/jarjarbeatu/Documents/Arcadia/apps/web/app/page.tsx\",\n                                                lineNumber: 627,\n                                                columnNumber: 15\n                                            }, this),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                                className: \"secondary\",\n                                                onClick: openFullscreen,\n                                                children: \"Fullscreen\"\n                                            }, void 0, false, {\n                                                fileName: \"/Users/jarjarbeatu/Documents/Arcadia/apps/web/app/page.tsx\",\n                                                lineNumber: 630,\n                                                columnNumber: 15\n                                            }, this)\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"/Users/jarjarbeatu/Documents/Arcadia/apps/web/app/page.tsx\",\n                                        lineNumber: 626,\n                                        columnNumber: 13\n                                    }, this)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"/Users/jarjarbeatu/Documents/Arcadia/apps/web/app/page.tsx\",\n                                lineNumber: 624,\n                                columnNumber: 11\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"preview\",\n                                ref: previewRef,\n                                onClick: focusPreview,\n                                children: [\n                                    generated ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"iframe\", {\n                                        ref: iframeRef,\n                                        srcDoc: withAIHelper(generated.code),\n                                        sandbox: \"allow-scripts\"\n                                    }, previewKey, false, {\n                                        fileName: \"/Users/jarjarbeatu/Documents/Arcadia/apps/web/app/page.tsx\",\n                                        lineNumber: 635,\n                                        columnNumber: 15\n                                    }, this) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        style: {\n                                            padding: 24,\n                                            color: \"#98a0b5\"\n                                        },\n                                        children: \"Generate a game to see it here.\"\n                                    }, void 0, false, {\n                                        fileName: \"/Users/jarjarbeatu/Documents/Arcadia/apps/web/app/page.tsx\",\n                                        lineNumber: 642,\n                                        columnNumber: 15\n                                    }, this),\n                                    streaming && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"preview-log\",\n                                        children: [\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                className: \"card-title\",\n                                                children: \"Live Build Log\"\n                                            }, void 0, false, {\n                                                fileName: \"/Users/jarjarbeatu/Documents/Arcadia/apps/web/app/page.tsx\",\n                                                lineNumber: 648,\n                                                columnNumber: 17\n                                            }, this),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                className: \"card-meta\",\n                                                style: {\n                                                    whiteSpace: \"pre-wrap\"\n                                                },\n                                                children: progress.slice(-2000) || \"Building...\"\n                                            }, void 0, false, {\n                                                fileName: \"/Users/jarjarbeatu/Documents/Arcadia/apps/web/app/page.tsx\",\n                                                lineNumber: 649,\n                                                columnNumber: 17\n                                            }, this)\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"/Users/jarjarbeatu/Documents/Arcadia/apps/web/app/page.tsx\",\n                                        lineNumber: 647,\n                                        columnNumber: 15\n                                    }, this)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"/Users/jarjarbeatu/Documents/Arcadia/apps/web/app/page.tsx\",\n                                lineNumber: 633,\n                                columnNumber: 11\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"card\",\n                                style: {\n                                    marginTop: 12\n                                },\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"card-title\",\n                                        children: \"Edit Preview\"\n                                    }, void 0, false, {\n                                        fileName: \"/Users/jarjarbeatu/Documents/Arcadia/apps/web/app/page.tsx\",\n                                        lineNumber: 656,\n                                        columnNumber: 13\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"card-meta\",\n                                        children: \"Describe a change and apply it to the current preview.\"\n                                    }, void 0, false, {\n                                        fileName: \"/Users/jarjarbeatu/Documents/Arcadia/apps/web/app/page.tsx\",\n                                        lineNumber: 657,\n                                        columnNumber: 13\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"textarea\", {\n                                        value: editInstruction,\n                                        onChange: (e)=>setEditInstruction(e.target.value),\n                                        placeholder: \"Make the player faster, add a timer, change visuals...\",\n                                        style: {\n                                            minHeight: 100\n                                        }\n                                    }, void 0, false, {\n                                        fileName: \"/Users/jarjarbeatu/Documents/Arcadia/apps/web/app/page.tsx\",\n                                        lineNumber: 658,\n                                        columnNumber: 13\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"button-row\",\n                                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                            onClick: editPreview,\n                                            disabled: !generated || editingPreview,\n                                            children: editingPreview ? \"Editing...\" : \"Apply Edit\"\n                                        }, void 0, false, {\n                                            fileName: \"/Users/jarjarbeatu/Documents/Arcadia/apps/web/app/page.tsx\",\n                                            lineNumber: 665,\n                                            columnNumber: 15\n                                        }, this)\n                                    }, void 0, false, {\n                                        fileName: \"/Users/jarjarbeatu/Documents/Arcadia/apps/web/app/page.tsx\",\n                                        lineNumber: 664,\n                                        columnNumber: 13\n                                    }, this)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"/Users/jarjarbeatu/Documents/Arcadia/apps/web/app/page.tsx\",\n                                lineNumber: 655,\n                                columnNumber: 11\n                            }, this),\n                            (previewErrors.length > 0 || previewWarnings.length > 0) && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"card\",\n                                style: {\n                                    marginTop: 12\n                                },\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"card-title\",\n                                        children: \"Preview Diagnostics\"\n                                    }, void 0, false, {\n                                        fileName: \"/Users/jarjarbeatu/Documents/Arcadia/apps/web/app/page.tsx\",\n                                        lineNumber: 673,\n                                        columnNumber: 15\n                                    }, this),\n                                    previewWarnings.map((w, i)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                            className: \"card-meta\",\n                                            style: {\n                                                color: \"#ffd166\"\n                                            },\n                                            children: w\n                                        }, \"w-\".concat(i), false, {\n                                            fileName: \"/Users/jarjarbeatu/Documents/Arcadia/apps/web/app/page.tsx\",\n                                            lineNumber: 675,\n                                            columnNumber: 17\n                                        }, this)),\n                                    previewErrors.map((e, i)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                            className: \"card-meta\",\n                                            style: {\n                                                color: \"#ff9b9b\"\n                                            },\n                                            children: e\n                                        }, \"e-\".concat(i), false, {\n                                            fileName: \"/Users/jarjarbeatu/Documents/Arcadia/apps/web/app/page.tsx\",\n                                            lineNumber: 678,\n                                            columnNumber: 17\n                                        }, this))\n                                ]\n                            }, void 0, true, {\n                                fileName: \"/Users/jarjarbeatu/Documents/Arcadia/apps/web/app/page.tsx\",\n                                lineNumber: 672,\n                                columnNumber: 13\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/Users/jarjarbeatu/Documents/Arcadia/apps/web/app/page.tsx\",\n                        lineNumber: 623,\n                        columnNumber: 9\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/jarjarbeatu/Documents/Arcadia/apps/web/app/page.tsx\",\n                lineNumber: 603,\n                columnNumber: 7\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"section\", {\n                className: \"section\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h2\", {\n                        children: \"Local Arcade\"\n                    }, void 0, false, {\n                        fileName: \"/Users/jarjarbeatu/Documents/Arcadia/apps/web/app/page.tsx\",\n                        lineNumber: 686,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                        style: {\n                            color: \"#98a0b5\"\n                        },\n                        children: \"These games are stored in your local SQLite database and ready to play.\"\n                    }, void 0, false, {\n                        fileName: \"/Users/jarjarbeatu/Documents/Arcadia/apps/web/app/page.tsx\",\n                        lineNumber: 687,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"tab-row\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                className: arcadeTab === \"community\" ? \"tab active\" : \"tab\",\n                                onClick: ()=>setArcadeTab(\"community\"),\n                                children: \"Community\"\n                            }, void 0, false, {\n                                fileName: \"/Users/jarjarbeatu/Documents/Arcadia/apps/web/app/page.tsx\",\n                                lineNumber: 691,\n                                columnNumber: 11\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                className: arcadeTab === \"mine\" ? \"tab active\" : \"tab\",\n                                onClick: ()=>setArcadeTab(\"mine\"),\n                                children: \"My Games\"\n                            }, void 0, false, {\n                                fileName: \"/Users/jarjarbeatu/Documents/Arcadia/apps/web/app/page.tsx\",\n                                lineNumber: 692,\n                                columnNumber: 11\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/Users/jarjarbeatu/Documents/Arcadia/apps/web/app/page.tsx\",\n                        lineNumber: 690,\n                        columnNumber: 9\n                    }, this),\n                    arcadeTab === \"community\" && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"card\",\n                        style: {\n                            marginBottom: 12\n                        },\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"card-title\",\n                                children: \"Search & Sort\"\n                            }, void 0, false, {\n                                fileName: \"/Users/jarjarbeatu/Documents/Arcadia/apps/web/app/page.tsx\",\n                                lineNumber: 696,\n                                columnNumber: 13\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                                value: search,\n                                onChange: (e)=>setSearch(e.target.value),\n                                placeholder: \"Search games...\",\n                                style: {\n                                    padding: 10,\n                                    borderRadius: 10,\n                                    border: \"1px solid rgba(255,255,255,0.1)\",\n                                    background: \"#0e1322\",\n                                    color: \"#e8eefc\"\n                                }\n                            }, void 0, false, {\n                                fileName: \"/Users/jarjarbeatu/Documents/Arcadia/apps/web/app/page.tsx\",\n                                lineNumber: 697,\n                                columnNumber: 13\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"button-row\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                        className: sort === \"recent\" ? \"tab active\" : \"tab\",\n                                        onClick: ()=>setSort(\"recent\"),\n                                        children: \"Recent\"\n                                    }, void 0, false, {\n                                        fileName: \"/Users/jarjarbeatu/Documents/Arcadia/apps/web/app/page.tsx\",\n                                        lineNumber: 704,\n                                        columnNumber: 15\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                        className: sort === \"top\" ? \"tab active\" : \"tab\",\n                                        onClick: ()=>setSort(\"top\"),\n                                        children: \"Top\"\n                                    }, void 0, false, {\n                                        fileName: \"/Users/jarjarbeatu/Documents/Arcadia/apps/web/app/page.tsx\",\n                                        lineNumber: 705,\n                                        columnNumber: 15\n                                    }, this)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"/Users/jarjarbeatu/Documents/Arcadia/apps/web/app/page.tsx\",\n                                lineNumber: 703,\n                                columnNumber: 13\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/Users/jarjarbeatu/Documents/Arcadia/apps/web/app/page.tsx\",\n                        lineNumber: 695,\n                        columnNumber: 11\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"cards\",\n                        children: [\n                            arcadeTab === \"community\" && games.length === 0 && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"card\",\n                                children: \"No public games yet.\"\n                            }, void 0, false, {\n                                fileName: \"/Users/jarjarbeatu/Documents/Arcadia/apps/web/app/page.tsx\",\n                                lineNumber: 710,\n                                columnNumber: 63\n                            }, this),\n                            arcadeTab === \"mine\" && myGames.length === 0 && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"card\",\n                                children: \"No saved games yet.\"\n                            }, void 0, false, {\n                                fileName: \"/Users/jarjarbeatu/Documents/Arcadia/apps/web/app/page.tsx\",\n                                lineNumber: 711,\n                                columnNumber: 60\n                            }, this),\n                            (arcadeTab === \"community\" ? games : myGames).map((game)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(next_link__WEBPACK_IMPORTED_MODULE_2__[\"default\"], {\n                                    href: \"/games/\".concat(game.id),\n                                    className: \"card\",\n                                    children: [\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                            className: \"card-preview\",\n                                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"iframe\", {\n                                                srcDoc: withAIHelper(game.code),\n                                                sandbox: \"allow-scripts\"\n                                            }, void 0, false, {\n                                                fileName: \"/Users/jarjarbeatu/Documents/Arcadia/apps/web/app/page.tsx\",\n                                                lineNumber: 715,\n                                                columnNumber: 17\n                                            }, this)\n                                        }, void 0, false, {\n                                            fileName: \"/Users/jarjarbeatu/Documents/Arcadia/apps/web/app/page.tsx\",\n                                            lineNumber: 714,\n                                            columnNumber: 15\n                                        }, this),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                            className: \"card-title\",\n                                            children: game.title\n                                        }, void 0, false, {\n                                            fileName: \"/Users/jarjarbeatu/Documents/Arcadia/apps/web/app/page.tsx\",\n                                            lineNumber: 717,\n                                            columnNumber: 15\n                                        }, this),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                            className: \"card-meta\",\n                                            children: game.description\n                                        }, void 0, false, {\n                                            fileName: \"/Users/jarjarbeatu/Documents/Arcadia/apps/web/app/page.tsx\",\n                                            lineNumber: 718,\n                                            columnNumber: 15\n                                        }, this)\n                                    ]\n                                }, game.id, true, {\n                                    fileName: \"/Users/jarjarbeatu/Documents/Arcadia/apps/web/app/page.tsx\",\n                                    lineNumber: 713,\n                                    columnNumber: 13\n                                }, this))\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/Users/jarjarbeatu/Documents/Arcadia/apps/web/app/page.tsx\",\n                        lineNumber: 709,\n                        columnNumber: 9\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/jarjarbeatu/Documents/Arcadia/apps/web/app/page.tsx\",\n                lineNumber: 685,\n                columnNumber: 7\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"section\", {\n                className: \"section\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h2\", {\n                        children: \"Last Generated Code\"\n                    }, void 0, false, {\n                        fileName: \"/Users/jarjarbeatu/Documents/Arcadia/apps/web/app/page.tsx\",\n                        lineNumber: 725,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                        style: {\n                            color: \"#98a0b5\"\n                        },\n                        children: \"This is the raw HTML/JS the model produced. Useful for debugging whether it used GameFactoryKit.\"\n                    }, void 0, false, {\n                        fileName: \"/Users/jarjarbeatu/Documents/Arcadia/apps/web/app/page.tsx\",\n                        lineNumber: 726,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                        className: \"secondary\",\n                        onClick: ()=>setShowCode((s)=>!s),\n                        children: showCode ? \"Hide Code\" : \"Show Code\"\n                    }, void 0, false, {\n                        fileName: \"/Users/jarjarbeatu/Documents/Arcadia/apps/web/app/page.tsx\",\n                        lineNumber: 729,\n                        columnNumber: 9\n                    }, this),\n                    showCode && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"textarea\", {\n                        value: lastCode,\n                        readOnly: true,\n                        style: {\n                            minHeight: 240,\n                            marginTop: 12\n                        }\n                    }, void 0, false, {\n                        fileName: \"/Users/jarjarbeatu/Documents/Arcadia/apps/web/app/page.tsx\",\n                        lineNumber: 733,\n                        columnNumber: 11\n                    }, this),\n                    lastCode.length > 800000 && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                        style: {\n                            color: \"#ffd166\"\n                        },\n                        children: \"Warning: very large code output. Preview performance may degrade.\"\n                    }, void 0, false, {\n                        fileName: \"/Users/jarjarbeatu/Documents/Arcadia/apps/web/app/page.tsx\",\n                        lineNumber: 740,\n                        columnNumber: 11\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/jarjarbeatu/Documents/Arcadia/apps/web/app/page.tsx\",\n                lineNumber: 724,\n                columnNumber: 7\n            }, this)\n        ]\n    }, void 0, true, {\n        fileName: \"/Users/jarjarbeatu/Documents/Arcadia/apps/web/app/page.tsx\",\n        lineNumber: 602,\n        columnNumber: 5\n    }, this);\n}\n_s(Home, \"EJ2omAB9Xo3//exoDRBsiWhcWE8=\");\n_c = Home;\nvar _c;\n$RefreshReg$(_c, \"Home\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QU10SSxZQUFZLENBQUMrSixJQUFNLENBQUNBO2tDQUM5RGhLLFdBQVcsY0FBYzs7Ozs7O29CQUUzQkEsMEJBQ0MsOERBQUNrSTt3QkFDQzNDLE9BQU9sRzt3QkFDUDRLLFFBQVE7d0JBQ1J4QixPQUFPOzRCQUFFVyxXQUFXOzRCQUFLRixXQUFXO3dCQUFHOzs7Ozs7b0JBRzFDN0osU0FBU2tDLE1BQU0sR0FBRyx3QkFDakIsOERBQUMwRzt3QkFBRVEsT0FBTzs0QkFBRUMsT0FBTzt3QkFBVTtrQ0FBRzs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBTzFDO0dBMXRCd0JsSztLQUFBQSIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi9hcHAvcGFnZS50c3g/NzYwMyJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBjbGllbnRcIjtcblxuaW1wb3J0IHsgdXNlRWZmZWN0LCB1c2VNZW1vLCB1c2VSZWYsIHVzZVN0YXRlIH0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgTGluayBmcm9tIFwibmV4dC9saW5rXCI7XG5cbmNvbnN0IEFQSSA9IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0FQSV9VUkwgPz8gXCJodHRwOi8vbG9jYWxob3N0OjgwMDBcIjtcblxudHlwZSBHYW1lID0ge1xuICBpZDogbnVtYmVyO1xuICB0aXRsZTogc3RyaW5nO1xuICBkZXNjcmlwdGlvbjogc3RyaW5nO1xuICBwcm9tcHQ6IHN0cmluZztcbiAgY29kZTogc3RyaW5nO1xuICBjcmVhdGVkX2F0OiBzdHJpbmc7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBIb21lKCkge1xuICBjb25zdCBbcHJvbXB0LCBzZXRQcm9tcHRdID0gdXNlU3RhdGUoXG4gICAgXCJDcmVhdGUgYSBuZW9uIGFyY2FkZSByYWNlciB3aGVyZSB0aGUgcGxheWVyIGRvZGdlcyBvYnN0YWNsZXMsIGNvbGxlY3RzIGJvb3N0cywgYW5kIHJlYWNoZXMgMTAwMCBwb2ludHMgdG8gd2luLlwiXG4gICk7XG4gIGNvbnN0IFtsb2FkaW5nLCBzZXRMb2FkaW5nXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2Vycm9yLCBzZXRFcnJvcl0gPSB1c2VTdGF0ZTxzdHJpbmcgfCBudWxsPihudWxsKTtcbiAgY29uc3QgW2dlbmVyYXRlZCwgc2V0R2VuZXJhdGVkXSA9IHVzZVN0YXRlPHsgdGl0bGU6IHN0cmluZzsgZGVzY3JpcHRpb246IHN0cmluZzsgY29kZTogc3RyaW5nIH0gfCBudWxsPihudWxsKTtcbiAgY29uc3QgW3Byb2dyZXNzLCBzZXRQcm9ncmVzc10gPSB1c2VTdGF0ZTxzdHJpbmc+KFwiXCIpO1xuICBjb25zdCBbc3RyZWFtaW5nLCBzZXRTdHJlYW1pbmddID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbbGFzdENvZGUsIHNldExhc3RDb2RlXSA9IHVzZVN0YXRlPHN0cmluZz4oXCJcIik7XG4gIGNvbnN0IFtlZGl0SW5zdHJ1Y3Rpb24sIHNldEVkaXRJbnN0cnVjdGlvbl0gPSB1c2VTdGF0ZShcIlwiKTtcbiAgY29uc3QgW2VkaXRpbmdQcmV2aWV3LCBzZXRFZGl0aW5nUHJldmlld10gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IGRyYWZ0S2V5ID0gXCJnZl9kcmFmdF9nYW1lXCI7XG4gIGNvbnN0IFtwcmV2aWV3RXJyb3JzLCBzZXRQcmV2aWV3RXJyb3JzXSA9IHVzZVN0YXRlPHN0cmluZ1tdPihbXSk7XG4gIGNvbnN0IFtwcmV2aWV3V2FybmluZ3MsIHNldFByZXZpZXdXYXJuaW5nc10gPSB1c2VTdGF0ZTxzdHJpbmdbXT4oW10pO1xuICBjb25zdCBbc2hvd0NvZGUsIHNldFNob3dDb2RlXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW3BlcmZNb2RlLCBzZXRQZXJmTW9kZV0gPSB1c2VTdGF0ZSh0cnVlKTtcbiAgY29uc3QgW2dhbWVzLCBzZXRHYW1lc10gPSB1c2VTdGF0ZTxHYW1lW10+KFtdKTtcbiAgY29uc3QgW215R2FtZXMsIHNldE15R2FtZXNdID0gdXNlU3RhdGU8R2FtZVtdPihbXSk7XG4gIGNvbnN0IFttZSwgc2V0TWVdID0gdXNlU3RhdGU8YW55IHwgbnVsbD4obnVsbCk7XG4gIGNvbnN0IFthcmNhZGVUYWIsIHNldEFyY2FkZVRhYl0gPSB1c2VTdGF0ZTxcImNvbW11bml0eVwiIHwgXCJtaW5lXCI+KFwiY29tbXVuaXR5XCIpO1xuICBjb25zdCBbc2VhcmNoLCBzZXRTZWFyY2hdID0gdXNlU3RhdGUoXCJcIik7XG4gIGNvbnN0IFtzb3J0LCBzZXRTb3J0XSA9IHVzZVN0YXRlPFwicmVjZW50XCIgfCBcInRvcFwiPihcInJlY2VudFwiKTtcbiAgY29uc3QgW3NhdmluZywgc2V0U2F2aW5nXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgaWZyYW1lUmVmID0gdXNlUmVmPEhUTUxJRnJhbWVFbGVtZW50IHwgbnVsbD4obnVsbCk7XG4gIFxuICBjb25zdCBwcmV2aWV3UmVmID0gdXNlUmVmPEhUTUxEaXZFbGVtZW50IHwgbnVsbD4obnVsbCk7XG5cbiAgY29uc3QgcHJldmlld0tleSA9IHVzZU1lbW8oXG4gICAgKCkgPT4gKGdlbmVyYXRlZCA/IGdlbmVyYXRlZC50aXRsZSArIGdlbmVyYXRlZC5jb2RlLmxlbmd0aCArIFN0cmluZyhwZXJmTW9kZSkgOiBcImVtcHR5XCIpLFxuICAgIFtnZW5lcmF0ZWQsIHBlcmZNb2RlXVxuICApO1xuXG4gIGFzeW5jIGZ1bmN0aW9uIHJlZnJlc2hHYW1lcygpIHtcbiAgICBjb25zdCBwYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKCk7XG4gICAgaWYgKHNlYXJjaCkgcGFyYW1zLnNldChcInFcIiwgc2VhcmNoKTtcbiAgICBwYXJhbXMuc2V0KFwic29ydFwiLCBzb3J0KTtcbiAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaChgJHtBUEl9L2dhbWVzPyR7cGFyYW1zLnRvU3RyaW5nKCl9YCk7XG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlcy5qc29uKCk7XG4gICAgc2V0R2FtZXMoZGF0YSk7XG4gIH1cblxuICBhc3luYyBmdW5jdGlvbiByZWZyZXNoTWUoKSB7XG4gICAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2goYCR7QVBJfS9hdXRoL21lYCwgeyBjcmVkZW50aWFsczogXCJpbmNsdWRlXCIgfSk7XG4gICAgaWYgKHJlcy5vaykge1xuICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlcy5qc29uKCk7XG4gICAgICBzZXRNZShkYXRhKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc2V0TWUobnVsbCk7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgZnVuY3Rpb24gcmVmcmVzaE15R2FtZXMoKSB7XG4gICAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2goYCR7QVBJfS9nYW1lcy9taW5lYCwgeyBjcmVkZW50aWFsczogXCJpbmNsdWRlXCIgfSk7XG4gICAgaWYgKCFyZXMub2spIHJldHVybjtcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzLmpzb24oKTtcbiAgICBzZXRNeUdhbWVzKGRhdGEpO1xuICB9XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICByZWZyZXNoR2FtZXMoKS5jYXRjaCgoKSA9PiB7fSk7XG4gICAgcmVmcmVzaE1lKCkuY2F0Y2goKCkgPT4ge30pO1xuICAgIHJlZnJlc2hNeUdhbWVzKCkuY2F0Y2goKCkgPT4ge30pO1xuICB9LCBbc2VhcmNoLCBzb3J0XSk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBjb25zdCByYXcgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShkcmFmdEtleSk7XG4gICAgaWYgKCFyYXcpIHJldHVybjtcbiAgICB0cnkge1xuICAgICAgY29uc3QgZHJhZnQgPSBKU09OLnBhcnNlKHJhdyk7XG4gICAgICBpZiAoZHJhZnQ/LmNvZGUpIHtcbiAgICAgICAgc2V0R2VuZXJhdGVkKHsgdGl0bGU6IGRyYWZ0LnRpdGxlIHx8IFwiRHJhZnRcIiwgZGVzY3JpcHRpb246IGRyYWZ0LmRlc2NyaXB0aW9uIHx8IFwiXCIsIGNvZGU6IGRyYWZ0LmNvZGUgfSk7XG4gICAgICAgIHNldExhc3RDb2RlKGRyYWZ0LmNvZGUpO1xuICAgICAgfVxuICAgICAgaWYgKGRyYWZ0Py5wcm9tcHQpIHNldFByb21wdChkcmFmdC5wcm9tcHQpO1xuICAgIH0gY2F0Y2gge31cbiAgfSwgW10pO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKCFnZW5lcmF0ZWQpIHJldHVybjtcbiAgICBjb25zdCBwYXlsb2FkID0ge1xuICAgICAgdGl0bGU6IGdlbmVyYXRlZC50aXRsZSxcbiAgICAgIGRlc2NyaXB0aW9uOiBnZW5lcmF0ZWQuZGVzY3JpcHRpb24sXG4gICAgICBjb2RlOiBnZW5lcmF0ZWQuY29kZSxcbiAgICAgIHByb21wdFxuICAgIH07XG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oZHJhZnRLZXksIEpTT04uc3RyaW5naWZ5KHBheWxvYWQpKTtcbiAgfSwgW2dlbmVyYXRlZCwgcHJvbXB0XSk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBmdW5jdGlvbiBvbk1lc3NhZ2UoZXZlbnQ6IE1lc3NhZ2VFdmVudCkge1xuICAgICAgY29uc3QgZGF0YSA9IGV2ZW50LmRhdGE7XG4gICAgICBpZiAoZGF0YSAmJiBkYXRhLnR5cGUgPT09IFwiZ2FtZV9lcnJvclwiKSB7XG4gICAgICAgIHNldFByZXZpZXdFcnJvcnMoKHByZXYpID0+IFtkYXRhLm1lc3NhZ2UsIC4uLnByZXZdLnNsaWNlKDAsIDUpKTtcbiAgICAgIH1cbiAgICB9XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJtZXNzYWdlXCIsIG9uTWVzc2FnZSk7XG4gICAgcmV0dXJuICgpID0+IHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwibWVzc2FnZVwiLCBvbk1lc3NhZ2UpO1xuICB9LCBbXSk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoIWdlbmVyYXRlZCkgcmV0dXJuO1xuICAgIGNvbnN0IHdhcm5pbmdzOiBzdHJpbmdbXSA9IFtdO1xuICAgIGlmIChnZW5lcmF0ZWQuY29kZS5sZW5ndGggPiA4MDAwMDApIHdhcm5pbmdzLnB1c2goXCJWZXJ5IGxhcmdlIEhUTUwgb3V0cHV0OyBwcmV2aWV3IG1heSBiZSBzbG93LlwiKTtcbiAgICBpZiAoLzxzY3JpcHRbXj5dK3NyYz0vaS50ZXN0KGdlbmVyYXRlZC5jb2RlKSkgd2FybmluZ3MucHVzaChcIkV4dGVybmFsIDxzY3JpcHQgc3JjPiB3YXMgc3RyaXBwZWQgZm9yIHNhZmV0eS5cIik7XG4gICAgaWYgKG5ldyBSZWdFeHAoXCI8bGlua1tePl0raHJlZj1bJ1xcXCJdaHR0cHM/Oi8vXCIsIFwiaVwiKS50ZXN0KGdlbmVyYXRlZC5jb2RlKSkge1xuICAgICAgd2FybmluZ3MucHVzaChcIkV4dGVybmFsIDxsaW5rIGhyZWY+IHdhcyBzdHJpcHBlZCBmb3Igc2FmZXR5LlwiKTtcbiAgICB9XG4gICAgc2V0UHJldmlld1dhcm5pbmdzKHdhcm5pbmdzKTtcbiAgfSwgW2dlbmVyYXRlZF0pO1xuXG5cbiAgZnVuY3Rpb24gd2l0aEFJSGVscGVyKGNvZGU6IHN0cmluZykge1xuICAgIGNvbnN0IHdzVXJsID0gQVBJLnJlcGxhY2UoXCJodHRwOi8vXCIsIFwid3M6Ly9cIikucmVwbGFjZShcImh0dHBzOi8vXCIsIFwid3NzOi8vXCIpO1xuICAgIGNvbnN0IGhlbHBlciA9IGBcbjxzY3JpcHQ+XG4oKCkgPT4ge1xuICBjb25zdCBwZXJmID0gJHtwZXJmTW9kZSA/IFwidHJ1ZVwiIDogXCJmYWxzZVwifTtcbiAgd2luZG93Ll9fR0ZfUEVSRl9NT0RFID0gcGVyZjtcbiAgaWYgKHBlcmYpIHtcbiAgICBjb25zdCBkcHIgPSB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbyB8fCAxO1xuICAgIHRyeSB7XG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkod2luZG93LCAnZGV2aWNlUGl4ZWxSYXRpbycsIHsgZ2V0OiAoKSA9PiBNYXRoLm1pbigxLCBkcHIpLCBjb25maWd1cmFibGU6IHRydWUgfSk7XG4gICAgfSBjYXRjaCB7fVxuICB9XG59KSgpO1xud2luZG93LkdhbWVGYWN0b3J5QUkgPSBhc3luYyBmdW5jdGlvbihwcm9tcHQsIHN5c3RlbSwgdGltZW91dE1zPTgwMDApe1xuICBjb25zdCBjb250cm9sbGVyID0gbmV3IEFib3J0Q29udHJvbGxlcigpO1xuICBjb25zdCB0aW1lciA9IHNldFRpbWVvdXQoKCk9PmNvbnRyb2xsZXIuYWJvcnQoKSwgdGltZW91dE1zKTtcbiAgdHJ5e1xuICAgIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKFwiJHtBUEl9L2FpXCIsIHtcbiAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICBoZWFkZXJzOiB7XCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCJ9LFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyBwcm9tcHQsIHN5c3RlbSB9KSxcbiAgICAgIHNpZ25hbDogY29udHJvbGxlci5zaWduYWxcbiAgICB9KTtcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzLmpzb24oKTtcbiAgICByZXR1cm4gZGF0YS5jb250ZW50IHx8IFwiXCI7XG4gIH0gZmluYWxseSB7XG4gICAgY2xlYXJUaW1lb3V0KHRpbWVyKTtcbiAgfVxufTtcbndpbmRvdy5HYW1lRmFjdG9yeU11bHRpcGxheWVyID0gZnVuY3Rpb24ocm9vbUlkKXtcbiAgY29uc3Qgd3MgPSBuZXcgV2ViU29ja2V0KFwiJHt3c1VybH0vd3MvXCIgKyBlbmNvZGVVUklDb21wb25lbnQocm9vbUlkIHx8IFwibG9iYnlcIikpO1xuICBjb25zdCBoYW5kbGVycyA9IFtdO1xuICB3cy5vbm1lc3NhZ2UgPSAoZXZ0KSA9PiB7XG4gICAgaGFuZGxlcnMuZm9yRWFjaCgoZm4pID0+IGZuKGV2dC5kYXRhKSk7XG4gIH07XG4gIHJldHVybiB7XG4gICAgc2VuZDogKGRhdGEpID0+IHtcbiAgICAgIGlmICh3cy5yZWFkeVN0YXRlID09PSAxKSB3cy5zZW5kKHR5cGVvZiBkYXRhID09PSBcInN0cmluZ1wiID8gZGF0YSA6IEpTT04uc3RyaW5naWZ5KGRhdGEpKTtcbiAgICB9LFxuICAgIG9uTWVzc2FnZTogKGZuKSA9PiBoYW5kbGVycy5wdXNoKGZuKSxcbiAgICBkaXNjb25uZWN0OiAoKSA9PiB3cy5jbG9zZSgpXG4gIH07XG59O1xud2luZG93LkdhbWVGYWN0b3J5S2l0ID0gKGZ1bmN0aW9uKCl7XG4gIGNvbnN0IGNsYW1wID0gKHYsbWluLG1heCk9Pk1hdGgubWF4KG1pbixNYXRoLm1pbihtYXgsdikpO1xuICBjb25zdCBsZXJwID0gKGEsYix0KT0+YSsoYi1hKSp0O1xuICBjb25zdCBtYXAgPSAodixpbk1pbixpbk1heCxvdXRNaW4sb3V0TWF4KT0+b3V0TWluKyhvdXRNYXgtb3V0TWluKSooKHYtaW5NaW4pLyhpbk1heC1pbk1pbikpO1xuICBjb25zdCByYW5kID0gKG1pbj0wLG1heD0xKT0+TWF0aC5yYW5kb20oKSoobWF4LW1pbikrbWluO1xuICBjb25zdCBjaG9pY2UgPSAoYXJyKT0+YXJyW01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSphcnIubGVuZ3RoKV07XG4gIGNvbnN0IG5vdyA9ICgpPT5wZXJmb3JtYW5jZS5ub3coKTtcbiAgY29uc3QgZWFzaW5nID0ge1xuICAgIGxpbmVhcjp0PT50LFxuICAgIGluUXVhZDp0PT50KnQsXG4gICAgb3V0UXVhZDp0PT50KigyLXQpLFxuICAgIGluT3V0UXVhZDp0PT50PDAuNT8yKnQqdDotMSsoNC0yKnQpKnRcbiAgfTtcbiAgY29uc3QgdHdlZW4gPSAob2JqLCBwcm9wLCB0bywgZHVyYXRpb24sIGVhc2U9ZWFzaW5nLmluT3V0UXVhZCkgPT4ge1xuICAgIGNvbnN0IGZyb20gPSBvYmpbcHJvcF07XG4gICAgY29uc3Qgc3RhcnQgPSBub3coKTtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpPT57XG4gICAgICBmdW5jdGlvbiB0aWNrKCl7XG4gICAgICAgIGNvbnN0IHQgPSBNYXRoLm1pbigxLCAobm93KCktc3RhcnQpL2R1cmF0aW9uKTtcbiAgICAgICAgb2JqW3Byb3BdID0gZnJvbSArICh0by1mcm9tKSplYXNlKHQpO1xuICAgICAgICBpZiAodDwxKSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUodGljayk7IGVsc2UgcmVzb2x2ZSh0cnVlKTtcbiAgICAgIH1cbiAgICAgIHRpY2soKTtcbiAgICB9KTtcbiAgfTtcbiAgY29uc3Qgc3RvcmFnZSA9IHtcbiAgICBzYXZlOihrZXksdmFsKT0+bG9jYWxTdG9yYWdlLnNldEl0ZW0oa2V5LEpTT04uc3RyaW5naWZ5KHZhbCkpLFxuICAgIGxvYWQ6KGtleSxkZWY9bnVsbCk9PnsgdHJ5e2NvbnN0IHY9bG9jYWxTdG9yYWdlLmdldEl0ZW0oa2V5KTsgcmV0dXJuIHY/SlNPTi5wYXJzZSh2KTpkZWY7fWNhdGNoe3JldHVybiBkZWY7fSB9LFxuICAgIHNsb3RTYXZlOihzbG90LHZhbCk9PmxvY2FsU3RvcmFnZS5zZXRJdGVtKFwiZ2Zfc2xvdF9cIitzbG90LEpTT04uc3RyaW5naWZ5KHZhbCkpLFxuICAgIHNsb3RMb2FkOihzbG90LGRlZj1udWxsKT0+eyB0cnl7Y29uc3Qgdj1sb2NhbFN0b3JhZ2UuZ2V0SXRlbShcImdmX3Nsb3RfXCIrc2xvdCk7IHJldHVybiB2P0pTT04ucGFyc2Uodik6ZGVmO31jYXRjaHtyZXR1cm4gZGVmO30gfVxuICB9O1xuICBjb25zdCBpbnB1dCA9IChmdW5jdGlvbigpe1xuICAgIGNvbnN0IGtleXMgPSB7fTtcbiAgICBjb25zdCBtb3VzZSA9IHt4OjAseTowLGRvd246ZmFsc2V9O1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJyxlPT5rZXlzW2Uua2V5XT10cnVlKTtcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigna2V5dXAnLGU9PmtleXNbZS5rZXldPWZhbHNlKTtcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJyxlPT57bW91c2UueD1lLmNsaWVudFg7IG1vdXNlLnk9ZS5jbGllbnRZO30pO1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCgpPT5tb3VzZS5kb3duPXRydWUpO1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdtb3VzZXVwJywoKT0+bW91c2UuZG93bj1mYWxzZSk7XG4gICAgcmV0dXJuIHsga2V5cywgbW91c2UsIGlzRG93bjooayk9PiEha2V5c1trXSB9O1xuICB9KSgpO1xuICBjb25zdCBhdWRpbyA9IChmdW5jdGlvbigpe1xuICAgIGxldCBjdHg7XG4gICAgY29uc3QgZW5zdXJlPSgpPT5jdHh8fChjdHg9bmV3ICh3aW5kb3cuQXVkaW9Db250ZXh0fHx3aW5kb3cud2Via2l0QXVkaW9Db250ZXh0KSgpKTtcbiAgICBjb25zdCBiZWVwPShmcmVxPTQ0MCxkdXI9MC4xLHR5cGU9J3NpbmUnLHZvbD0wLjIpPT57XG4gICAgICBpZiAoZHVyID4gNSkgZHVyID0gZHVyIC8gMTAwMDtcbiAgICAgIGNvbnN0IGM9ZW5zdXJlKCk7XG4gICAgICBjb25zdCBvPWMuY3JlYXRlT3NjaWxsYXRvcigpOyBjb25zdCBnPWMuY3JlYXRlR2FpbigpO1xuICAgICAgby50eXBlPXR5cGU7IG8uZnJlcXVlbmN5LnZhbHVlPWZyZXE7XG4gICAgICBjb25zdCB0PWMuY3VycmVudFRpbWU7XG4gICAgICBnLmdhaW4uc2V0VmFsdWVBdFRpbWUoMC4wMDAxLCB0KTtcbiAgICAgIGcuZ2Fpbi5leHBvbmVudGlhbFJhbXBUb1ZhbHVlQXRUaW1lKE1hdGgubWF4KDAuMDAwMSwgdm9sKSwgdCswLjAxKTtcbiAgICAgIGcuZ2Fpbi5leHBvbmVudGlhbFJhbXBUb1ZhbHVlQXRUaW1lKDAuMDAwMSwgdCtkdXIpO1xuICAgICAgby5jb25uZWN0KGcpOyBnLmNvbm5lY3QoYy5kZXN0aW5hdGlvbik7XG4gICAgICBvLnN0YXJ0KHQpOyBvLnN0b3AodCtkdXIrMC4wMik7XG4gICAgfTtcbiAgICByZXR1cm4geyBiZWVwIH07XG4gIH0pKCk7XG4gIGNvbnN0IHBoeXNpY3MyZCA9IHtcbiAgICBzdGVwOihvYmosZHQpPT57IG9iai52eD0ob2JqLnZ4fHwwKSsob2JqLmF4fHwwKSpkdDsgb2JqLnZ5PShvYmoudnl8fDApKyhvYmouYXl8fDApKmR0OyBvYmoueCs9b2JqLnZ4KmR0OyBvYmoueSs9b2JqLnZ5KmR0OyB9LFxuICAgIGFhYmI6KGEsYik9PmEueDxhLncrYi54JiZhLngrYS53PmIueCYmYS55PGEuaCtiLnkmJmEueSthLmg+Yi55LFxuICAgIGNpcmNsZTooYSxiKT0+TWF0aC5oeXBvdChhLngtYi54LGEueS1iLnkpPChhLnIrYi5yKVxuICB9O1xuICBjb25zdCBjb29sZG93biA9IChmdW5jdGlvbigpe1xuICAgIGNvbnN0IG1hcCA9IG5ldyBNYXAoKTtcbiAgICBjb25zdCByZWFkeT0oa2V5LG1zKT0+eyBjb25zdCB0PW5vdygpOyBpZighbWFwLmhhcyhrZXkpfHx0LW1hcC5nZXQoa2V5KT49bXMpeyBtYXAuc2V0KGtleSx0KTsgcmV0dXJuIHRydWU7fSByZXR1cm4gZmFsc2U7IH07XG4gICAgcmV0dXJuIHsgcmVhZHkgfTtcbiAgfSkoKTtcbiAgY29uc3QgdGltZXJzID0gKGZ1bmN0aW9uKCl7XG4gICAgY29uc3QgbGlzdD1bXTtcbiAgICBjb25zdCBhZnRlcj0obXMsZm4pPT57IGNvbnN0IHQ9bm93KCkrbXM7IGxpc3QucHVzaCh7dCxmbn0pOyB9O1xuICAgIGNvbnN0IHRpY2s9KCk9PnsgY29uc3QgdD1ub3coKTsgZm9yKGxldCBpPWxpc3QubGVuZ3RoLTE7aT49MDtpLS0peyBpZih0Pj1saXN0W2ldLnQpeyBsaXN0W2ldLmZuKCk7IGxpc3Quc3BsaWNlKGksMSk7fSB9IH07XG4gICAgcmV0dXJuIHsgYWZ0ZXIsIHRpY2sgfTtcbiAgfSkoKTtcbiAgY29uc3QgcGFydGljbGVzID0gKGZ1bmN0aW9uKCl7XG4gICAgY29uc3QgbGlzdD1bXTtcbiAgICBjb25zdCBzcGF3bj0oeCx5LGNvdW50PTIwKT0+eyBmb3IobGV0IGk9MDtpPGNvdW50O2krKyl7IGxpc3QucHVzaCh7eCx5LHZ4OnJhbmQoLTEsMSksdnk6cmFuZCgtMSwxKSxsaWZlOnJhbmQoMC40LDEpfSk7fSB9O1xuICAgIGNvbnN0IHVwZGF0ZT0oZHQpPT57IGZvcihjb25zdCBwIG9mIGxpc3QpeyBwLngrPXAudngqZHQqNjA7IHAueSs9cC52eSpkdCo2MDsgcC5saWZlLT1kdDsgfSB9O1xuICAgIGNvbnN0IGRyYXc9KGN0eCk9PnsgZm9yKGNvbnN0IHAgb2YgbGlzdCl7IGlmKHAubGlmZTw9MCkgY29udGludWU7IGN0eC5nbG9iYWxBbHBoYT1NYXRoLm1heCgwLHAubGlmZSk7IGN0eC5maWxsUmVjdChwLngscC55LDIsMik7fSBjdHguZ2xvYmFsQWxwaGE9MTsgfTtcbiAgICBjb25zdCBwcnVuZT0oKT0+eyBmb3IobGV0IGk9bGlzdC5sZW5ndGgtMTtpPj0wO2ktLSl7IGlmKGxpc3RbaV0ubGlmZTw9MCkgbGlzdC5zcGxpY2UoaSwxKTt9IH07XG4gICAgcmV0dXJuIHsgc3Bhd24sIHVwZGF0ZSwgZHJhdywgcHJ1bmUsIGxpc3QgfTtcbiAgfSkoKTtcbiAgY29uc3QgcHNldWRvM2QgPSB7XG4gICAgcHJvamVjdDoocHQsY2FtKT0+eyBjb25zdCB6PXB0LnotKGNhbS56fHwwKTsgY29uc3Qgc2NhbGU9KGNhbS5mb3Z8fDQwMCkvKHp8fDEpOyByZXR1cm4geyB4OihwdC54LShjYW0ueHx8MCkpKnNjYWxlKyhjYW0uY3h8fDApLCB5OihwdC55LShjYW0ueXx8MCkpKnNjYWxlKyhjYW0uY3l8fDApLCBzY2FsZSB9OyB9XG4gIH07XG4gIGNvbnN0IGNvbG9yID0ge1xuICAgIGhleFRvUmdiOihoZXgpPT57IGNvbnN0IGg9aGV4LnJlcGxhY2UoJyMnLCcnKTsgY29uc3QgYmlnaW50PXBhcnNlSW50KGgsMTYpOyByZXR1cm4ge3I6KGJpZ2ludD4+MTYpJjI1NSxnOihiaWdpbnQ+PjgpJjI1NSxiOmJpZ2ludCYyNTV9OyB9LFxuICAgIHJnYlRvSGV4OihyLGcsYik9PicjJytbcixnLGJdLm1hcCh2PT52LnRvU3RyaW5nKDE2KS5wYWRTdGFydCgyLCcwJykpLmpvaW4oJycpLFxuICAgIGxlcnA6KGEsYix0KT0+KHsgcjpNYXRoLnJvdW5kKGEucisoYi5yLWEucikqdCksIGc6TWF0aC5yb3VuZChhLmcrKGIuZy1hLmcpKnQpLCBiOk1hdGgucm91bmQoYS5iKyhiLmItYS5iKSp0KSB9KVxuICB9O1xuICBjb25zdCB0ZXh0ID0ge1xuICAgIHdyYXA6KGN0eCx0ZXh0LG1heFdpZHRoT3JYLHksbWF5YmVXLG1heWJlTGluZUgpPT57XG4gICAgICBpZiAodHlwZW9mIG1heFdpZHRoT3JYID09PSAnbnVtYmVyJyAmJiB0eXBlb2YgeSA9PT0gJ251bWJlcicgJiYgdHlwZW9mIG1heWJlVyA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgY29uc3QgeCA9IG1heFdpZHRoT3JYO1xuICAgICAgICBjb25zdCBtYXhXID0gbWF5YmVXO1xuICAgICAgICBjb25zdCBsaW5lSCA9IHR5cGVvZiBtYXliZUxpbmVIID09PSAnbnVtYmVyJyA/IG1heWJlTGluZUggOiAxODtcbiAgICAgICAgY29uc3QgbGluZXMgPSB0ZXh0V3JhcChjdHgsIHRleHQsIG1heFcpO1xuICAgICAgICBsaW5lcy5mb3JFYWNoKChsbixpKT0+Y3R4LmZpbGxUZXh0KGxuLHgseStpKmxpbmVIKSk7XG4gICAgICAgIHJldHVybiBsaW5lcztcbiAgICAgIH1cbiAgICAgIHJldHVybiB0ZXh0V3JhcChjdHgsIHRleHQsIG1heFdpZHRoT3JYKTtcbiAgICB9XG4gIH07XG4gIGZ1bmN0aW9uIHRleHRXcmFwKGN0eCwgdHh0LCBtYXhXaWR0aCl7XG4gICAgY29uc3Qgd29yZHM9U3RyaW5nKHR4dHx8JycpLnNwbGl0KCcgJyk7IGxldCBsaW5lPScnOyBjb25zdCBsaW5lcz1bXTtcbiAgICBmb3IoY29uc3QgdyBvZiB3b3Jkcyl7IGNvbnN0IHRlc3Q9bGluZSt3KycgJzsgaWYoY3R4Lm1lYXN1cmVUZXh0KHRlc3QpLndpZHRoPm1heFdpZHRoKXsgbGluZXMucHVzaChsaW5lLnRyaW0oKSk7IGxpbmU9dysnICc7IH0gZWxzZSB7IGxpbmU9dGVzdDsgfSB9XG4gICAgbGluZXMucHVzaChsaW5lLnRyaW0oKSk7IHJldHVybiBsaW5lcztcbiAgfVxuICBjb25zdCBybmcgPSAoZnVuY3Rpb24oKXtcbiAgICBsZXQgc2VlZCA9IDEyMzQ1Njc7XG4gICAgY29uc3Qgc2V0U2VlZCA9IChzKT0+eyBzZWVkID0gcz4+PjA7IH07XG4gICAgY29uc3QgbmV4dCA9ICgpPT57IHNlZWQgPSAoc2VlZCoxNjY0NTI1KzEwMTM5MDQyMjMpPj4+MDsgcmV0dXJuIHNlZWQvNDI5NDk2NzI5NjsgfTtcbiAgICByZXR1cm4geyBzZXRTZWVkLCBuZXh0IH07XG4gIH0pKCk7XG4gIGNvbnN0IGV2ZW50QnVzID0gKGZ1bmN0aW9uKCl7XG4gICAgY29uc3QgbWFwPW5ldyBNYXAoKTtcbiAgICBjb25zdCBvbj0oZXZ0LGZuKT0+eyBpZighbWFwLmhhcyhldnQpKSBtYXAuc2V0KGV2dCxbXSk7IG1hcC5nZXQoZXZ0KS5wdXNoKGZuKTsgfTtcbiAgICBjb25zdCBlbWl0PShldnQsZGF0YSk9PnsgKG1hcC5nZXQoZXZ0KXx8W10pLmZvckVhY2goZm49PmZuKGRhdGEpKTsgfTtcbiAgICByZXR1cm4geyBvbiwgZW1pdCB9O1xuICB9KSgpO1xuICBjb25zdCBmc20gPSAoaW5pdGlhbCk9PnsgbGV0IHN0YXRlPWluaXRpYWw7IGNvbnN0IHRyYW5zaXRpb25zPW5ldyBNYXAoKTsgY29uc3Qgb249KGZyb20sdG8sZm4pPT50cmFuc2l0aW9ucy5zZXQoZnJvbSsnPicrdG8sZm4pOyBjb25zdCBzZXQ9KHRvKT0+eyBjb25zdCBmbj10cmFuc2l0aW9ucy5nZXQoc3RhdGUrJz4nK3RvKTsgc3RhdGU9dG87IGlmKGZuKSBmbigpOyB9OyBjb25zdCBnZXQ9KCk9PnN0YXRlOyByZXR1cm4geyBvbiwgc2V0LCBnZXQgfTsgfTtcbiAgY29uc3Qgc3ByaXRlcyA9IHtcbiAgICBkcmF3OihjdHgsaW1nLGZyYW1lLGZ3LGZoLHgseSxzY2FsZT0xKT0+eyBjb25zdCBzeD1mcmFtZSpmdzsgY3R4LmRyYXdJbWFnZShpbWcsc3gsMCxmdyxmaCx4LHksZncqc2NhbGUsZmgqc2NhbGUpOyB9XG4gIH07XG4gIGNvbnN0IHBhdGhmaW5kaW5nID0ge1xuICAgIGFTdGFyOihncmlkLHN0YXJ0LGVuZCk9PnsgY29uc3Qgb3Blbj1bc3RhcnRdOyBjb25zdCBjYW1lPW5ldyBNYXAoKTsgY29uc3QgZz1uZXcgTWFwKCk7IGNvbnN0IGY9bmV3IE1hcCgpOyBjb25zdCBrZXk9KHApPT5wLngrJywnK3AueTsgY29uc3QgaD0oYSxiKT0+TWF0aC5hYnMoYS54LWIueCkrTWF0aC5hYnMoYS55LWIueSk7IGcuc2V0KGtleShzdGFydCksMCk7IGYuc2V0KGtleShzdGFydCksaChzdGFydCxlbmQpKTsgd2hpbGUob3Blbi5sZW5ndGgpeyBvcGVuLnNvcnQoKGEsYik9PmYuZ2V0KGtleShhKSktZi5nZXQoa2V5KGIpKSk7IGNvbnN0IGN1cnJlbnQ9b3Blbi5zaGlmdCgpOyBpZihjdXJyZW50Lng9PT1lbmQueCYmY3VycmVudC55PT09ZW5kLnkpeyBjb25zdCBwYXRoPVtjdXJyZW50XTsgbGV0IGs9a2V5KGN1cnJlbnQpOyB3aGlsZShjYW1lLmhhcyhrKSl7IGNvbnN0IHA9Y2FtZS5nZXQoayk7IHBhdGgucHVzaChwKTsgaz1rZXkocCk7IH0gcmV0dXJuIHBhdGgucmV2ZXJzZSgpOyB9IGNvbnN0IGRpcnM9W3t4OjEseTowfSx7eDotMSx5OjB9LHt4OjAseToxfSx7eDowLHk6LTF9XTsgZm9yKGNvbnN0IGQgb2YgZGlycyl7IGNvbnN0IG54PXt4OmN1cnJlbnQueCtkLngseTpjdXJyZW50LnkrZC55fTsgaWYoZ3JpZFtueC55XT8uW254LnhdPT09MSkgY29udGludWU7IGNvbnN0IHRlbnRhdGl2ZT0oZy5nZXQoa2V5KGN1cnJlbnQpKXx8MCkrMTsgY29uc3Qgbms9a2V5KG54KTsgaWYodGVudGF0aXZlIDwgKGcuZ2V0KG5rKT8/SW5maW5pdHkpKXsgY2FtZS5zZXQobmssY3VycmVudCk7IGcuc2V0KG5rLHRlbnRhdGl2ZSk7IGYuc2V0KG5rLHRlbnRhdGl2ZStoKG54LGVuZCkpOyBpZighb3Blbi5maW5kKHA9PnAueD09PW54LngmJnAueT09PW54LnkpKSBvcGVuLnB1c2gobngpOyB9IH0gfSByZXR1cm4gW107IH1cbiAgfTtcbiAgY29uc3QgbmF2bWVzaCA9IHtcbiAgICBidWlsZDooZ3JpZCxkaWFnPWZhbHNlKT0+KHsgZ3JpZCwgZGlhZyB9KSxcbiAgICBuZWlnaGJvcnM6KG1lc2gsbm9kZSk9PnsgY29uc3QgZGlycz1tZXNoLmRpYWc/W3t4OjEseTowfSx7eDotMSx5OjB9LHt4OjAseToxfSx7eDowLHk6LTF9LHt4OjEseToxfSx7eDotMSx5OjF9LHt4OjEseTotMX0se3g6LTEseTotMX1dOlt7eDoxLHk6MH0se3g6LTEseTowfSx7eDowLHk6MX0se3g6MCx5Oi0xfV07IHJldHVybiBkaXJzLm1hcChkPT4oe3g6bm9kZS54K2QueCx5Om5vZGUueStkLnl9KSkuZmlsdGVyKG49Pm1lc2guZ3JpZFtuLnldPy5bbi54XSE9PTEpOyB9LFxuICAgIGxpbmVPZlNpZ2h0OihtZXNoLGEsYik9PnsgbGV0IHgwPWEueCx5MD1hLnkseDE9Yi54LHkxPWIueTsgY29uc3QgZHg9TWF0aC5hYnMoeDEteDApLCBkeT1NYXRoLmFicyh5MS15MCk7IGxldCBzeD14MDx4MT8xOi0xLCBzeT15MDx5MT8xOi0xOyBsZXQgZXJyPWR4LWR5OyB3aGlsZSh0cnVlKXsgaWYobWVzaC5ncmlkW3kwXT8uW3gwXT09PTEpIHJldHVybiBmYWxzZTsgaWYoeDA9PT14MSAmJiB5MD09PXkxKSBicmVhazsgY29uc3QgZTI9MiplcnI7IGlmKGUyPi1keSl7IGVyci09ZHk7IHgwKz1zeDsgfSBpZihlMjxkeCl7IGVycis9ZHg7IHkwKz1zeTsgfSB9IHJldHVybiB0cnVlOyB9LFxuICAgIHNtb290aDoocGF0aCxtZXNoKT0+eyBpZihwYXRoLmxlbmd0aDw9MikgcmV0dXJuIHBhdGg7IGNvbnN0IG91dD1bcGF0aFswXV07IGxldCBpPTA7IHdoaWxlKGk8cGF0aC5sZW5ndGgtMSl7IGxldCBqPXBhdGgubGVuZ3RoLTE7IGZvcig7aj5pKzE7ai0tKXsgaWYobmF2bWVzaC5saW5lT2ZTaWdodChtZXNoLHBhdGhbaV0scGF0aFtqXSkpIGJyZWFrOyB9IG91dC5wdXNoKHBhdGhbal0pOyBpPWo7IH0gcmV0dXJuIG91dDsgfSxcbiAgICBmaW5kUGF0aDoobWVzaCxzdGFydCxlbmQpPT57IGNvbnN0IHA9cGF0aGZpbmRpbmcuYVN0YXIobWVzaC5ncmlkLHN0YXJ0LGVuZCk7IHJldHVybiBuYXZtZXNoLnNtb290aChwLG1lc2gpOyB9XG4gIH07XG4gIGNvbnN0IGxldmVsR3JhbW1hciA9IHtcbiAgICBleHBhbmQ6KHJ1bGVzLGF4aW9tLGRlcHRoPTMpPT57IGxldCBzdHI9YXhpb207IGZvcihsZXQgaT0wO2k8ZGVwdGg7aSsrKXsgbGV0IG91dD1cIlwiOyBmb3IoY29uc3QgY2ggb2Ygc3RyKXsgY29uc3QgcnVsZT1ydWxlc1tjaF07IGlmKCFydWxlKXsgb3V0Kz1jaDsgY29udGludWU7IH0gaWYoQXJyYXkuaXNBcnJheShydWxlKSl7IGNvbnN0IHBpY2s9cnVsZVtNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkqcnVsZS5sZW5ndGgpXTsgb3V0Kz1waWNrOyB9IGVsc2UgaWYodHlwZW9mIHJ1bGU9PT0nb2JqZWN0Jyl7IGNvbnN0IGVudHJpZXM9T2JqZWN0LmVudHJpZXMocnVsZSk7IGNvbnN0IHRvdGFsPWVudHJpZXMucmVkdWNlKChzLFssd10pPT5zK051bWJlcih3fHwwKSwwKTsgbGV0IHI9TWF0aC5yYW5kb20oKSp0b3RhbDsgZm9yKGNvbnN0IFtzeW0sd10gb2YgZW50cmllcyl7IHItPU51bWJlcih3fHwwKTsgaWYocjw9MCl7IG91dCs9c3ltOyBicmVhazsgfSB9IH0gZWxzZSB7IG91dCs9U3RyaW5nKHJ1bGUpOyB9IH0gc3RyPW91dDsgfSByZXR1cm4gc3RyOyB9LFxuICAgIHRvR3JpZDooc3RyLHcsd2FsbD0nIycpPT57IGNvbnN0IHJvd3M9W107IGZvcihsZXQgaT0wO2k8c3RyLmxlbmd0aDtpKz13KXsgcm93cy5wdXNoKHN0ci5zbGljZShpLGkrdykuc3BsaXQoXCJcIikubWFwKGM9PmM9PT13YWxsPzE6MCkpOyB9IHJldHVybiByb3dzOyB9LFxuICAgIGludGVycHJldDooc3RyLGhhbmRsZXJzKT0+eyBjb25zdCBzdGF0ZT17IHg6MCx5OjAsZGlyOjAsc3RhY2s6W10gfTsgZm9yKGNvbnN0IGNoIG9mIHN0cil7IGlmKGhhbmRsZXJzW2NoXSkgaGFuZGxlcnNbY2hdKHN0YXRlKTsgfSByZXR1cm4gc3RhdGU7IH1cbiAgfTtcbiAgY29uc3QgYXVkaW9TZXEgPSAoZnVuY3Rpb24oKXtcbiAgICBsZXQgY3R4O1xuICAgIGNvbnN0IGVuc3VyZT0oKT0+Y3R4fHwoY3R4PW5ldyAod2luZG93LkF1ZGlvQ29udGV4dHx8d2luZG93LndlYmtpdEF1ZGlvQ29udGV4dCkoKSk7XG4gICAgY29uc3Qgbm90ZVRvRnJlcT0obik9PnsgY29uc3QgQTQ9NDQwOyBjb25zdCBtYXA9eydDJzotOSwnQyMnOi04LCdEJzotNywnRCMnOi02LCdFJzotNSwnRic6LTQsJ0YjJzotMywnRyc6LTIsJ0cjJzotMSwnQSc6MCwnQSMnOjEsJ0InOjJ9OyBjb25zdCBtPW4ubWF0Y2goLyhbQS1HXSM/KShcXGQpLyk7IGlmKCFtKSByZXR1cm4gNDQwOyBjb25zdCBzZW09bWFwW21bMV1dKyhOdW1iZXIobVsyXSktNCkqMTI7IHJldHVybiBBNCpNYXRoLnBvdygyLHNlbS8xMik7IH07XG4gICAgY29uc3QgcGxheT0ocGF0dGVybixicG09MTIwKT0+eyBjb25zdCBjPWVuc3VyZSgpOyBjb25zdCBiZWF0PTYwL2JwbTsgbGV0IHQ9Yy5jdXJyZW50VGltZTsgZm9yKGNvbnN0IG5vdGUgb2YgcGF0dGVybil7IGNvbnN0IG89Yy5jcmVhdGVPc2NpbGxhdG9yKCk7IGNvbnN0IGc9Yy5jcmVhdGVHYWluKCk7IG8udHlwZT1ub3RlLnR5cGV8fCdzaW5lJzsgby5mcmVxdWVuY3kudmFsdWU9bm90ZS5mcmVxfHwgKG5vdGUubm90ZT9ub3RlVG9GcmVxKG5vdGUubm90ZSk6NDQwKTsgZy5nYWluLnZhbHVlPW5vdGUudm9sfHwwLjE1OyBvLmNvbm5lY3QoZyk7IGcuY29ubmVjdChjLmRlc3RpbmF0aW9uKTsgby5zdGFydCh0KTsgby5zdG9wKHQrKG5vdGUuZHVyfHwwLjIpKTsgdCs9YmVhdCoobm90ZS5iZWF0c3x8MSk7IH0gfTtcbiAgICBjb25zdCB0cmFjaz0oc3RlcHMsYnBtPTEyMCk9PnsgY29uc3QgYz1lbnN1cmUoKTsgY29uc3QgYmVhdD02MC9icG07IGNvbnN0IHN0YXJ0PWMuY3VycmVudFRpbWU7IHN0ZXBzLmZvckVhY2goKHMsaSk9PnsgaWYoIXMpIHJldHVybjsgY29uc3Qgbz1jLmNyZWF0ZU9zY2lsbGF0b3IoKTsgY29uc3QgZz1jLmNyZWF0ZUdhaW4oKTsgby50eXBlPXMudHlwZXx8J3NxdWFyZSc7IG8uZnJlcXVlbmN5LnZhbHVlPXMuZnJlcXx8IChzLm5vdGU/bm90ZVRvRnJlcShzLm5vdGUpOjQ0MCk7IGcuZ2Fpbi52YWx1ZT1zLnZvbHx8MC4xOyBvLmNvbm5lY3QoZyk7IGcuY29ubmVjdChjLmRlc3RpbmF0aW9uKTsgby5zdGFydChzdGFydCtpKmJlYXQpOyBvLnN0b3Aoc3RhcnQraSpiZWF0KyhzLmR1cnx8MC4yKSk7IH0pOyB9O1xuICAgIHJldHVybiB7IHBsYXksIHRyYWNrLCBub3RlVG9GcmVxIH07XG4gIH0pKCk7XG4gIGNvbnN0IHVpID0ge1xuICAgIGJ1dHRvbjoodGV4dCwgeCwgeSwgdywgaCwgb25DbGljayk9Pih7IHR5cGU6J2J1dHRvbicsIHRleHQsIHgseSx3LGgsb25DbGljayxob3ZlcjpmYWxzZSB9KSxcbiAgICBzbGlkZXI6KGxhYmVsLHgseSx3LG1pbixtYXgsdmFsdWUsb25DaGFuZ2UpPT4oeyB0eXBlOidzbGlkZXInLCBsYWJlbCx4LHksdyxoOjI0LG1pbixtYXgsdmFsdWUsb25DaGFuZ2UgfSksXG4gICAgY2hlY2tib3g6KGxhYmVsLHgseSx2YWx1ZSxvbkNoYW5nZSk9Pih7IHR5cGU6J2NoZWNrYm94JywgbGFiZWwseCx5LHc6MTgsaDoxOCx2YWx1ZSxvbkNoYW5nZSB9KSxcbiAgICBkcmF3OihjdHgsIHdpZGdldHMpPT57IHdpZGdldHMuZm9yRWFjaCh3PT57IGlmKHcudHlwZT09PSdidXR0b24nKXsgY3R4LmZpbGxTdHlsZT13LmhvdmVyPydyZ2JhKDI1NSwyNTUsMjU1LDAuMiknOidyZ2JhKDAsMCwwLDAuNSknOyBjdHguZmlsbFJlY3Qody54LHcueSx3Lncsdy5oKTsgY3R4LmZpbGxTdHlsZT0nI2ZmZic7IGN0eC5maWxsVGV4dCh3LnRleHQsdy54Kzgsdy55K3cuaC8yKzQpOyB9IGlmKHcudHlwZT09PSdzbGlkZXInKXsgY3R4LmZpbGxTdHlsZT0ncmdiYSgwLDAsMCwwLjUpJzsgY3R4LmZpbGxSZWN0KHcueCx3Lnksdy53LHcuaCk7IGNvbnN0IHQ9KHcudmFsdWUtdy5taW4pLyh3Lm1heC13Lm1pbik7IGN0eC5maWxsU3R5bGU9JyM3ZGY5ZmYnOyBjdHguZmlsbFJlY3Qody54LCB3LnksIHcudyp0LCB3LmgpOyBjdHguZmlsbFN0eWxlPScjZmZmJzsgY3R4LmZpbGxUZXh0KHcubGFiZWwrJzogJyt3LnZhbHVlLnRvRml4ZWQoMSksIHcueCs0LCB3LnktNCk7IH0gaWYody50eXBlPT09J2NoZWNrYm94Jyl7IGN0eC5zdHJva2VTdHlsZT0nI2ZmZic7IGN0eC5zdHJva2VSZWN0KHcueCx3Lnksdy53LHcuaCk7IGlmKHcudmFsdWUpeyBjdHguZmlsbFN0eWxlPScjN2RmOWZmJzsgY3R4LmZpbGxSZWN0KHcueCszLHcueSszLHcudy02LHcuaC02KTsgfSBjdHguZmlsbFN0eWxlPScjZmZmJzsgY3R4LmZpbGxUZXh0KHcubGFiZWwsIHcueCt3LncrNiwgdy55K3cuaC0yKTsgfSB9KTsgfSxcbiAgICBoaXQ6KHcsIG14LCBteSk9Pm14Pj13LngmJm14PD13Lngrdy53JiZteT49dy55JiZteTw9dy55K3cuaCxcbiAgICBoYW5kbGVDbGljazood2lkZ2V0cyxteCxteSk9Pnsgd2lkZ2V0cy5mb3JFYWNoKHc9PnsgaWYodWkuaGl0KHcsbXgsbXkpKXsgaWYody50eXBlPT09J2J1dHRvbicgJiYgdy5vbkNsaWNrKSB3Lm9uQ2xpY2soKTsgaWYody50eXBlPT09J2NoZWNrYm94JyAmJiB3Lm9uQ2hhbmdlKXsgdy52YWx1ZT0hdy52YWx1ZTsgdy5vbkNoYW5nZSh3LnZhbHVlKTsgfSB9IH0pOyB9LFxuICAgIGhhbmRsZURyYWc6KHdpZGdldHMsbXgsbXkpPT57IHdpZGdldHMuZm9yRWFjaCh3PT57IGlmKHcudHlwZT09PSdzbGlkZXInICYmIHVpLmhpdCh3LG14LG15KSl7IGNvbnN0IHQ9TWF0aC5tYXgoMCxNYXRoLm1pbigxLChteC13LngpL3cudykpOyB3LnZhbHVlPXcubWluICsgKHcubWF4LXcubWluKSp0OyBpZih3Lm9uQ2hhbmdlKSB3Lm9uQ2hhbmdlKHcudmFsdWUpOyB9IH0pOyB9XG4gIH07XG4gIGNvbnN0IGVjcyA9IChmdW5jdGlvbigpe1xuICAgIGxldCBuZXh0SWQ9MTtcbiAgICBjb25zdCBlbnRpdGllcz1uZXcgU2V0KCk7XG4gICAgY29uc3QgY29tcG9uZW50cz1uZXcgTWFwKCk7XG4gICAgY29uc3Qgc3lzdGVtcz1bXTtcbiAgICBjb25zdCBjcmVhdGU9KCk9PnsgY29uc3QgaWQ9bmV4dElkKys7IGVudGl0aWVzLmFkZChpZCk7IHJldHVybiBpZDsgfTtcbiAgICBjb25zdCBhZGQ9KGlkLG5hbWUsZGF0YSk9PnsgaWYoIWNvbXBvbmVudHMuaGFzKG5hbWUpKSBjb21wb25lbnRzLnNldChuYW1lLG5ldyBNYXAoKSk7IGNvbXBvbmVudHMuZ2V0KG5hbWUpLnNldChpZCxkYXRhKTsgcmV0dXJuIGRhdGE7IH07XG4gICAgY29uc3QgZ2V0PShpZCxuYW1lKT0+Y29tcG9uZW50cy5nZXQobmFtZSk/LmdldChpZCk7XG4gICAgY29uc3QgaGFzPShpZCxuYW1lKT0+Y29tcG9uZW50cy5nZXQobmFtZSk/LmhhcyhpZCk7XG4gICAgY29uc3QgcmVtb3ZlPShpZCk9PnsgZW50aXRpZXMuZGVsZXRlKGlkKTsgZm9yKGNvbnN0IG1hcCBvZiBjb21wb25lbnRzLnZhbHVlcygpKXsgbWFwLmRlbGV0ZShpZCk7fSB9O1xuICAgIGNvbnN0IHF1ZXJ5PShuYW1lcyk9PnsgY29uc3Qgc2V0cz1uYW1lcy5tYXAobj0+Y29tcG9uZW50cy5nZXQobil8fG5ldyBNYXAoKSk7IHJldHVybiBbLi4uZW50aXRpZXNdLmZpbHRlcihpZD0+bmFtZXMuZXZlcnkobj0+c2V0c1tuYW1lcy5pbmRleE9mKG4pXS5oYXMoaWQpKSk7IH07XG4gICAgY29uc3Qgc3lzdGVtPShuYW1lcyxmbik9Pnsgc3lzdGVtcy5wdXNoKHtuYW1lcyxmbn0pOyB9O1xuICAgIGNvbnN0IHVwZGF0ZT0oZHQpPT57IGZvcihjb25zdCBzIG9mIHN5c3RlbXMpeyBjb25zdCBpZHM9cXVlcnkocy5uYW1lcyk7IGZvcihjb25zdCBpZCBvZiBpZHMpeyBjb25zdCBjb21wcz1zLm5hbWVzLm1hcChuPT5nZXQoaWQsbikpOyBzLmZuKGlkLCAuLi5jb21wcywgZHQpOyB9IH0gfTtcbiAgICByZXR1cm4geyBjcmVhdGUsIGFkZCwgZ2V0LCBoYXMsIHJlbW92ZSwgcXVlcnksIHN5c3RlbSwgdXBkYXRlLCBjb21wb25lbnRzLCBlbnRpdGllcyB9O1xuICB9KSgpO1xuICBjb25zdCB0ZXJyYWluID0ge1xuICAgIHBlcmxpbjI6KHgseSk9PnsgY29uc3Qgcz1NYXRoLnNpbih4KjEyLjk4OTgreSo3OC4yMzMpKjQzNzU4LjU0NTM7IHJldHVybiBzLU1hdGguZmxvb3Iocyk7IH0sXG4gICAgaGVpZ2h0TWFwOih3LGgsc2NhbGU9MC4xKT0+eyBjb25zdCBtYXA9W107IGZvcihsZXQgeT0wO3k8aDt5KyspeyBjb25zdCByb3c9W107IGZvcihsZXQgeD0wO3g8dzt4KyspeyByb3cucHVzaCh0ZXJyYWluLnBlcmxpbjIoeCpzY2FsZSx5KnNjYWxlKSk7IH0gbWFwLnB1c2gocm93KTt9IHJldHVybiBtYXA7IH1cbiAgfTtcbiAgY29uc3QgY2FtZXJhID0ge1xuICAgIHNoYWtlOihzdGF0ZSxzdHJlbmd0aD02LGRlY2F5PTAuOSk9Pnsgc3RhdGUuc2hha2U9IHtzdHJlbmd0aCxkZWNheSx4OjAseTowfTsgfSxcbiAgICBhcHBseVNoYWtlOihzdGF0ZSxjdHgpPT57IGlmKCFzdGF0ZS5zaGFrZSkgcmV0dXJuOyBzdGF0ZS5zaGFrZS54ID0gcmFuZCgtc3RhdGUuc2hha2Uuc3RyZW5ndGgsc3RhdGUuc2hha2Uuc3RyZW5ndGgpOyBzdGF0ZS5zaGFrZS55ID0gcmFuZCgtc3RhdGUuc2hha2Uuc3RyZW5ndGgsc3RhdGUuc2hha2Uuc3RyZW5ndGgpOyBjdHgudHJhbnNsYXRlKHN0YXRlLnNoYWtlLngsc3RhdGUuc2hha2UueSk7IHN0YXRlLnNoYWtlLnN0cmVuZ3RoKj1zdGF0ZS5zaGFrZS5kZWNheTsgaWYoc3RhdGUuc2hha2Uuc3RyZW5ndGg8MC4zKSBzdGF0ZS5zaGFrZT1udWxsOyB9XG4gIH07XG4gIGNvbnN0IHdlYmdsID0ge1xuICAgIGNyZWF0ZTooY2FudmFzKT0+Y2FudmFzLmdldENvbnRleHQoJ3dlYmdsJyl8fGNhbnZhcy5nZXRDb250ZXh0KCdleHBlcmltZW50YWwtd2ViZ2wnKVxuICB9O1xuICBjb25zdCBnYW1lcGFkID0gKGZ1bmN0aW9uKCl7XG4gICAgY29uc3Qgc3RhdGU9eyBheGVzOltdLCBidXR0b25zOltdIH07XG4gICAgY29uc3QgcG9sbD0oKT0+eyBjb25zdCBncD1uYXZpZ2F0b3IuZ2V0R2FtZXBhZHM/LigpWzBdOyBpZighZ3ApIHJldHVybiBzdGF0ZTsgc3RhdGUuYXhlcz1ncC5heGVzOyBzdGF0ZS5idXR0b25zPWdwLmJ1dHRvbnMubWFwKGI9PmIucHJlc3NlZCk7IHJldHVybiBzdGF0ZTsgfTtcbiAgICByZXR1cm4geyBwb2xsLCBzdGF0ZSB9O1xuICB9KSgpO1xuICBjb25zdCBhc3NldHMgPSB7XG4gICAgaW1hZ2U6KHNyYyk9Pm5ldyBQcm9taXNlKChyZXMscmVqKT0+eyBjb25zdCBpbWc9bmV3IEltYWdlKCk7IGltZy5vbmxvYWQ9KCk9PnJlcyhpbWcpOyBpbWcub25lcnJvcj1yZWo7IGltZy5zcmM9c3JjOyB9KSxcbiAgICBhdWRpbzooc3JjKT0+bmV3IFByb21pc2UoKHJlcyxyZWopPT57IGNvbnN0IGE9bmV3IEF1ZGlvKCk7IGEub25jYW5wbGF5dGhyb3VnaD0oKT0+cmVzKGEpOyBhLm9uZXJyb3I9cmVqOyBhLnNyYz1zcmM7IH0pXG4gIH07XG4gIGNvbnN0IGdyaWQgPSB7XG4gICAgbWFrZToodyxoLGZpbGw9MCk9PkFycmF5LmZyb20oe2xlbmd0aDpofSwoKT0+QXJyYXkuZnJvbSh7bGVuZ3RoOnd9LCgpPT5maWxsKSksXG4gICAgaW5Cb3VuZHM6KGcseCx5KT0+eT49MCYmeTxnLmxlbmd0aCYmeD49MCYmeDxnWzBdLmxlbmd0aFxuICB9O1xuICBjb25zdCBjYW1lcmEyZCA9IHtcbiAgICB3b3JsZFRvU2NyZWVuOihjYW0seCx5KT0+KHsgeDogeC1jYW0ueCwgeTogeS1jYW0ueSB9KSxcbiAgICBzY3JlZW5Ub1dvcmxkOihjYW0seCx5KT0+KHsgeDogeCtjYW0ueCwgeTogeStjYW0ueSB9KVxuICB9O1xuICBjb25zdCBtZXRyaWNzID0gKGZ1bmN0aW9uKCl7XG4gICAgbGV0IGxhc3Q9bm93KCksIGZwcz0wO1xuICAgIGNvbnN0IHRpY2s9KCk9PnsgY29uc3QgdD1ub3coKTsgZnBzPTEwMDAvKHQtbGFzdCk7IGxhc3Q9dDsgcmV0dXJuIGZwczsgfTtcbiAgICByZXR1cm4geyB0aWNrLCBnZXQ6KCk9PmZwcyB9O1xuICB9KSgpO1xuICBjb25zdCBsb2dnZXIgPSAoZnVuY3Rpb24oKXtcbiAgICBjb25zdCBsb2dzPVtdOyBjb25zdCBwdXNoPShtc2cpPT57IGxvZ3MudW5zaGlmdCh7IG1zZywgdDpub3coKSB9KTsgaWYobG9ncy5sZW5ndGg+MjApIGxvZ3MucG9wKCk7IH07XG4gICAgcmV0dXJuIHsgbG9ncywgcHVzaCB9O1xuICB9KSgpO1xuICBjb25zdCBkaWFsb2d1ZSA9IChmdW5jdGlvbigpe1xuICAgIGNvbnN0IGxpbmVzPVtdOyBjb25zdCBzYXk9KHRleHQpPT5saW5lcy5wdXNoKHRleHQpOyBjb25zdCBuZXh0PSgpPT5saW5lcy5zaGlmdCgpO1xuICAgIHJldHVybiB7IHNheSwgbmV4dCwgbGluZXMgfTtcbiAgfSkoKTtcbiAgY29uc3QgdGltZWxpbmUgPSAoZnVuY3Rpb24oKXtcbiAgICBjb25zdCBzdGVwcz1bXTsgY29uc3QgYWRkPShhdCxmbik9PnN0ZXBzLnB1c2goe2F0LGZuLGRvbmU6ZmFsc2V9KTsgY29uc3QgcnVuPSh0KT0+eyBmb3IoY29uc3QgcyBvZiBzdGVwcyl7IGlmKCFzLmRvbmUgJiYgdD49cy5hdCl7IHMuZG9uZT10cnVlOyBzLmZuKCk7IH0gfSB9O1xuICAgIHJldHVybiB7IGFkZCwgcnVuIH07XG4gIH0pKCk7XG4gIHJldHVybiB7IGNsYW1wLCBsZXJwLCBtYXAsIHJhbmQsIGNob2ljZSwgbm93LCBlYXNpbmcsIHR3ZWVuLCBzdG9yYWdlLCBpbnB1dCwgYXVkaW8sIHBoeXNpY3MyZCwgY29vbGRvd24sIHRpbWVycywgcGFydGljbGVzLCBwc2V1ZG8zZCwgY29sb3IsIHRleHQsIHJuZywgZXZlbnRCdXMsIGZzbSwgc3ByaXRlcywgcGF0aGZpbmRpbmcsIG5hdm1lc2gsIGxldmVsR3JhbW1hciwgYXVkaW9TZXEsIHVpLCBlY3MsIHRlcnJhaW4sIGNhbWVyYSwgd2ViZ2wsIGdhbWVwYWQsIGFzc2V0cywgZ3JpZCwgY2FtZXJhMmQsIG1ldHJpY3MsIGxvZ2dlciwgZGlhbG9ndWUsIHRpbWVsaW5lIH07XG59KSgpO1xuLy8gQ29tcGF0aWJpbGl0eSBzaGltcyBmb3IgbW9kZWxzIHRoYXQgZG9uJ3QgbmFtZXNwYWNlIGhlbHBlcnNcbihmdW5jdGlvbigpe1xuICBjb25zdCBLID0gd2luZG93LkdhbWVGYWN0b3J5S2l0O1xuICBpZiAoIUspIHJldHVybjtcbiAgd2luZG93LmNsYW1wID0gd2luZG93LmNsYW1wIHx8IEsuY2xhbXA7XG4gIHdpbmRvdy5sZXJwID0gd2luZG93LmxlcnAgfHwgSy5sZXJwO1xuICB3aW5kb3cubWFwID0gd2luZG93Lm1hcCB8fCBLLm1hcDtcbiAgd2luZG93LnJhbmQgPSB3aW5kb3cucmFuZCB8fCBLLnJhbmQ7XG4gIHdpbmRvdy5ybmcgPSB3aW5kb3cucm5nIHx8IEsucm5nO1xuICB3aW5kb3cuY2hvaWNlID0gd2luZG93LmNob2ljZSB8fCBLLmNob2ljZTtcbiAgd2luZG93Lm5vdyA9IHdpbmRvdy5ub3cgfHwgSy5ub3c7XG4gIHdpbmRvdy5hdWRpbyA9IHdpbmRvdy5hdWRpbyB8fCBLLmF1ZGlvO1xuICB3aW5kb3cuaW5wdXQgPSB3aW5kb3cuaW5wdXQgfHwgSy5pbnB1dDtcbiAgd2luZG93LnN0b3JhZ2UgPSB3aW5kb3cuc3RvcmFnZSB8fCBLLnN0b3JhZ2U7XG4gIHdpbmRvdy50ZXh0ID0gd2luZG93LnRleHQgfHwgSy50ZXh0O1xuICB3aW5kb3cudGltZXJzID0gd2luZG93LnRpbWVycyB8fCBLLnRpbWVycztcbiAgd2luZG93LmNpcmNsZSA9IHdpbmRvdy5jaXJjbGUgfHwgKChhLGIpPT5LLnBoeXNpY3MyZC5jaXJjbGUoYSxiKSk7XG4gIHdpbmRvdy5wc2V1ZG8zZCA9IHdpbmRvdy5wc2V1ZG8zZCB8fCBLLnBzZXVkbzNkO1xuICBjb25zdCBjYW1TdGF0ZSA9IHsgc2hha2U6IG51bGwgfTtcbiAgd2luZG93LmNhbWVyYSA9IHdpbmRvdy5jYW1lcmEgfHwge1xuICAgIHNoYWtlOiAoc3RyZW5ndGg9NiwgZGVjYXk9MC45KSA9PiBLLmNhbWVyYS5zaGFrZShjYW1TdGF0ZSwgc3RyZW5ndGgsIGRlY2F5KSxcbiAgICBhcHBseVNoYWtlOiAoY3R4KSA9PiBLLmNhbWVyYS5hcHBseVNoYWtlKGNhbVN0YXRlLCBjdHgpXG4gIH07XG4gIHdpbmRvdy5wYXJ0aWNsZXMgPSB3aW5kb3cucGFydGljbGVzIHx8IHtcbiAgICBzcGF3bjogKGEsYixjKSA9PiB7XG4gICAgICBpZiAodHlwZW9mIGEgPT09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgY29uc3QgbyA9IGEgfHwge307XG4gICAgICAgIEsucGFydGljbGVzLnNwYXduKG8ueCB8fCAwLCBvLnkgfHwgMCwgby5jb3VudCB8fCAyMCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBLLnBhcnRpY2xlcy5zcGF3bihhIHx8IDAsIGIgfHwgMCwgYyB8fCAyMCk7XG4gICAgICB9XG4gICAgfSxcbiAgICB1cGRhdGU6IChkdCkgPT4ge1xuICAgICAgY29uc3QgdiA9IGR0ID4gMTAgPyBkdCAvIDEwMDAgOiBkdDtcbiAgICAgIEsucGFydGljbGVzLnVwZGF0ZSh2KTtcbiAgICAgIEsucGFydGljbGVzLnBydW5lKCk7XG4gICAgfSxcbiAgICBkcmF3OiAoY3R4KSA9PiBLLnBhcnRpY2xlcy5kcmF3KGN0eCksXG4gICAgcHJ1bmU6ICgpID0+IEsucGFydGljbGVzLnBydW5lKClcbiAgfTtcbiAgd2luZG93Lm9uZXJyb3IgPSBmdW5jdGlvbihtZXNzYWdlLCBzb3VyY2UsIGxpbmVubywgY29sbm8pIHtcbiAgICBwYXJlbnQucG9zdE1lc3NhZ2UoeyB0eXBlOiBcImdhbWVfZXJyb3JcIiwgbWVzc2FnZTogU3RyaW5nKG1lc3NhZ2UpICsgXCIgQCBcIiArIGxpbmVubyArIFwiOlwiICsgY29sbm8gfSwgXCIqXCIpO1xuICB9O1xuICB3aW5kb3cub251bmhhbmRsZWRyZWplY3Rpb24gPSBmdW5jdGlvbihldmVudCkge1xuICAgIHBhcmVudC5wb3N0TWVzc2FnZSh7IHR5cGU6IFwiZ2FtZV9lcnJvclwiLCBtZXNzYWdlOiBTdHJpbmcoZXZlbnQ/LnJlYXNvbiB8fCBcIlVuaGFuZGxlZCByZWplY3Rpb25cIikgfSwgXCIqXCIpO1xuICB9O1xufSkoKTtcbjwvc2NyaXB0PlxuYDtcbiAgICBpZiAoY29kZS5pbmNsdWRlcyhcIndpbmRvdy5HYW1lRmFjdG9yeUtpdFwiKSB8fCBjb2RlLmluY2x1ZGVzKFwiR2FtZUZhY3RvcnlBSSA9IGFzeW5jIGZ1bmN0aW9uXCIpKSByZXR1cm4gY29kZTtcbiAgICBpZiAoY29kZS5pbmNsdWRlcyhcIjwvaGVhZD5cIikpIHJldHVybiBjb2RlLnJlcGxhY2UoXCI8L2hlYWQ+XCIsIGAke2hlbHBlcn08L2hlYWQ+YCk7XG4gICAgcmV0dXJuIGhlbHBlciArIGNvZGU7XG4gIH1cblxuICBhc3luYyBmdW5jdGlvbiBnZW5lcmF0ZUdhbWUoKSB7XG4gICAgc2V0TG9hZGluZyh0cnVlKTtcbiAgICBzZXRTdHJlYW1pbmcodHJ1ZSk7XG4gICAgc2V0RXJyb3IobnVsbCk7XG4gICAgc2V0UHJvZ3Jlc3MoXCJcIik7XG4gICAgc2V0R2VuZXJhdGVkKG51bGwpO1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBjb250cm9sbGVyID0gbmV3IEFib3J0Q29udHJvbGxlcigpO1xuICAgICAgY29uc3QgdGltZW91dCA9IHNldFRpbWVvdXQoKCkgPT4gY29udHJvbGxlci5hYm9ydCgpLCAzMDAwMDApO1xuICAgICAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2goYCR7QVBJfS9nZW5lcmF0ZS9zdHJlYW1gLCB7XG4gICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICAgIGhlYWRlcnM6IHsgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIgfSxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyBwcm9tcHQgfSksXG4gICAgICAgIHNpZ25hbDogY29udHJvbGxlci5zaWduYWxcbiAgICAgIH0pO1xuICAgICAgaWYgKCFyZXMub2sgfHwgIXJlcy5ib2R5KSB7XG4gICAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0KTtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGF3YWl0IHJlcy50ZXh0KCkpO1xuICAgICAgfVxuICAgICAgY29uc3QgcmVhZGVyID0gcmVzLmJvZHkuZ2V0UmVhZGVyKCk7XG4gICAgICBjb25zdCBkZWNvZGVyID0gbmV3IFRleHREZWNvZGVyKCk7XG4gICAgICBsZXQgYnVmZmVyID0gXCJcIjtcbiAgICAgIGxldCBkaWRTZXQgPSBmYWxzZTtcbiAgICAgIGxldCBkb25lU2VlbiA9IGZhbHNlO1xuICAgICAgd2hpbGUgKHRydWUpIHtcbiAgICAgICAgY29uc3QgeyB2YWx1ZSwgZG9uZSB9ID0gYXdhaXQgcmVhZGVyLnJlYWQoKTtcbiAgICAgICAgaWYgKGRvbmUpIGJyZWFrO1xuICAgICAgICBidWZmZXIgKz0gZGVjb2Rlci5kZWNvZGUodmFsdWUsIHsgc3RyZWFtOiB0cnVlIH0pO1xuICAgICAgICBidWZmZXIgPSBidWZmZXIucmVwbGFjZSgvXFxyL2csIFwiXCIpO1xuICAgICAgICBjb25zdCBwYXJ0cyA9IGJ1ZmZlci5zcGxpdChcIlxcblxcblwiKTtcbiAgICAgICAgYnVmZmVyID0gcGFydHMucG9wKCkgfHwgXCJcIjtcbiAgICAgICAgZm9yIChjb25zdCBwYXJ0IG9mIHBhcnRzKSB7XG4gICAgICAgICAgY29uc3QgbGluZXMgPSBwYXJ0LnNwbGl0KFwiXFxuXCIpO1xuICAgICAgICAgIGNvbnN0IGV2ZW50TGluZSA9IGxpbmVzLmZpbmQoKGwpID0+IGwuc3RhcnRzV2l0aChcImV2ZW50OlwiKSk7XG4gICAgICAgICAgY29uc3QgZGF0YUxpbmVzID0gbGluZXMuZmlsdGVyKChsKSA9PiBsLnN0YXJ0c1dpdGgoXCJkYXRhOlwiKSk7XG4gICAgICAgICAgY29uc3QgZXZlbnQgPSBldmVudExpbmUgPyBldmVudExpbmUucmVwbGFjZShcImV2ZW50OlwiLCBcIlwiKS50cmltKCkgOiBcIm1lc3NhZ2VcIjtcbiAgICAgICAgICBjb25zdCBkYXRhUmF3ID0gZGF0YUxpbmVzLm1hcCgobCkgPT4gbC5yZXBsYWNlKFwiZGF0YTpcIiwgXCJcIikudHJpbSgpKS5qb2luKFwiXFxcXG5cIikudHJpbSgpO1xuICAgICAgICAgIGlmICghZGF0YVJhdykgY29udGludWU7XG4gICAgICAgICAgaWYgKGV2ZW50ID09PSBcImRlbHRhXCIpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBKU09OLnBhcnNlKGRhdGFSYXcpO1xuICAgICAgICAgICAgICBzZXRQcm9ncmVzcygocHJldikgPT4gcHJldiArIChkYXRhLmNodW5rIHx8IFwiXCIpKTtcbiAgICAgICAgICAgIH0gY2F0Y2gge31cbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGV2ZW50ID09PSBcImRvbmVcIikge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgY29uc3QgZGF0YSA9IEpTT04ucGFyc2UoZGF0YVJhdyk7XG4gICAgICAgICAgICAgIHNldEdlbmVyYXRlZCh7XG4gICAgICAgICAgICAgICAgdGl0bGU6IGRhdGEudGl0bGUsXG4gICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IGRhdGEuZGVzY3JpcHRpb24sXG4gICAgICAgICAgICAgICAgY29kZTogZGF0YS5jb2RlXG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICBzZXRMYXN0Q29kZShkYXRhLmNvZGUgfHwgXCJcIik7XG4gICAgICAgICAgICAgIGRpZFNldCA9IHRydWU7XG4gICAgICAgICAgICAgIHNldFN0cmVhbWluZyhmYWxzZSk7XG4gICAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0KTtcbiAgICAgICAgICAgICAgY29udHJvbGxlci5hYm9ydCgpO1xuICAgICAgICAgICAgICBkb25lU2VlbiA9IHRydWU7XG4gICAgICAgICAgICAgIHJlYWRlci5jYW5jZWwoKS5jYXRjaCgoKSA9PiB7fSk7XG4gICAgICAgICAgICB9IGNhdGNoIHt9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChkb25lU2VlbikgYnJlYWs7XG4gICAgICB9XG4gICAgICBjbGVhclRpbWVvdXQodGltZW91dCk7XG4gICAgICBpZiAoIWRpZFNldCkge1xuICAgICAgICBjb25zdCByZXNGYWxsYmFjayA9IGF3YWl0IGZldGNoKGAke0FQSX0vZ2VuZXJhdGVgLCB7XG4gICAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgICAgICBoZWFkZXJzOiB7IFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiIH0sXG4gICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyBwcm9tcHQgfSlcbiAgICAgICAgfSk7XG4gICAgICAgIGlmIChyZXNGYWxsYmFjay5vaykge1xuICAgICAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNGYWxsYmFjay5qc29uKCk7XG4gICAgICAgICAgc2V0R2VuZXJhdGVkKGRhdGEpO1xuICAgICAgICAgIHNldExhc3RDb2RlKGRhdGEuY29kZSB8fCBcIlwiKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycjogYW55KSB7XG4gICAgICBzZXRFcnJvcihlcnIubWVzc2FnZSB8fCBcIkZhaWxlZCB0byBnZW5lcmF0ZSBnYW1lXCIpO1xuICAgIH0gZmluYWxseSB7XG4gICAgICBzZXRMb2FkaW5nKGZhbHNlKTtcbiAgICAgIHNldFN0cmVhbWluZyhmYWxzZSk7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgZnVuY3Rpb24gc2F2ZUdhbWUoKSB7XG4gICAgaWYgKCFnZW5lcmF0ZWQpIHJldHVybjtcbiAgICBzZXRTYXZpbmcodHJ1ZSk7XG4gICAgc2V0RXJyb3IobnVsbCk7XG4gICAgdHJ5IHtcbiAgICAgIGlmICghbWUpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiUGxlYXNlIGxvZyBpbiB0byBzYXZlIGdhbWVzLlwiKTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKGAke0FQSX0vZ2FtZXNgLCB7XG4gICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICAgIGhlYWRlcnM6IHsgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIgfSxcbiAgICAgICAgY3JlZGVudGlhbHM6IFwiaW5jbHVkZVwiLFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgdGl0bGU6IGdlbmVyYXRlZC50aXRsZSxcbiAgICAgICAgICBkZXNjcmlwdGlvbjogZ2VuZXJhdGVkLmRlc2NyaXB0aW9uLFxuICAgICAgICAgIHByb21wdCxcbiAgICAgICAgICBjb2RlOiBnZW5lcmF0ZWQuY29kZVxuICAgICAgICB9KVxuICAgICAgfSk7XG4gICAgICBpZiAoIXJlcy5vaykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYXdhaXQgcmVzLnRleHQoKSk7XG4gICAgICB9XG4gICAgICBhd2FpdCByZWZyZXNoR2FtZXMoKTtcbiAgICAgIGF3YWl0IHJlZnJlc2hNeUdhbWVzKCk7XG4gICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShkcmFmdEtleSk7XG4gICAgfSBjYXRjaCAoZXJyOiBhbnkpIHtcbiAgICAgIHNldEVycm9yKGVyci5tZXNzYWdlIHx8IFwiRmFpbGVkIHRvIHNhdmUgZ2FtZVwiKTtcbiAgICB9IGZpbmFsbHkge1xuICAgICAgc2V0U2F2aW5nKGZhbHNlKTtcbiAgICB9XG4gIH1cblxuICBhc3luYyBmdW5jdGlvbiBlZGl0UHJldmlldygpIHtcbiAgICBpZiAoIWdlbmVyYXRlZCB8fCAhZWRpdEluc3RydWN0aW9uLnRyaW0oKSkgcmV0dXJuO1xuICAgIHNldEVkaXRpbmdQcmV2aWV3KHRydWUpO1xuICAgIHNldEVycm9yKG51bGwpO1xuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaChgJHtBUEl9L2VkaXQtcHJldmlld2AsIHtcbiAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgICAgaGVhZGVyczogeyBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIiB9LFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgaW5zdHJ1Y3Rpb246IGVkaXRJbnN0cnVjdGlvbixcbiAgICAgICAgICBjb2RlOiBnZW5lcmF0ZWQuY29kZVxuICAgICAgICB9KVxuICAgICAgfSk7XG4gICAgICBpZiAoIXJlcy5vaykgdGhyb3cgbmV3IEVycm9yKGF3YWl0IHJlcy50ZXh0KCkpO1xuICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlcy5qc29uKCk7XG4gICAgICBzZXRHZW5lcmF0ZWQoZGF0YSk7XG4gICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShkcmFmdEtleSwgSlNPTi5zdHJpbmdpZnkoeyAuLi5kYXRhLCBwcm9tcHQgfSkpO1xuICAgICAgc2V0TGFzdENvZGUoZGF0YS5jb2RlIHx8IFwiXCIpO1xuICAgICAgc2V0RWRpdEluc3RydWN0aW9uKFwiXCIpO1xuICAgIH0gY2F0Y2ggKGVycjogYW55KSB7XG4gICAgICBzZXRFcnJvcihlcnIubWVzc2FnZSB8fCBcIkVkaXQgZmFpbGVkXCIpO1xuICAgIH0gZmluYWxseSB7XG4gICAgICBzZXRFZGl0aW5nUHJldmlldyhmYWxzZSk7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgZnVuY3Rpb24gb3BlbkZ1bGxzY3JlZW4oKSB7XG4gICAgaWYgKCFwcmV2aWV3UmVmLmN1cnJlbnQpIHJldHVybjtcbiAgICBpZiAoZG9jdW1lbnQuZnVsbHNjcmVlbkVsZW1lbnQpIHtcbiAgICAgIGF3YWl0IGRvY3VtZW50LmV4aXRGdWxsc2NyZWVuKCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGF3YWl0IHByZXZpZXdSZWYuY3VycmVudC5yZXF1ZXN0RnVsbHNjcmVlbigpO1xuICB9XG5cbiAgZnVuY3Rpb24gZm9jdXNQcmV2aWV3KCkge1xuICAgIGlmcmFtZVJlZi5jdXJyZW50Py5jb250ZW50V2luZG93Py5mb2N1cygpO1xuICB9XG5cbiAgcmV0dXJuIChcbiAgICA8bWFpbj5cbiAgICAgIDxzZWN0aW9uIGNsYXNzTmFtZT1cImhlcm9cIj5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJoZXJvLWNhcmRcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImJhZGdlXCI+QUkgR2FtZSBGb3JnZTwvZGl2PlxuICAgICAgICAgIDxoMT5EZXNjcmliZSBhIGdhbWUuIEdldCBzb21ldGhpbmcgeW91IGNhbiBhY3R1YWxseSBwbGF5LjwvaDE+XG4gICAgICAgICAgPHA+XG4gICAgICAgICAgICBXcml0ZSB5b3VyIGlkZWEsIGdlbmVyYXRlIGEgZnVsbCBIVE1MIGdhbWUsIHRoZW4gc2F2ZSBpdCB0byB5b3VyIGxvY2FsIGFyY2FkZS4gTm8gRG9ja2VyLCBubyBkcmFtYS5cbiAgICAgICAgICA8L3A+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJwcm9tcHQtYXJlYVwiPlxuICAgICAgICAgICAgPHRleHRhcmVhIHZhbHVlPXtwcm9tcHR9IG9uQ2hhbmdlPXsoZSkgPT4gc2V0UHJvbXB0KGUudGFyZ2V0LnZhbHVlKX0gLz5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYnV0dG9uLXJvd1wiPlxuICAgICAgICAgICAgICA8YnV0dG9uIG9uQ2xpY2s9e2dlbmVyYXRlR2FtZX0gZGlzYWJsZWQ9e2xvYWRpbmd9PlxuICAgICAgICAgICAgICAgIHtsb2FkaW5nID8gXCJHZW5lcmF0aW5nLi4uXCIgOiBcIkdlbmVyYXRlIEdhbWVcIn1cbiAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgIDxidXR0b24gY2xhc3NOYW1lPVwic2Vjb25kYXJ5XCIgb25DbGljaz17c2F2ZUdhbWV9IGRpc2FibGVkPXshZ2VuZXJhdGVkIHx8IHNhdmluZ30+XG4gICAgICAgICAgICAgICAge3NhdmluZyA/IFwiU2F2aW5nLi4uXCIgOiBcIlNhdmUgR2FtZVwifVxuICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAge2Vycm9yICYmIDxwIHN0eWxlPXt7IGNvbG9yOiBcIiNmZjliOWJcIiB9fT57ZXJyb3J9PC9wPn1cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaGVyby1jYXJkXCI+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJwcmV2aWV3LWhlYWRlclwiPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjYXJkLXRpdGxlXCI+TGl2ZSBQcmV2aWV3PC9kaXY+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImJ1dHRvbi1yb3dcIj5cbiAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzc05hbWU9XCJzZWNvbmRhcnlcIiBvbkNsaWNrPXsoKSA9PiBzZXRQZXJmTW9kZSgodikgPT4gIXYpfT5cbiAgICAgICAgICAgICAgICB7cGVyZk1vZGUgPyBcIlBlcmYgTW9kZTogT25cIiA6IFwiUGVyZiBNb2RlOiBPZmZcIn1cbiAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgIDxidXR0b24gY2xhc3NOYW1lPVwic2Vjb25kYXJ5XCIgb25DbGljaz17b3BlbkZ1bGxzY3JlZW59PkZ1bGxzY3JlZW48L2J1dHRvbj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicHJldmlld1wiIHJlZj17cHJldmlld1JlZn0gb25DbGljaz17Zm9jdXNQcmV2aWV3fT5cbiAgICAgICAgICAgIHtnZW5lcmF0ZWQgPyAoXG4gICAgICAgICAgICAgIDxpZnJhbWVcbiAgICAgICAgICAgICAgICBrZXk9e3ByZXZpZXdLZXl9XG4gICAgICAgICAgICAgICAgcmVmPXtpZnJhbWVSZWZ9XG4gICAgICAgICAgICAgICAgc3JjRG9jPXt3aXRoQUlIZWxwZXIoZ2VuZXJhdGVkLmNvZGUpfVxuICAgICAgICAgICAgICAgIHNhbmRib3g9XCJhbGxvdy1zY3JpcHRzXCJcbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgIDxkaXYgc3R5bGU9e3sgcGFkZGluZzogMjQsIGNvbG9yOiBcIiM5OGEwYjVcIiB9fT5cbiAgICAgICAgICAgICAgICBHZW5lcmF0ZSBhIGdhbWUgdG8gc2VlIGl0IGhlcmUuXG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgKX1cbiAgICAgICAgICAgIHtzdHJlYW1pbmcgJiYgKFxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInByZXZpZXctbG9nXCI+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjYXJkLXRpdGxlXCI+TGl2ZSBCdWlsZCBMb2c8L2Rpdj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNhcmQtbWV0YVwiIHN0eWxlPXt7IHdoaXRlU3BhY2U6IFwicHJlLXdyYXBcIiB9fT5cbiAgICAgICAgICAgICAgICAgIHtwcm9ncmVzcy5zbGljZSgtMjAwMCkgfHwgXCJCdWlsZGluZy4uLlwifVxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICl9XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjYXJkXCIgc3R5bGU9e3sgbWFyZ2luVG9wOiAxMiB9fT5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY2FyZC10aXRsZVwiPkVkaXQgUHJldmlldzwvZGl2PlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjYXJkLW1ldGFcIj5EZXNjcmliZSBhIGNoYW5nZSBhbmQgYXBwbHkgaXQgdG8gdGhlIGN1cnJlbnQgcHJldmlldy48L2Rpdj5cbiAgICAgICAgICAgIDx0ZXh0YXJlYVxuICAgICAgICAgICAgICB2YWx1ZT17ZWRpdEluc3RydWN0aW9ufVxuICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHNldEVkaXRJbnN0cnVjdGlvbihlLnRhcmdldC52YWx1ZSl9XG4gICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiTWFrZSB0aGUgcGxheWVyIGZhc3RlciwgYWRkIGEgdGltZXIsIGNoYW5nZSB2aXN1YWxzLi4uXCJcbiAgICAgICAgICAgICAgc3R5bGU9e3sgbWluSGVpZ2h0OiAxMDAgfX1cbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImJ1dHRvbi1yb3dcIj5cbiAgICAgICAgICAgICAgPGJ1dHRvbiBvbkNsaWNrPXtlZGl0UHJldmlld30gZGlzYWJsZWQ9eyFnZW5lcmF0ZWQgfHwgZWRpdGluZ1ByZXZpZXd9PlxuICAgICAgICAgICAgICAgIHtlZGl0aW5nUHJldmlldyA/IFwiRWRpdGluZy4uLlwiIDogXCJBcHBseSBFZGl0XCJ9XG4gICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgXG4gICAgICAgICAgeyhwcmV2aWV3RXJyb3JzLmxlbmd0aCA+IDAgfHwgcHJldmlld1dhcm5pbmdzLmxlbmd0aCA+IDApICYmIChcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY2FyZFwiIHN0eWxlPXt7IG1hcmdpblRvcDogMTIgfX0+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY2FyZC10aXRsZVwiPlByZXZpZXcgRGlhZ25vc3RpY3M8L2Rpdj5cbiAgICAgICAgICAgICAge3ByZXZpZXdXYXJuaW5ncy5tYXAoKHcsIGkpID0+IChcbiAgICAgICAgICAgICAgICA8ZGl2IGtleT17YHctJHtpfWB9IGNsYXNzTmFtZT1cImNhcmQtbWV0YVwiIHN0eWxlPXt7IGNvbG9yOiBcIiNmZmQxNjZcIiB9fT57d308L2Rpdj5cbiAgICAgICAgICAgICAgKSl9XG4gICAgICAgICAgICAgIHtwcmV2aWV3RXJyb3JzLm1hcCgoZSwgaSkgPT4gKFxuICAgICAgICAgICAgICAgIDxkaXYga2V5PXtgZS0ke2l9YH0gY2xhc3NOYW1lPVwiY2FyZC1tZXRhXCIgc3R5bGU9e3sgY29sb3I6IFwiI2ZmOWI5YlwiIH19PntlfTwvZGl2PlxuICAgICAgICAgICAgICApKX1cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICl9XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9zZWN0aW9uPlxuXG4gICAgICA8c2VjdGlvbiBjbGFzc05hbWU9XCJzZWN0aW9uXCI+XG4gICAgICAgIDxoMj5Mb2NhbCBBcmNhZGU8L2gyPlxuICAgICAgICA8cCBzdHlsZT17eyBjb2xvcjogXCIjOThhMGI1XCIgfX0+XG4gICAgICAgICAgVGhlc2UgZ2FtZXMgYXJlIHN0b3JlZCBpbiB5b3VyIGxvY2FsIFNRTGl0ZSBkYXRhYmFzZSBhbmQgcmVhZHkgdG8gcGxheS5cbiAgICAgICAgPC9wPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRhYi1yb3dcIj5cbiAgICAgICAgICA8YnV0dG9uIGNsYXNzTmFtZT17YXJjYWRlVGFiID09PSBcImNvbW11bml0eVwiID8gXCJ0YWIgYWN0aXZlXCIgOiBcInRhYlwifSBvbkNsaWNrPXsoKSA9PiBzZXRBcmNhZGVUYWIoXCJjb21tdW5pdHlcIil9PkNvbW11bml0eTwvYnV0dG9uPlxuICAgICAgICAgIDxidXR0b24gY2xhc3NOYW1lPXthcmNhZGVUYWIgPT09IFwibWluZVwiID8gXCJ0YWIgYWN0aXZlXCIgOiBcInRhYlwifSBvbkNsaWNrPXsoKSA9PiBzZXRBcmNhZGVUYWIoXCJtaW5lXCIpfT5NeSBHYW1lczwvYnV0dG9uPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAge2FyY2FkZVRhYiA9PT0gXCJjb21tdW5pdHlcIiAmJiAoXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjYXJkXCIgc3R5bGU9e3sgbWFyZ2luQm90dG9tOiAxMiB9fT5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY2FyZC10aXRsZVwiPlNlYXJjaCAmIFNvcnQ8L2Rpdj5cbiAgICAgICAgICAgIDxpbnB1dFxuICAgICAgICAgICAgICB2YWx1ZT17c2VhcmNofVxuICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHNldFNlYXJjaChlLnRhcmdldC52YWx1ZSl9XG4gICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiU2VhcmNoIGdhbWVzLi4uXCJcbiAgICAgICAgICAgICAgc3R5bGU9e3sgcGFkZGluZzogMTAsIGJvcmRlclJhZGl1czogMTAsIGJvcmRlcjogXCIxcHggc29saWQgcmdiYSgyNTUsMjU1LDI1NSwwLjEpXCIsIGJhY2tncm91bmQ6IFwiIzBlMTMyMlwiLCBjb2xvcjogXCIjZThlZWZjXCIgfX1cbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImJ1dHRvbi1yb3dcIj5cbiAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzc05hbWU9e3NvcnQgPT09IFwicmVjZW50XCIgPyBcInRhYiBhY3RpdmVcIiA6IFwidGFiXCJ9IG9uQ2xpY2s9eygpID0+IHNldFNvcnQoXCJyZWNlbnRcIil9PlJlY2VudDwvYnV0dG9uPlxuICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzTmFtZT17c29ydCA9PT0gXCJ0b3BcIiA/IFwidGFiIGFjdGl2ZVwiIDogXCJ0YWJcIn0gb25DbGljaz17KCkgPT4gc2V0U29ydChcInRvcFwiKX0+VG9wPC9idXR0b24+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKX1cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjYXJkc1wiPlxuICAgICAgICAgIHthcmNhZGVUYWIgPT09IFwiY29tbXVuaXR5XCIgJiYgZ2FtZXMubGVuZ3RoID09PSAwICYmIDxkaXYgY2xhc3NOYW1lPVwiY2FyZFwiPk5vIHB1YmxpYyBnYW1lcyB5ZXQuPC9kaXY+fVxuICAgICAgICAgIHthcmNhZGVUYWIgPT09IFwibWluZVwiICYmIG15R2FtZXMubGVuZ3RoID09PSAwICYmIDxkaXYgY2xhc3NOYW1lPVwiY2FyZFwiPk5vIHNhdmVkIGdhbWVzIHlldC48L2Rpdj59XG4gICAgICAgICAgeyhhcmNhZGVUYWIgPT09IFwiY29tbXVuaXR5XCIgPyBnYW1lcyA6IG15R2FtZXMpLm1hcCgoZ2FtZSkgPT4gKFxuICAgICAgICAgICAgPExpbmsgaHJlZj17YC9nYW1lcy8ke2dhbWUuaWR9YH0ga2V5PXtnYW1lLmlkfSBjbGFzc05hbWU9XCJjYXJkXCI+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY2FyZC1wcmV2aWV3XCI+XG4gICAgICAgICAgICAgICAgPGlmcmFtZSBzcmNEb2M9e3dpdGhBSUhlbHBlcihnYW1lLmNvZGUpfSBzYW5kYm94PVwiYWxsb3ctc2NyaXB0c1wiIC8+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNhcmQtdGl0bGVcIj57Z2FtZS50aXRsZX08L2Rpdj5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjYXJkLW1ldGFcIj57Z2FtZS5kZXNjcmlwdGlvbn08L2Rpdj5cbiAgICAgICAgICAgIDwvTGluaz5cbiAgICAgICAgICApKX1cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L3NlY3Rpb24+XG5cbiAgICAgIDxzZWN0aW9uIGNsYXNzTmFtZT1cInNlY3Rpb25cIj5cbiAgICAgICAgPGgyPkxhc3QgR2VuZXJhdGVkIENvZGU8L2gyPlxuICAgICAgICA8cCBzdHlsZT17eyBjb2xvcjogXCIjOThhMGI1XCIgfX0+XG4gICAgICAgICAgVGhpcyBpcyB0aGUgcmF3IEhUTUwvSlMgdGhlIG1vZGVsIHByb2R1Y2VkLiBVc2VmdWwgZm9yIGRlYnVnZ2luZyB3aGV0aGVyIGl0IHVzZWQgR2FtZUZhY3RvcnlLaXQuXG4gICAgICAgIDwvcD5cbiAgICAgICAgPGJ1dHRvbiBjbGFzc05hbWU9XCJzZWNvbmRhcnlcIiBvbkNsaWNrPXsoKSA9PiBzZXRTaG93Q29kZSgocykgPT4gIXMpfT5cbiAgICAgICAgICB7c2hvd0NvZGUgPyBcIkhpZGUgQ29kZVwiIDogXCJTaG93IENvZGVcIn1cbiAgICAgICAgPC9idXR0b24+XG4gICAgICAgIHtzaG93Q29kZSAmJiAoXG4gICAgICAgICAgPHRleHRhcmVhXG4gICAgICAgICAgICB2YWx1ZT17bGFzdENvZGV9XG4gICAgICAgICAgICByZWFkT25seVxuICAgICAgICAgICAgc3R5bGU9e3sgbWluSGVpZ2h0OiAyNDAsIG1hcmdpblRvcDogMTIgfX1cbiAgICAgICAgICAvPlxuICAgICAgICApfVxuICAgICAgICB7bGFzdENvZGUubGVuZ3RoID4gODAwMDAwICYmIChcbiAgICAgICAgICA8cCBzdHlsZT17eyBjb2xvcjogXCIjZmZkMTY2XCIgfX0+V2FybmluZzogdmVyeSBsYXJnZSBjb2RlIG91dHB1dC4gUHJldmlldyBwZXJmb3JtYW5jZSBtYXkgZGVncmFkZS48L3A+XG4gICAgICAgICl9XG4gICAgICA8L3NlY3Rpb24+XG5cbiAgICAgIFxuICAgIDwvbWFpbj5cbiAgKTtcbn1cbiJdLCJuYW1lcyI6WyJ1c2VFZmZlY3QiLCJ1c2VNZW1vIiwidXNlUmVmIiwidXNlU3RhdGUiLCJMaW5rIiwicHJvY2VzcyIsIkFQSSIsImVudiIsIk5FWFRfUFVCTElDX0FQSV9VUkwiLCJIb21lIiwicHJvbXB0Iiwic2V0UHJvbXB0IiwibG9hZGluZyIsInNldExvYWRpbmciLCJlcnJvciIsInNldEVycm9yIiwiZ2VuZXJhdGVkIiwic2V0R2VuZXJhdGVkIiwicHJvZ3Jlc3MiLCJzZXRQcm9ncmVzcyIsInN0cmVhbWluZyIsInNldFN0cmVhbWluZyIsImxhc3RDb2RlIiwic2V0TGFzdENvZGUiLCJlZGl0SW5zdHJ1Y3Rpb24iLCJzZXRFZGl0SW5zdHJ1Y3Rpb24iLCJlZGl0aW5nUHJldmlldyIsInNldEVkaXRpbmdQcmV2aWV3IiwiZHJhZnRLZXkiLCJwcmV2aWV3RXJyb3JzIiwic2V0UHJldmlld0Vycm9ycyIsInByZXZpZXdXYXJuaW5ncyIsInNldFByZXZpZXdXYXJuaW5ncyIsInNob3dDb2RlIiwic2V0U2hvd0NvZGUiLCJwZXJmTW9kZSIsInNldFBlcmZNb2RlIiwiZ2FtZXMiLCJzZXRHYW1lcyIsIm15R2FtZXMiLCJzZXRNeUdhbWVzIiwibWUiLCJzZXRNZSIsImFyY2FkZVRhYiIsInNldEFyY2FkZVRhYiIsInNlYXJjaCIsInNldFNlYXJjaCIsInNvcnQiLCJzZXRTb3J0Iiwic2F2aW5nIiwic2V0U2F2aW5nIiwiaWZyYW1lUmVmIiwicHJldmlld1JlZiIsInByZXZpZXdLZXkiLCJ0aXRsZSIsImNvZGUiLCJsZW5ndGgiLCJTdHJpbmciLCJyZWZyZXNoR2FtZXMiLCJwYXJhbXMiLCJVUkxTZWFyY2hQYXJhbXMiLCJzZXQiLCJyZXMiLCJmZXRjaCIsInRvU3RyaW5nIiwiZGF0YSIsImpzb24iLCJyZWZyZXNoTWUiLCJjcmVkZW50aWFscyIsIm9rIiwicmVmcmVzaE15R2FtZXMiLCJjYXRjaCIsInJhdyIsImxvY2FsU3RvcmFnZSIsImdldEl0ZW0iLCJkcmFmdCIsIkpTT04iLCJwYXJzZSIsImRlc2NyaXB0aW9uIiwicGF5bG9hZCIsInNldEl0ZW0iLCJzdHJpbmdpZnkiLCJvbk1lc3NhZ2UiLCJldmVudCIsInR5cGUiLCJwcmV2IiwibWVzc2FnZSIsInNsaWNlIiwid2luZG93IiwiYWRkRXZlbnRMaXN0ZW5lciIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJ3YXJuaW5ncyIsInB1c2giLCJ0ZXN0IiwiUmVnRXhwIiwid2l0aEFJSGVscGVyIiwid3NVcmwiLCJyZXBsYWNlIiwiaGVscGVyIiwiaW5jbHVkZXMiLCJnZW5lcmF0ZUdhbWUiLCJjb250cm9sbGVyIiwiQWJvcnRDb250cm9sbGVyIiwidGltZW91dCIsInNldFRpbWVvdXQiLCJhYm9ydCIsIm1ldGhvZCIsImhlYWRlcnMiLCJib2R5Iiwic2lnbmFsIiwiY2xlYXJUaW1lb3V0IiwiRXJyb3IiLCJ0ZXh0IiwicmVhZGVyIiwiZ2V0UmVhZGVyIiwiZGVjb2RlciIsIlRleHREZWNvZGVyIiwiYnVmZmVyIiwiZGlkU2V0IiwiZG9uZVNlZW4iLCJ2YWx1ZSIsImRvbmUiLCJyZWFkIiwiZGVjb2RlIiwic3RyZWFtIiwicGFydHMiLCJzcGxpdCIsInBvcCIsInBhcnQiLCJsaW5lcyIsImV2ZW50TGluZSIsImZpbmQiLCJsIiwic3RhcnRzV2l0aCIsImRhdGFMaW5lcyIsImZpbHRlciIsInRyaW0iLCJkYXRhUmF3IiwibWFwIiwiam9pbiIsImNodW5rIiwiY2FuY2VsIiwicmVzRmFsbGJhY2siLCJlcnIiLCJzYXZlR2FtZSIsInJlbW92ZUl0ZW0iLCJlZGl0UHJldmlldyIsImluc3RydWN0aW9uIiwib3BlbkZ1bGxzY3JlZW4iLCJjdXJyZW50IiwiZG9jdW1lbnQiLCJmdWxsc2NyZWVuRWxlbWVudCIsImV4aXRGdWxsc2NyZWVuIiwicmVxdWVzdEZ1bGxzY3JlZW4iLCJmb2N1c1ByZXZpZXciLCJjb250ZW50V2luZG93IiwiZm9jdXMiLCJtYWluIiwic2VjdGlvbiIsImNsYXNzTmFtZSIsImRpdiIsImgxIiwicCIsInRleHRhcmVhIiwib25DaGFuZ2UiLCJlIiwidGFyZ2V0IiwiYnV0dG9uIiwib25DbGljayIsImRpc2FibGVkIiwic3R5bGUiLCJjb2xvciIsInYiLCJyZWYiLCJpZnJhbWUiLCJzcmNEb2MiLCJzYW5kYm94IiwicGFkZGluZyIsIndoaXRlU3BhY2UiLCJtYXJnaW5Ub3AiLCJwbGFjZWhvbGRlciIsIm1pbkhlaWdodCIsInciLCJpIiwiaDIiLCJtYXJnaW5Cb3R0b20iLCJpbnB1dCIsImJvcmRlclJhZGl1cyIsImJvcmRlciIsImJhY2tncm91bmQiLCJnYW1lIiwiaHJlZiIsImlkIiwicyIsInJlYWRPbmx5Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./app/page.tsx\n"));

/***/ })

});