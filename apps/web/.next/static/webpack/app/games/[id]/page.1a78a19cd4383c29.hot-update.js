"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/games/[id]/page",{

/***/ "(app-pages-browser)/./app/games/[id]/page.tsx":
/*!*********************************!*\
  !*** ./app/games/[id]/page.tsx ***!
  \*********************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": function() { return /* binding */ GamePage; }\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/jsx-dev-runtime.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var next_link__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/link */ \"(app-pages-browser)/./node_modules/next/dist/api/link.js\");\n/* __next_internal_client_entry_do_not_use__ default auto */ \nvar _s = $RefreshSig$();\n\n\nvar _process_env_NEXT_PUBLIC_API_URL;\nconst API = (_process_env_NEXT_PUBLIC_API_URL = \"http://localhost:8000\") !== null && _process_env_NEXT_PUBLIC_API_URL !== void 0 ? _process_env_NEXT_PUBLIC_API_URL : \"http://localhost:8000\";\nfunction GamePage(param) {\n    let { params } = param;\n    _s();\n    const [game, setGame] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [error, setError] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const previewRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const iframeRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const [instruction, setInstruction] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"\");\n    const [editing, setEditing] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [versions, setVersions] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [showAllVersions, setShowAllVersions] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [selectedVersion, setSelectedVersion] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [manualCode, setManualCode] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"\");\n    const [previewErrors, setPreviewErrors] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    function withAIHelper(code) {\n        const wsUrl = API.replace(\"http://\", \"ws://\").replace(\"https://\", \"wss://\");\n        const helper = '\\n<script>\\nwindow.GameFactoryAI = async function(prompt, system, timeoutMs=8000){\\n  const controller = new AbortController();\\n  const timer = setTimeout(()=>controller.abort(), timeoutMs);\\n  try{\\n    const res = await fetch(\"'.concat(API, '/ai\", {\\n      method: \"POST\",\\n      headers: {\"Content-Type\": \"application/json\"},\\n      body: JSON.stringify({ prompt, system }),\\n      signal: controller.signal\\n    });\\n    const data = await res.json();\\n    return data.content || \"\";\\n  } finally {\\n    clearTimeout(timer);\\n  }\\n};\\nwindow.GameFactoryMultiplayer = function(roomId){\\n  const ws = new WebSocket(\"').concat(wsUrl, \"/ws/\\\" + encodeURIComponent(roomId || \\\"lobby\\\"));\\n  const handlers = [];\\n  ws.onmessage = (evt) => {\\n    handlers.forEach((fn) => fn(evt.data));\\n  };\\n  return {\\n    send: (data) => {\\n      if (ws.readyState === 1) ws.send(typeof data === \\\"string\\\" ? data : JSON.stringify(data));\\n    },\\n    onMessage: (fn) => handlers.push(fn),\\n    disconnect: () => ws.close()\\n  };\\n};\\nwindow.GameFactoryKit = (function(){\\n  const clamp = (v,min,max)=>Math.max(min,Math.min(max,v));\\n  const lerp = (a,b,t)=>a+(b-a)*t;\\n  const map = (v,inMin,inMax,outMin,outMax)=>outMin+(outMax-outMin)*((v-inMin)/(inMax-inMin));\\n  const rand = (min=0,max=1)=>Math.random()*(max-min)+min;\\n  const choice = (arr)=>arr[Math.floor(Math.random()*arr.length)];\\n  const now = ()=>performance.now();\\n  const easing = {\\n    linear:t=>t,\\n    inQuad:t=>t*t,\\n    outQuad:t=>t*(2-t),\\n    inOutQuad:t=>t<0.5?2*t*t:-1+(4-2*t)*t\\n  };\\n  const tween = (obj, prop, to, duration, ease=easing.inOutQuad) => {\\n    const from = obj[prop];\\n    const start = now();\\n    return new Promise((resolve)=>{\\n      function tick(){\\n        const t = Math.min(1, (now()-start)/duration);\\n        obj[prop] = from + (to-from)*ease(t);\\n        if (t<1) requestAnimationFrame(tick); else resolve(true);\\n      }\\n      tick();\\n    });\\n  };\\n  const storage = {\\n    save:(key,val)=>localStorage.setItem(key,JSON.stringify(val)),\\n    load:(key,def=null)=>{ try{const v=localStorage.getItem(key); return v?JSON.parse(v):def;}catch{return def;} },\\n    slotSave:(slot,val)=>localStorage.setItem(\\\"gf_slot_\\\"+slot,JSON.stringify(val)),\\n    slotLoad:(slot,def=null)=>{ try{const v=localStorage.getItem(\\\"gf_slot_\\\"+slot); return v?JSON.parse(v):def;}catch{return def;} }\\n  };\\n  const input = (function(){\\n    const keys = {};\\n    const mouse = {x:0,y:0,down:false};\\n    window.addEventListener('keydown',e=>keys[e.key]=true);\\n    window.addEventListener('keyup',e=>keys[e.key]=false);\\n    window.addEventListener('mousemove',e=>{mouse.x=e.clientX; mouse.y=e.clientY;});\\n    window.addEventListener('mousedown',()=>mouse.down=true);\\n    window.addEventListener('mouseup',()=>mouse.down=false);\\n    return { keys, mouse, isDown:(k)=>!!keys[k] };\\n  })();\\n  const audio = (function(){\\n    let ctx;\\n    const ensure=()=>ctx||(ctx=new (window.AudioContext||window.webkitAudioContext)());\\n    const beep=(freq=440,dur=0.1,type='sine',vol=0.2)=>{\\n      if (dur > 5) dur = dur / 1000;\\n      const c=ensure();\\n      const o=c.createOscillator(); const g=c.createGain();\\n      o.type=type; o.frequency.value=freq;\\n      const t=c.currentTime;\\n      g.gain.setValueAtTime(0.0001, t);\\n      g.gain.exponentialRampToValueAtTime(Math.max(0.0001, vol), t+0.01);\\n      g.gain.exponentialRampToValueAtTime(0.0001, t+dur);\\n      o.connect(g); g.connect(c.destination);\\n      o.start(t); o.stop(t+dur+0.02);\\n    };\\n    return { beep };\\n  })();\\n  const physics2d = {\\n    step:(obj,dt)=>{ obj.vx=(obj.vx||0)+(obj.ax||0)*dt; obj.vy=(obj.vy||0)+(obj.ay||0)*dt; obj.x+=obj.vx*dt; obj.y+=obj.vy*dt; },\\n    aabb:(a,b)=>a.x<a.w+b.x&&a.x+a.w>b.x&&a.y<a.h+b.y&&a.y+a.h>b.y,\\n    circle:(a,b)=>Math.hypot(a.x-b.x,a.y-b.y)<(a.r+b.r)\\n  };\\n  const cooldown = (function(){\\n    const map = new Map();\\n    const ready=(key,ms)=>{ const t=now(); if(!map.has(key)||t-map.get(key)>=ms){ map.set(key,t); return true;} return false; };\\n    return { ready };\\n  })();\\n  const timers = (function(){\\n    const list=[];\\n    const after=(ms,fn)=>{ const t=now()+ms; list.push({t,fn}); };\\n    const tick=()=>{ const t=now(); for(let i=list.length-1;i>=0;i--){ if(t>=list[i].t){ list[i].fn(); list.splice(i,1);} } };\\n    return { after, tick };\\n  })();\\n  const particles = (function(){\\n    const list=[];\\n    const spawn=(x,y,count=20)=>{ for(let i=0;i<count;i++){ list.push({x,y,vx:rand(-1,1),vy:rand(-1,1),life:rand(0.4,1)});} };\\n    const update=(dt)=>{ for(const p of list){ p.x+=p.vx*dt*60; p.y+=p.vy*dt*60; p.life-=dt; } };\\n    const draw=(ctx)=>{ for(const p of list){ if(p.life<=0) continue; ctx.globalAlpha=Math.max(0,p.life); ctx.fillRect(p.x,p.y,2,2);} ctx.globalAlpha=1; };\\n    const prune=()=>{ for(let i=list.length-1;i>=0;i--){ if(list[i].life<=0) list.splice(i,1);} };\\n    return { spawn, update, draw, prune, list };\\n  })();\\n  const pseudo3d = {\\n    project:(pt,cam)=>{ const z=pt.z-(cam.z||0); const scale=(cam.fov||400)/(z||1); return { x:(pt.x-(cam.x||0))*scale+(cam.cx||0), y:(pt.y-(cam.y||0))*scale+(cam.cy||0), scale }; }\\n  };\\n  const color = {\\n    hexToRgb:(hex)=>{ const h=hex.replace('#',''); const bigint=parseInt(h,16); return {r:(bigint>>16)&255,g:(bigint>>8)&255,b:bigint&255}; },\\n    rgbToHex:(r,g,b)=>'#'+[r,g,b].map(v=>v.toString(16).padStart(2,'0')).join(''),\\n    lerp:(a,b,t)=>({ r:Math.round(a.r+(b.r-a.r)*t), g:Math.round(a.g+(b.g-a.g)*t), b:Math.round(a.b+(b.b-a.b)*t) })\\n  };\\n  const text = {\\n    wrap:(ctx,text,maxWidthOrX,y,maybeW,maybeLineH)=>{\\n      if (typeof maxWidthOrX === 'number' && typeof y === 'number' && typeof maybeW === 'number') {\\n        const x = maxWidthOrX;\\n        const maxW = maybeW;\\n        const lineH = typeof maybeLineH === 'number' ? maybeLineH : 18;\\n        const lines = textWrap(ctx, text, maxW);\\n        lines.forEach((ln,i)=>ctx.fillText(ln,x,y+i*lineH));\\n        return lines;\\n      }\\n      return textWrap(ctx, text, maxWidthOrX);\\n    }\\n  };\\n  function textWrap(ctx, txt, maxWidth){\\n    const words=String(txt||'').split(' '); let line=''; const lines=[];\\n    for(const w of words){ const test=line+w+' '; if(ctx.measureText(test).width>maxWidth){ lines.push(line.trim()); line=w+' '; } else { line=test; } }\\n    lines.push(line.trim()); return lines;\\n  }\\n  const rng = (function(){\\n    let seed = 1234567;\\n    const setSeed = (s)=>{ seed = s>>>0; };\\n    const next = ()=>{ seed = (seed*1664525+1013904223)>>>0; return seed/4294967296; };\\n    return { setSeed, next };\\n  })();\\n  const eventBus = (function(){\\n    const map=new Map();\\n    const on=(evt,fn)=>{ if(!map.has(evt)) map.set(evt,[]); map.get(evt).push(fn); };\\n    const emit=(evt,data)=>{ (map.get(evt)||[]).forEach(fn=>fn(data)); };\\n    return { on, emit };\\n  })();\\n  const fsm = (initial)=>{ let state=initial; const transitions=new Map(); const on=(from,to,fn)=>transitions.set(from+'>'+to,fn); const set=(to)=>{ const fn=transitions.get(state+'>'+to); state=to; if(fn) fn(); }; const get=()=>state; return { on, set, get }; };\\n  const sprites = {\\n    draw:(ctx,img,frame,fw,fh,x,y,scale=1)=>{ const sx=frame*fw; ctx.drawImage(img,sx,0,fw,fh,x,y,fw*scale,fh*scale); }\\n  };\\n  const pathfinding = {\\n    aStar:(grid,start,end)=>{ const open=[start]; const came=new Map(); const g=new Map(); const f=new Map(); const key=(p)=>p.x+','+p.y; const h=(a,b)=>Math.abs(a.x-b.x)+Math.abs(a.y-b.y); g.set(key(start),0); f.set(key(start),h(start,end)); while(open.length){ open.sort((a,b)=>f.get(key(a))-f.get(key(b))); const current=open.shift(); if(current.x===end.x&&current.y===end.y){ const path=[current]; let k=key(current); while(came.has(k)){ const p=came.get(k); path.push(p); k=key(p); } return path.reverse(); } const dirs=[{x:1,y:0},{x:-1,y:0},{x:0,y:1},{x:0,y:-1}]; for(const d of dirs){ const nx={x:current.x+d.x,y:current.y+d.y}; if(grid[nx.y]?.[nx.x]===1) continue; const tentative=(g.get(key(current))||0)+1; const nk=key(nx); if(tentative < (g.get(nk)??Infinity)){ came.set(nk,current); g.set(nk,tentative); f.set(nk,tentative+h(nx,end)); if(!open.find(p=>p.x===nx.x&&p.y===nx.y)) open.push(nx); } } } return []; }\\n  };\\n  const navmesh = {\\n    build:(grid,diag=false)=>({ grid, diag }),\\n    neighbors:(mesh,node)=>{ const dirs=mesh.diag?[{x:1,y:0},{x:-1,y:0},{x:0,y:1},{x:0,y:-1},{x:1,y:1},{x:-1,y:1},{x:1,y:-1},{x:-1,y:-1}]:[{x:1,y:0},{x:-1,y:0},{x:0,y:1},{x:0,y:-1}]; return dirs.map(d=>({x:node.x+d.x,y:node.y+d.y})).filter(n=>mesh.grid[n.y]?.[n.x]!==1); },\\n    lineOfSight:(mesh,a,b)=>{ let x0=a.x,y0=a.y,x1=b.x,y1=b.y; const dx=Math.abs(x1-x0), dy=Math.abs(y1-y0); let sx=x0<x1?1:-1, sy=y0<y1?1:-1; let err=dx-dy; while(true){ if(mesh.grid[y0]?.[x0]===1) return false; if(x0===x1 && y0===y1) break; const e2=2*err; if(e2>-dy){ err-=dy; x0+=sx; } if(e2<dx){ err+=dx; y0+=sy; } } return true; },\\n    smooth:(path,mesh)=>{ if(path.length<=2) return path; const out=[path[0]]; let i=0; while(i<path.length-1){ let j=path.length-1; for(;j>i+1;j--){ if(navmesh.lineOfSight(mesh,path[i],path[j])) break; } out.push(path[j]); i=j; } return out; },\\n    findPath:(mesh,start,end)=>{ const p=pathfinding.aStar(mesh.grid,start,end); return navmesh.smooth(p,mesh); }\\n  };\\n  const levelGrammar = {\\n    expand:(rules,axiom,depth=3)=>{ let str=axiom; for(let i=0;i<depth;i++){ let out=\\\"\\\"; for(const ch of str){ const rule=rules[ch]; if(!rule){ out+=ch; continue; } if(Array.isArray(rule)){ const pick=rule[Math.floor(Math.random()*rule.length)]; out+=pick; } else if(typeof rule==='object'){ const entries=Object.entries(rule); const total=entries.reduce((s,[,w])=>s+Number(w||0),0); let r=Math.random()*total; for(const [sym,w] of entries){ r-=Number(w||0); if(r<=0){ out+=sym; break; } } } else { out+=String(rule); } } str=out; } return str; },\\n    toGrid:(str,w,wall='#')=>{ const rows=[]; for(let i=0;i<str.length;i+=w){ rows.push(str.slice(i,i+w).split(\\\"\\\").map(c=>c===wall?1:0)); } return rows; },\\n    interpret:(str,handlers)=>{ const state={ x:0,y:0,dir:0,stack:[] }; for(const ch of str){ if(handlers[ch]) handlers[ch](state); } return state; }\\n  };\\n  const audioSeq = (function(){\\n    let ctx;\\n    const ensure=()=>ctx||(ctx=new (window.AudioContext||window.webkitAudioContext)());\\n    const noteToFreq=(n)=>{ const A4=440; const map={'C':-9,'C#':-8,'D':-7,'D#':-6,'E':-5,'F':-4,'F#':-3,'G':-2,'G#':-1,'A':0,'A#':1,'B':2}; const m=n.match(/([A-G]#?)(d)/); if(!m) return 440; const sem=map[m[1]]+(Number(m[2])-4)*12; return A4*Math.pow(2,sem/12); };\\n    const play=(pattern,bpm=120)=>{ const c=ensure(); const beat=60/bpm; let t=c.currentTime; for(const note of pattern){ const o=c.createOscillator(); const g=c.createGain(); o.type=note.type||'sine'; o.frequency.value=note.freq|| (note.note?noteToFreq(note.note):440); g.gain.value=note.vol||0.15; o.connect(g); g.connect(c.destination); o.start(t); o.stop(t+(note.dur||0.2)); t+=beat*(note.beats||1); } };\\n    const track=(steps,bpm=120)=>{ const c=ensure(); const beat=60/bpm; const start=c.currentTime; steps.forEach((s,i)=>{ if(!s) return; const o=c.createOscillator(); const g=c.createGain(); o.type=s.type||'square'; o.frequency.value=s.freq|| (s.note?noteToFreq(s.note):440); g.gain.value=s.vol||0.1; o.connect(g); g.connect(c.destination); o.start(start+i*beat); o.stop(start+i*beat+(s.dur||0.2)); }); };\\n    return { play, track, noteToFreq };\\n  })();\\n  const ui = {\\n    button:(text, x, y, w, h, onClick)=>({ type:'button', text, x,y,w,h,onClick,hover:false }),\\n    slider:(label,x,y,w,min,max,value,onChange)=>({ type:'slider', label,x,y,w,h:24,min,max,value,onChange }),\\n    checkbox:(label,x,y,value,onChange)=>({ type:'checkbox', label,x,y,w:18,h:18,value,onChange }),\\n    draw:(ctx, widgets)=>{ widgets.forEach(w=>{ if(w.type==='button'){ ctx.fillStyle=w.hover?'rgba(255,255,255,0.2)':'rgba(0,0,0,0.5)'; ctx.fillRect(w.x,w.y,w.w,w.h); ctx.fillStyle='#fff'; ctx.fillText(w.text,w.x+8,w.y+w.h/2+4); } if(w.type==='slider'){ ctx.fillStyle='rgba(0,0,0,0.5)'; ctx.fillRect(w.x,w.y,w.w,w.h); const t=(w.value-w.min)/(w.max-w.min); ctx.fillStyle='#7df9ff'; ctx.fillRect(w.x, w.y, w.w*t, w.h); ctx.fillStyle='#fff'; ctx.fillText(w.label+': '+w.value.toFixed(1), w.x+4, w.y-4); } if(w.type==='checkbox'){ ctx.strokeStyle='#fff'; ctx.strokeRect(w.x,w.y,w.w,w.h); if(w.value){ ctx.fillStyle='#7df9ff'; ctx.fillRect(w.x+3,w.y+3,w.w-6,w.h-6); } ctx.fillStyle='#fff'; ctx.fillText(w.label, w.x+w.w+6, w.y+w.h-2); } }); },\\n    hit:(w, mx, my)=>mx>=w.x&&mx<=w.x+w.w&&my>=w.y&&my<=w.y+w.h,\\n    handleClick:(widgets,mx,my)=>{ widgets.forEach(w=>{ if(ui.hit(w,mx,my)){ if(w.type==='button' && w.onClick) w.onClick(); if(w.type==='checkbox' && w.onChange){ w.value=!w.value; w.onChange(w.value); } } }); },\\n    handleDrag:(widgets,mx,my)=>{ widgets.forEach(w=>{ if(w.type==='slider' && ui.hit(w,mx,my)){ const t=Math.max(0,Math.min(1,(mx-w.x)/w.w)); w.value=w.min + (w.max-w.min)*t; if(w.onChange) w.onChange(w.value); } }); }\\n  };\\n  const ecs = (function(){\\n    let nextId=1;\\n    const entities=new Set();\\n    const components=new Map();\\n    const systems=[];\\n    const create=()=>{ const id=nextId++; entities.add(id); return id; };\\n    const add=(id,name,data)=>{ if(!components.has(name)) components.set(name,new Map()); components.get(name).set(id,data); return data; };\\n    const get=(id,name)=>components.get(name)?.get(id);\\n    const has=(id,name)=>components.get(name)?.has(id);\\n    const remove=(id)=>{ entities.delete(id); for(const map of components.values()){ map.delete(id);} };\\n    const query=(names)=>{ const sets=names.map(n=>components.get(n)||new Map()); return [...entities].filter(id=>names.every(n=>sets[names.indexOf(n)].has(id))); };\\n    const system=(names,fn)=>{ systems.push({names,fn}); };\\n    const update=(dt)=>{ for(const s of systems){ const ids=query(s.names); for(const id of ids){ const comps=s.names.map(n=>get(id,n)); s.fn(id, ...comps, dt); } } };\\n    return { create, add, get, has, remove, query, system, update, components, entities };\\n  })();\\n  const terrain = {\\n    perlin2:(x,y)=>{ const s=Math.sin(x*12.9898+y*78.233)*43758.5453; return s-Math.floor(s); },\\n    heightMap:(w,h,scale=0.1)=>{ const map=[]; for(let y=0;y<h;y++){ const row=[]; for(let x=0;x<w;x++){ row.push(terrain.perlin2(x*scale,y*scale)); } map.push(row);} return map; }\\n  };\\n  const camera = {\\n    shake:(state,strength=6,decay=0.9)=>{ state.shake= {strength,decay,x:0,y:0}; },\\n    applyShake:(state,ctx)=>{ if(!state.shake) return; state.shake.x = rand(-state.shake.strength,state.shake.strength); state.shake.y = rand(-state.shake.strength,state.shake.strength); ctx.translate(state.shake.x,state.shake.y); state.shake.strength*=state.shake.decay; if(state.shake.strength<0.3) state.shake=null; }\\n  };\\n  const webgl = {\\n    create:(canvas)=>canvas.getContext('webgl')||canvas.getContext('experimental-webgl')\\n  };\\n  const gamepad = (function(){\\n    const state={ axes:[], buttons:[] };\\n    const poll=()=>{ const gp=navigator.getGamepads?.()[0]; if(!gp) return state; state.axes=gp.axes; state.buttons=gp.buttons.map(b=>b.pressed); return state; };\\n    return { poll, state };\\n  })();\\n  const assets = {\\n    image:(src)=>new Promise((res,rej)=>{ const img=new Image(); img.onload=()=>res(img); img.onerror=rej; img.src=src; }),\\n    audio:(src)=>new Promise((res,rej)=>{ const a=new Audio(); a.oncanplaythrough=()=>res(a); a.onerror=rej; a.src=src; })\\n  };\\n  const grid = {\\n    make:(w,h,fill=0)=>Array.from({length:h},()=>Array.from({length:w},()=>fill)),\\n    inBounds:(g,x,y)=>y>=0&&y<g.length&&x>=0&&x<g[0].length\\n  };\\n  const camera2d = {\\n    worldToScreen:(cam,x,y)=>({ x: x-cam.x, y: y-cam.y }),\\n    screenToWorld:(cam,x,y)=>({ x: x+cam.x, y: y+cam.y })\\n  };\\n  const metrics = (function(){\\n    let last=now(), fps=0;\\n    const tick=()=>{ const t=now(); fps=1000/(t-last); last=t; return fps; };\\n    return { tick, get:()=>fps };\\n  })();\\n  const logger = (function(){\\n    const logs=[]; const push=(msg)=>{ logs.unshift({ msg, t:now() }); if(logs.length>20) logs.pop(); };\\n    return { logs, push };\\n  })();\\n  const dialogue = (function(){\\n    const lines=[]; const say=(text)=>lines.push(text); const next=()=>lines.shift();\\n    return { say, next, lines };\\n  })();\\n  const timeline = (function(){\\n    const steps=[]; const add=(at,fn)=>steps.push({at,fn,done:false}); const run=(t)=>{ for(const s of steps){ if(!s.done && t>=s.at){ s.done=true; s.fn(); } } };\\n    return { add, run };\\n  })();\\n  return { clamp, lerp, map, rand, choice, now, easing, tween, storage, input, audio, physics2d, cooldown, timers, particles, pseudo3d, color, text, rng, eventBus, fsm, sprites, pathfinding, navmesh, levelGrammar, audioSeq, ui, ecs, terrain, camera, webgl, gamepad, assets, grid, camera2d, metrics, logger, dialogue, timeline };\\n})();\\n// Compatibility shims for models that don't namespace helpers\\n(function(){\\n  const K = window.GameFactoryKit;\\n  if (!K) return;\\n  window.clamp = window.clamp || K.clamp;\\n  window.lerp = window.lerp || K.lerp;\\n  window.map = window.map || K.map;\\n  window.rand = window.rand || K.rand;\\n  window.rng = window.rng || K.rng;\\n  window.choice = window.choice || K.choice;\\n  window.now = window.now || K.now;\\n  window.audio = window.audio || K.audio;\\n  window.input = window.input || K.input;\\n  window.storage = window.storage || K.storage;\\n  window.text = window.text || K.text;\\n  window.pseudo3d = window.pseudo3d || K.pseudo3d;\\n  const camState = { shake: null };\\n  window.camera = window.camera || {\\n    shake: (strength=6, decay=0.9) => K.camera.shake(camState, strength, decay),\\n    applyShake: (ctx) => K.camera.applyShake(camState, ctx)\\n  };\\n  window.particles = window.particles || {\\n    spawn: (a,b,c) => {\\n      if (typeof a === \\\"object\\\") {\\n        const o = a || {};\\n        K.particles.spawn(o.x || 0, o.y || 0, o.count || 20);\\n      } else {\\n        K.particles.spawn(a || 0, b || 0, c || 20);\\n      }\\n    },\\n    update: (dt) => {\\n      const v = dt > 10 ? dt / 1000 : dt;\\n      K.particles.update(v);\\n      K.particles.prune();\\n    },\\n    draw: (ctx) => K.particles.draw(ctx),\\n    prune: () => K.particles.prune()\\n  };\\n})();\\n</script>\\n\");\n        if (code.includes(\"window.GameFactoryKit\") || code.includes(\"GameFactoryAI = async function\")) return code;\n        if (code.includes(\"</head>\")) return code.replace(\"</head>\", \"\".concat(helper, \"</head>\"));\n        return helper + code;\n    }\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        async function load() {\n            try {\n                const res = await fetch(\"\".concat(API, \"/games/\").concat(params.id));\n                if (!res.ok) throw new Error(await res.text());\n                const data = await res.json();\n                setGame(data);\n                setManualCode(data.code);\n                const ver = await fetch(\"\".concat(API, \"/games/\").concat(params.id, \"/versions\"));\n                if (ver.ok) {\n                    const vdata = await ver.json();\n                    setVersions(vdata);\n                }\n            } catch (err) {\n                setError(err.message || \"Failed to load game\");\n            }\n        }\n        load();\n    }, [\n        params.id\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        function onMessage(event) {\n            const data = event.data;\n            if (data && data.type === \"game_error\") {\n                setPreviewErrors((prev)=>[\n                        data.message,\n                        ...prev\n                    ].slice(0, 5));\n            }\n        }\n        window.addEventListener(\"message\", onMessage);\n        return ()=>window.removeEventListener(\"message\", onMessage);\n    }, []);\n    const groupedVersions = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(()=>{\n        function hash(str) {\n            let h = 0;\n            for(let i = 0; i < str.length; i++){\n                h = h * 31 + str.charCodeAt(i) | 0;\n            }\n            return h.toString(16);\n        }\n        const seen = new Map();\n        const ordered = [];\n        for (const v of versions){\n            const key = hash(v.code || \"\");\n            if (seen.has(key)) {\n                seen.get(key).count += 1;\n            } else {\n                const entry = {\n                    v,\n                    count: 1\n                };\n                seen.set(key, entry);\n                ordered.push(entry);\n            }\n        }\n        return ordered;\n    }, [\n        versions\n    ]);\n    async function openFullscreen() {\n        if (!previewRef.current) return;\n        if (document.fullscreenElement) {\n            await document.exitFullscreen();\n            return;\n        }\n        await previewRef.current.requestFullscreen();\n    }\n    function focusPreview() {\n        var _iframeRef_current_contentWindow, _iframeRef_current;\n        (_iframeRef_current = iframeRef.current) === null || _iframeRef_current === void 0 ? void 0 : (_iframeRef_current_contentWindow = _iframeRef_current.contentWindow) === null || _iframeRef_current_contentWindow === void 0 ? void 0 : _iframeRef_current_contentWindow.focus();\n    }\n    async function submitEdit() {\n        if (!instruction.trim() || !game) return;\n        setEditing(true);\n        setError(null);\n        try {\n            const res = await fetch(\"\".concat(API, \"/games/\").concat(game.id, \"/edit\"), {\n                method: \"POST\",\n                headers: {\n                    \"Content-Type\": \"application/json\"\n                },\n                body: JSON.stringify({\n                    instruction\n                })\n            });\n            if (!res.ok) throw new Error(await res.text());\n            const data = await res.json();\n            setGame(data);\n            setInstruction(\"\");\n            const ver = await fetch(\"\".concat(API, \"/games/\").concat(params.id, \"/versions\"));\n            if (ver.ok) {\n                const vdata = await ver.json();\n                setVersions(vdata);\n            }\n        } catch (err) {\n            setError(err.message || \"Edit failed\");\n        } finally{\n            setEditing(false);\n        }\n    }\n    async function rollback(versionId) {\n        if (!game) return;\n        setEditing(true);\n        setError(null);\n        try {\n            const res = await fetch(\"\".concat(API, \"/games/\").concat(game.id, \"/rollback/\").concat(versionId), {\n                method: \"POST\"\n            });\n            if (!res.ok) throw new Error(await res.text());\n            const data = await res.json();\n            setGame(data);\n            const ver = await fetch(\"\".concat(API, \"/games/\").concat(params.id, \"/versions\"));\n            if (ver.ok) {\n                const vdata = await ver.json();\n                setVersions(vdata);\n            }\n        } catch (err) {\n            setError(err.message || \"Rollback failed\");\n        } finally{\n            setEditing(false);\n        }\n    }\n    async function saveManual() {\n        if (!game) return;\n        setEditing(true);\n        setError(null);\n        try {\n            const res = await fetch(\"\".concat(API, \"/games/\").concat(game.id), {\n                method: \"PUT\",\n                headers: {\n                    \"Content-Type\": \"application/json\"\n                },\n                body: JSON.stringify({\n                    code: manualCode\n                })\n            });\n            if (!res.ok) throw new Error(await res.text());\n            const data = await res.json();\n            setGame(data);\n            const ver = await fetch(\"\".concat(API, \"/games/\").concat(params.id, \"/versions\"));\n            if (ver.ok) {\n                const vdata = await ver.json();\n                setVersions(vdata);\n            }\n        } catch (err) {\n            setError(err.message || \"Manual save failed\");\n        } finally{\n            setEditing(false);\n        }\n    }\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"main\", {\n        className: \"section\",\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(next_link__WEBPACK_IMPORTED_MODULE_2__[\"default\"], {\n                href: \"/\",\n                className: \"badge\",\n                children: \"Back\"\n            }, void 0, false, {\n                fileName: \"/Users/jarjarbeatu/Documents/Arcadia/apps/web/app/games/[id]/page.tsx\",\n                lineNumber: 471,\n                columnNumber: 7\n            }, this),\n            error && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                style: {\n                    color: \"#ff9b9b\"\n                },\n                children: error\n            }, void 0, false, {\n                fileName: \"/Users/jarjarbeatu/Documents/Arcadia/apps/web/app/games/[id]/page.tsx\",\n                lineNumber: 472,\n                columnNumber: 17\n            }, this),\n            !game && !error && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                children: \"Loading...\"\n            }, void 0, false, {\n                fileName: \"/Users/jarjarbeatu/Documents/Arcadia/apps/web/app/games/[id]/page.tsx\",\n                lineNumber: 473,\n                columnNumber: 27\n            }, this),\n            game && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                style: {\n                    display: \"grid\",\n                    gap: 16\n                },\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h1\", {\n                        children: game.title\n                    }, void 0, false, {\n                        fileName: \"/Users/jarjarbeatu/Documents/Arcadia/apps/web/app/games/[id]/page.tsx\",\n                        lineNumber: 476,\n                        columnNumber: 11\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                        style: {\n                            color: \"#98a0b5\"\n                        },\n                        children: game.description\n                    }, void 0, false, {\n                        fileName: \"/Users/jarjarbeatu/Documents/Arcadia/apps/web/app/games/[id]/page.tsx\",\n                        lineNumber: 477,\n                        columnNumber: 11\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"preview-header\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"card-title\",\n                                children: \"Play\"\n                            }, void 0, false, {\n                                fileName: \"/Users/jarjarbeatu/Documents/Arcadia/apps/web/app/games/[id]/page.tsx\",\n                                lineNumber: 479,\n                                columnNumber: 13\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                className: \"secondary\",\n                                onClick: openFullscreen,\n                                children: \"Fullscreen\"\n                            }, void 0, false, {\n                                fileName: \"/Users/jarjarbeatu/Documents/Arcadia/apps/web/app/games/[id]/page.tsx\",\n                                lineNumber: 480,\n                                columnNumber: 13\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/Users/jarjarbeatu/Documents/Arcadia/apps/web/app/games/[id]/page.tsx\",\n                        lineNumber: 478,\n                        columnNumber: 11\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"preview\",\n                        ref: previewRef,\n                        onClick: focusPreview,\n                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"iframe\", {\n                            ref: iframeRef,\n                            srcDoc: withAIHelper(game.code),\n                            sandbox: \"allow-scripts\"\n                        }, void 0, false, {\n                            fileName: \"/Users/jarjarbeatu/Documents/Arcadia/apps/web/app/games/[id]/page.tsx\",\n                            lineNumber: 483,\n                            columnNumber: 13\n                        }, this)\n                    }, void 0, false, {\n                        fileName: \"/Users/jarjarbeatu/Documents/Arcadia/apps/web/app/games/[id]/page.tsx\",\n                        lineNumber: 482,\n                        columnNumber: 11\n                    }, this),\n                    previewErrors.length > 0 && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"card\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"card-title\",\n                                children: \"Preview Errors\"\n                            }, void 0, false, {\n                                fileName: \"/Users/jarjarbeatu/Documents/Arcadia/apps/web/app/games/[id]/page.tsx\",\n                                lineNumber: 487,\n                                columnNumber: 15\n                            }, this),\n                            previewErrors.map((e, i)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"card-meta\",\n                                    style: {\n                                        color: \"#ff9b9b\"\n                                    },\n                                    children: e\n                                }, i, false, {\n                                    fileName: \"/Users/jarjarbeatu/Documents/Arcadia/apps/web/app/games/[id]/page.tsx\",\n                                    lineNumber: 489,\n                                    columnNumber: 17\n                                }, this))\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/Users/jarjarbeatu/Documents/Arcadia/apps/web/app/games/[id]/page.tsx\",\n                        lineNumber: 486,\n                        columnNumber: 13\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"card\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"card-title\",\n                                children: \"Prompt\"\n                            }, void 0, false, {\n                                fileName: \"/Users/jarjarbeatu/Documents/Arcadia/apps/web/app/games/[id]/page.tsx\",\n                                lineNumber: 494,\n                                columnNumber: 13\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"card-meta\",\n                                children: game.prompt\n                            }, void 0, false, {\n                                fileName: \"/Users/jarjarbeatu/Documents/Arcadia/apps/web/app/games/[id]/page.tsx\",\n                                lineNumber: 495,\n                                columnNumber: 13\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/Users/jarjarbeatu/Documents/Arcadia/apps/web/app/games/[id]/page.tsx\",\n                        lineNumber: 493,\n                        columnNumber: 11\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"card\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"card-title\",\n                                children: \"Edit With AI\"\n                            }, void 0, false, {\n                                fileName: \"/Users/jarjarbeatu/Documents/Arcadia/apps/web/app/games/[id]/page.tsx\",\n                                lineNumber: 498,\n                                columnNumber: 13\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"card-meta\",\n                                children: \"Describe the change you want.\"\n                            }, void 0, false, {\n                                fileName: \"/Users/jarjarbeatu/Documents/Arcadia/apps/web/app/games/[id]/page.tsx\",\n                                lineNumber: 499,\n                                columnNumber: 13\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"textarea\", {\n                                value: instruction,\n                                onChange: (e)=>setInstruction(e.target.value),\n                                placeholder: \"Add a timer, new obstacles, change art style...\",\n                                style: {\n                                    minHeight: 120\n                                }\n                            }, void 0, false, {\n                                fileName: \"/Users/jarjarbeatu/Documents/Arcadia/apps/web/app/games/[id]/page.tsx\",\n                                lineNumber: 500,\n                                columnNumber: 13\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"button-row\",\n                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                    onClick: submitEdit,\n                                    disabled: editing,\n                                    children: editing ? \"Editing...\" : \"Apply Edit\"\n                                }, void 0, false, {\n                                    fileName: \"/Users/jarjarbeatu/Documents/Arcadia/apps/web/app/games/[id]/page.tsx\",\n                                    lineNumber: 507,\n                                    columnNumber: 15\n                                }, this)\n                            }, void 0, false, {\n                                fileName: \"/Users/jarjarbeatu/Documents/Arcadia/apps/web/app/games/[id]/page.tsx\",\n                                lineNumber: 506,\n                                columnNumber: 13\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/Users/jarjarbeatu/Documents/Arcadia/apps/web/app/games/[id]/page.tsx\",\n                        lineNumber: 497,\n                        columnNumber: 11\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"card\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"card-title\",\n                                children: \"Manual Code Edit\"\n                            }, void 0, false, {\n                                fileName: \"/Users/jarjarbeatu/Documents/Arcadia/apps/web/app/games/[id]/page.tsx\",\n                                lineNumber: 513,\n                                columnNumber: 13\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"card-meta\",\n                                children: \"Edit HTML directly and save.\"\n                            }, void 0, false, {\n                                fileName: \"/Users/jarjarbeatu/Documents/Arcadia/apps/web/app/games/[id]/page.tsx\",\n                                lineNumber: 514,\n                                columnNumber: 13\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"textarea\", {\n                                value: manualCode,\n                                onChange: (e)=>setManualCode(e.target.value),\n                                style: {\n                                    minHeight: 220\n                                }\n                            }, void 0, false, {\n                                fileName: \"/Users/jarjarbeatu/Documents/Arcadia/apps/web/app/games/[id]/page.tsx\",\n                                lineNumber: 515,\n                                columnNumber: 13\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"button-row\",\n                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                    onClick: saveManual,\n                                    disabled: editing,\n                                    children: editing ? \"Saving...\" : \"Save Code\"\n                                }, void 0, false, {\n                                    fileName: \"/Users/jarjarbeatu/Documents/Arcadia/apps/web/app/games/[id]/page.tsx\",\n                                    lineNumber: 521,\n                                    columnNumber: 15\n                                }, this)\n                            }, void 0, false, {\n                                fileName: \"/Users/jarjarbeatu/Documents/Arcadia/apps/web/app/games/[id]/page.tsx\",\n                                lineNumber: 520,\n                                columnNumber: 13\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/Users/jarjarbeatu/Documents/Arcadia/apps/web/app/games/[id]/page.tsx\",\n                        lineNumber: 512,\n                        columnNumber: 11\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"card\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"card-title\",\n                                children: \"Version History\"\n                            }, void 0, false, {\n                                fileName: \"/Users/jarjarbeatu/Documents/Arcadia/apps/web/app/games/[id]/page.tsx\",\n                                lineNumber: 527,\n                                columnNumber: 13\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"card-meta\",\n                                children: \"Rollback to a previous version.\"\n                            }, void 0, false, {\n                                fileName: \"/Users/jarjarbeatu/Documents/Arcadia/apps/web/app/games/[id]/page.tsx\",\n                                lineNumber: 528,\n                                columnNumber: 13\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                style: {\n                                    display: \"grid\",\n                                    gap: 8\n                                },\n                                children: [\n                                    versions.length === 0 && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"card-meta\",\n                                        children: \"No versions yet.\"\n                                    }, void 0, false, {\n                                        fileName: \"/Users/jarjarbeatu/Documents/Arcadia/apps/web/app/games/[id]/page.tsx\",\n                                        lineNumber: 530,\n                                        columnNumber: 41\n                                    }, this),\n                                    (showAllVersions ? groupedVersions : groupedVersions.slice(0, 6)).map((entry)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                            style: {\n                                                display: \"flex\",\n                                                gap: 8,\n                                                alignItems: \"center\"\n                                            },\n                                            children: [\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                                    className: \"secondary\",\n                                                    onClick: ()=>rollback(entry.v.id),\n                                                    disabled: editing,\n                                                    style: {\n                                                        flex: 1\n                                                    },\n                                                    children: [\n                                                        new Date(entry.v.created_at).toLocaleString(),\n                                                        \" â€” \",\n                                                        entry.v.title,\n                                                        \" [\",\n                                                        entry.v.action || \"edit\",\n                                                        \"]\",\n                                                        entry.count > 1 ? \" (x\".concat(entry.count, \")\") : \"\"\n                                                    ]\n                                                }, void 0, true, {\n                                                    fileName: \"/Users/jarjarbeatu/Documents/Arcadia/apps/web/app/games/[id]/page.tsx\",\n                                                    lineNumber: 533,\n                                                    columnNumber: 19\n                                                }, this),\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                                    className: \"secondary\",\n                                                    onClick: ()=>setSelectedVersion(entry.v),\n                                                    disabled: editing,\n                                                    children: \"Compare\"\n                                                }, void 0, false, {\n                                                    fileName: \"/Users/jarjarbeatu/Documents/Arcadia/apps/web/app/games/[id]/page.tsx\",\n                                                    lineNumber: 542,\n                                                    columnNumber: 19\n                                                }, this)\n                                            ]\n                                        }, entry.v.id, true, {\n                                            fileName: \"/Users/jarjarbeatu/Documents/Arcadia/apps/web/app/games/[id]/page.tsx\",\n                                            lineNumber: 532,\n                                            columnNumber: 17\n                                        }, this))\n                                ]\n                            }, void 0, true, {\n                                fileName: \"/Users/jarjarbeatu/Documents/Arcadia/apps/web/app/games/[id]/page.tsx\",\n                                lineNumber: 529,\n                                columnNumber: 13\n                            }, this),\n                            groupedVersions.length > 6 && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                className: \"secondary\",\n                                style: {\n                                    marginTop: 8\n                                },\n                                onClick: ()=>setShowAllVersions((s)=>!s),\n                                children: showAllVersions ? \"Show Less\" : \"Show All\"\n                            }, void 0, false, {\n                                fileName: \"/Users/jarjarbeatu/Documents/Arcadia/apps/web/app/games/[id]/page.tsx\",\n                                lineNumber: 553,\n                                columnNumber: 15\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/Users/jarjarbeatu/Documents/Arcadia/apps/web/app/games/[id]/page.tsx\",\n                        lineNumber: 526,\n                        columnNumber: 11\n                    }, this),\n                    selectedVersion && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"card\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"card-title\",\n                                children: \"Compare Versions\"\n                            }, void 0, false, {\n                                fileName: \"/Users/jarjarbeatu/Documents/Arcadia/apps/web/app/games/[id]/page.tsx\",\n                                lineNumber: 564,\n                                columnNumber: 15\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"card-meta\",\n                                children: [\n                                    \"Selected: \",\n                                    new Date(selectedVersion.created_at).toLocaleString(),\n                                    \" â€” \",\n                                    selectedVersion.title\n                                ]\n                            }, void 0, true, {\n                                fileName: \"/Users/jarjarbeatu/Documents/Arcadia/apps/web/app/games/[id]/page.tsx\",\n                                lineNumber: 565,\n                                columnNumber: 15\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                style: {\n                                    display: \"grid\",\n                                    gridTemplateColumns: \"1fr 1fr\",\n                                    gap: 12\n                                },\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        children: [\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                className: \"card-meta\",\n                                                children: \"Current\"\n                                            }, void 0, false, {\n                                                fileName: \"/Users/jarjarbeatu/Documents/Arcadia/apps/web/app/games/[id]/page.tsx\",\n                                                lineNumber: 570,\n                                                columnNumber: 19\n                                            }, this),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"textarea\", {\n                                                readOnly: true,\n                                                value: game.code,\n                                                style: {\n                                                    minHeight: 220\n                                                }\n                                            }, void 0, false, {\n                                                fileName: \"/Users/jarjarbeatu/Documents/Arcadia/apps/web/app/games/[id]/page.tsx\",\n                                                lineNumber: 571,\n                                                columnNumber: 19\n                                            }, this)\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"/Users/jarjarbeatu/Documents/Arcadia/apps/web/app/games/[id]/page.tsx\",\n                                        lineNumber: 569,\n                                        columnNumber: 17\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        children: [\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                className: \"card-meta\",\n                                                children: \"Selected\"\n                                            }, void 0, false, {\n                                                fileName: \"/Users/jarjarbeatu/Documents/Arcadia/apps/web/app/games/[id]/page.tsx\",\n                                                lineNumber: 574,\n                                                columnNumber: 19\n                                            }, this),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"textarea\", {\n                                                readOnly: true,\n                                                value: selectedVersion.code,\n                                                style: {\n                                                    minHeight: 220\n                                                }\n                                            }, void 0, false, {\n                                                fileName: \"/Users/jarjarbeatu/Documents/Arcadia/apps/web/app/games/[id]/page.tsx\",\n                                                lineNumber: 575,\n                                                columnNumber: 19\n                                            }, this)\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"/Users/jarjarbeatu/Documents/Arcadia/apps/web/app/games/[id]/page.tsx\",\n                                        lineNumber: 573,\n                                        columnNumber: 17\n                                    }, this)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"/Users/jarjarbeatu/Documents/Arcadia/apps/web/app/games/[id]/page.tsx\",\n                                lineNumber: 568,\n                                columnNumber: 15\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"button-row\",\n                                style: {\n                                    marginTop: 8\n                                },\n                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                    className: \"secondary\",\n                                    onClick: ()=>setSelectedVersion(null),\n                                    children: \"Close Compare\"\n                                }, void 0, false, {\n                                    fileName: \"/Users/jarjarbeatu/Documents/Arcadia/apps/web/app/games/[id]/page.tsx\",\n                                    lineNumber: 579,\n                                    columnNumber: 17\n                                }, this)\n                            }, void 0, false, {\n                                fileName: \"/Users/jarjarbeatu/Documents/Arcadia/apps/web/app/games/[id]/page.tsx\",\n                                lineNumber: 578,\n                                columnNumber: 15\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/Users/jarjarbeatu/Documents/Arcadia/apps/web/app/games/[id]/page.tsx\",\n                        lineNumber: 563,\n                        columnNumber: 13\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/jarjarbeatu/Documents/Arcadia/apps/web/app/games/[id]/page.tsx\",\n                lineNumber: 475,\n                columnNumber: 9\n            }, this)\n        ]\n    }, void 0, true, {\n        fileName: \"/Users/jarjarbeatu/Documents/Arcadia/apps/web/app/games/[id]/page.tsx\",\n        lineNumber: 470,\n        columnNumber: 5\n    }, this);\n}\n_s(GamePage, \"bgFcgQIN2OvYyHkLJ8O1kGz6vl8=\");\n_c = GamePage;\nvar _c;\n$RefreshReg$(_c, \"GamePage\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL2FwcC9nYW1lcy9baWRdL3BhZ2UudHN4IiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFFNkQ7QUFDaEM7SUFFakJLO0FBQVosTUFBTUMsTUFBTUQsQ0FBQUEsbUNBQUFBLHVCQUErQixjQUEvQkEsOENBQUFBLG1DQUFtQztBQVdoQyxTQUFTSSxTQUFTLEtBQXNDO1FBQXRDLEVBQUVDLE1BQU0sRUFBOEIsR0FBdEM7O0lBQy9CLE1BQU0sQ0FBQ0MsTUFBTUMsUUFBUSxHQUFHVCwrQ0FBUUEsQ0FBYztJQUM5QyxNQUFNLENBQUNVLE9BQU9DLFNBQVMsR0FBR1gsK0NBQVFBLENBQWdCO0lBQ2xELE1BQU1ZLGFBQWFiLDZDQUFNQSxDQUF3QjtJQUNqRCxNQUFNYyxZQUFZZCw2Q0FBTUEsQ0FBMkI7SUFDbkQsTUFBTSxDQUFDZSxhQUFhQyxlQUFlLEdBQUdmLCtDQUFRQSxDQUFDO0lBQy9DLE1BQU0sQ0FBQ2dCLFNBQVNDLFdBQVcsR0FBR2pCLCtDQUFRQSxDQUFDO0lBQ3ZDLE1BQU0sQ0FBQ2tCLFVBQVVDLFlBQVksR0FBR25CLCtDQUFRQSxDQUFTLEVBQUU7SUFDbkQsTUFBTSxDQUFDb0IsaUJBQWlCQyxtQkFBbUIsR0FBR3JCLCtDQUFRQSxDQUFDO0lBQ3ZELE1BQU0sQ0FBQ3NCLGlCQUFpQkMsbUJBQW1CLEdBQUd2QiwrQ0FBUUEsQ0FBYTtJQUNuRSxNQUFNLENBQUN3QixZQUFZQyxjQUFjLEdBQUd6QiwrQ0FBUUEsQ0FBQztJQUM3QyxNQUFNLENBQUMwQixlQUFlQyxpQkFBaUIsR0FBRzNCLCtDQUFRQSxDQUFXLEVBQUU7SUFFL0QsU0FBUzRCLGFBQWFDLElBQVk7UUFDaEMsTUFBTUMsUUFBUTNCLElBQUk0QixPQUFPLENBQUMsV0FBVyxTQUFTQSxPQUFPLENBQUMsWUFBWTtRQUNsRSxNQUFNQyxTQUFTLHlPQW1CV0YsT0FiQzNCLEtBQUksMFhBYUMsT0FBTjJCLE9BQU07UUFnUmhDLElBQUlELEtBQUtJLFFBQVEsQ0FBQyw0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LFdBQVU7O29DQUFZO29DQUNkLElBQUk2QixLQUFLckcsZ0JBQWdCc0csVUFBVSxFQUFFQyxjQUFjO29DQUFHO29DQUFJdkcsZ0JBQWdCaUYsS0FBSzs7Ozs7OzswQ0FFNUYsOERBQUNKO2dDQUFJRixPQUFPO29DQUFFRyxTQUFTO29DQUFRNkIscUJBQXFCO29DQUFXNUIsS0FBSztnQ0FBRzs7a0RBQ3JFLDhEQUFDRjs7MERBQ0MsOERBQUNBO2dEQUFJTCxXQUFVOzBEQUFZOzs7Ozs7MERBQzNCLDhEQUFDb0I7Z0RBQVNnQixRQUFRO2dEQUFDZixPQUFPM0csS0FBS3FCLElBQUk7Z0RBQUVvRSxPQUFPO29EQUFFc0IsV0FBVztnREFBSTs7Ozs7Ozs7Ozs7O2tEQUUvRCw4REFBQ3BCOzswREFDQyw4REFBQ0E7Z0RBQUlMLFdBQVU7MERBQVk7Ozs7OzswREFDM0IsOERBQUNvQjtnREFBU2dCLFFBQVE7Z0RBQUNmLE9BQU83RixnQkFBZ0JPLElBQUk7Z0RBQUVvRSxPQUFPO29EQUFFc0IsV0FBVztnREFBSTs7Ozs7Ozs7Ozs7Ozs7Ozs7OzBDQUc1RSw4REFBQ3BCO2dDQUFJTCxXQUFVO2dDQUFhRyxPQUFPO29DQUFFOEIsV0FBVztnQ0FBRTswQ0FDaEQsNEVBQUN0QjtvQ0FBT1gsV0FBVTtvQ0FBWVksU0FBUyxJQUFNbkYsbUJBQW1COzhDQUFPOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQVV2RjtHQTVqQndCakI7S0FBQUEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vYXBwL2dhbWVzL1tpZF0vcGFnZS50c3g/NWQ3NCJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBjbGllbnRcIjtcblxuaW1wb3J0IHsgdXNlRWZmZWN0LCB1c2VNZW1vLCB1c2VSZWYsIHVzZVN0YXRlIH0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgTGluayBmcm9tIFwibmV4dC9saW5rXCI7XG5cbmNvbnN0IEFQSSA9IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0FQSV9VUkwgPz8gXCJodHRwOi8vbG9jYWxob3N0OjgwMDBcIjtcblxudHlwZSBHYW1lID0ge1xuICBpZDogbnVtYmVyO1xuICB0aXRsZTogc3RyaW5nO1xuICBkZXNjcmlwdGlvbjogc3RyaW5nO1xuICBwcm9tcHQ6IHN0cmluZztcbiAgY29kZTogc3RyaW5nO1xuICBjcmVhdGVkX2F0OiBzdHJpbmc7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBHYW1lUGFnZSh7IHBhcmFtcyB9OiB7IHBhcmFtczogeyBpZDogc3RyaW5nIH0gfSkge1xuICBjb25zdCBbZ2FtZSwgc2V0R2FtZV0gPSB1c2VTdGF0ZTxHYW1lIHwgbnVsbD4obnVsbCk7XG4gIGNvbnN0IFtlcnJvciwgc2V0RXJyb3JdID0gdXNlU3RhdGU8c3RyaW5nIHwgbnVsbD4obnVsbCk7XG4gIGNvbnN0IHByZXZpZXdSZWYgPSB1c2VSZWY8SFRNTERpdkVsZW1lbnQgfCBudWxsPihudWxsKTtcbiAgY29uc3QgaWZyYW1lUmVmID0gdXNlUmVmPEhUTUxJRnJhbWVFbGVtZW50IHwgbnVsbD4obnVsbCk7XG4gIGNvbnN0IFtpbnN0cnVjdGlvbiwgc2V0SW5zdHJ1Y3Rpb25dID0gdXNlU3RhdGUoXCJcIik7XG4gIGNvbnN0IFtlZGl0aW5nLCBzZXRFZGl0aW5nXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW3ZlcnNpb25zLCBzZXRWZXJzaW9uc10gPSB1c2VTdGF0ZTxHYW1lW10+KFtdKTtcbiAgY29uc3QgW3Nob3dBbGxWZXJzaW9ucywgc2V0U2hvd0FsbFZlcnNpb25zXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW3NlbGVjdGVkVmVyc2lvbiwgc2V0U2VsZWN0ZWRWZXJzaW9uXSA9IHVzZVN0YXRlPGFueSB8IG51bGw+KG51bGwpO1xuICBjb25zdCBbbWFudWFsQ29kZSwgc2V0TWFudWFsQ29kZV0gPSB1c2VTdGF0ZShcIlwiKTtcbiAgY29uc3QgW3ByZXZpZXdFcnJvcnMsIHNldFByZXZpZXdFcnJvcnNdID0gdXNlU3RhdGU8c3RyaW5nW10+KFtdKTtcblxuICBmdW5jdGlvbiB3aXRoQUlIZWxwZXIoY29kZTogc3RyaW5nKSB7XG4gICAgY29uc3Qgd3NVcmwgPSBBUEkucmVwbGFjZShcImh0dHA6Ly9cIiwgXCJ3czovL1wiKS5yZXBsYWNlKFwiaHR0cHM6Ly9cIiwgXCJ3c3M6Ly9cIik7XG4gICAgY29uc3QgaGVscGVyID0gYFxuPHNjcmlwdD5cbndpbmRvdy5HYW1lRmFjdG9yeUFJID0gYXN5bmMgZnVuY3Rpb24ocHJvbXB0LCBzeXN0ZW0sIHRpbWVvdXRNcz04MDAwKXtcbiAgY29uc3QgY29udHJvbGxlciA9IG5ldyBBYm9ydENvbnRyb2xsZXIoKTtcbiAgY29uc3QgdGltZXIgPSBzZXRUaW1lb3V0KCgpPT5jb250cm9sbGVyLmFib3J0KCksIHRpbWVvdXRNcyk7XG4gIHRyeXtcbiAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaChcIiR7QVBJfS9haVwiLCB7XG4gICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgaGVhZGVyczoge1wiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwifSxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgcHJvbXB0LCBzeXN0ZW0gfSksXG4gICAgICBzaWduYWw6IGNvbnRyb2xsZXIuc2lnbmFsXG4gICAgfSk7XG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlcy5qc29uKCk7XG4gICAgcmV0dXJuIGRhdGEuY29udGVudCB8fCBcIlwiO1xuICB9IGZpbmFsbHkge1xuICAgIGNsZWFyVGltZW91dCh0aW1lcik7XG4gIH1cbn07XG53aW5kb3cuR2FtZUZhY3RvcnlNdWx0aXBsYXllciA9IGZ1bmN0aW9uKHJvb21JZCl7XG4gIGNvbnN0IHdzID0gbmV3IFdlYlNvY2tldChcIiR7d3NVcmx9L3dzL1wiICsgZW5jb2RlVVJJQ29tcG9uZW50KHJvb21JZCB8fCBcImxvYmJ5XCIpKTtcbiAgY29uc3QgaGFuZGxlcnMgPSBbXTtcbiAgd3Mub25tZXNzYWdlID0gKGV2dCkgPT4ge1xuICAgIGhhbmRsZXJzLmZvckVhY2goKGZuKSA9PiBmbihldnQuZGF0YSkpO1xuICB9O1xuICByZXR1cm4ge1xuICAgIHNlbmQ6IChkYXRhKSA9PiB7XG4gICAgICBpZiAod3MucmVhZHlTdGF0ZSA9PT0gMSkgd3Muc2VuZCh0eXBlb2YgZGF0YSA9PT0gXCJzdHJpbmdcIiA/IGRhdGEgOiBKU09OLnN0cmluZ2lmeShkYXRhKSk7XG4gICAgfSxcbiAgICBvbk1lc3NhZ2U6IChmbikgPT4gaGFuZGxlcnMucHVzaChmbiksXG4gICAgZGlzY29ubmVjdDogKCkgPT4gd3MuY2xvc2UoKVxuICB9O1xufTtcbndpbmRvdy5HYW1lRmFjdG9yeUtpdCA9IChmdW5jdGlvbigpe1xuICBjb25zdCBjbGFtcCA9ICh2LG1pbixtYXgpPT5NYXRoLm1heChtaW4sTWF0aC5taW4obWF4LHYpKTtcbiAgY29uc3QgbGVycCA9IChhLGIsdCk9PmErKGItYSkqdDtcbiAgY29uc3QgbWFwID0gKHYsaW5NaW4saW5NYXgsb3V0TWluLG91dE1heCk9Pm91dE1pbisob3V0TWF4LW91dE1pbikqKCh2LWluTWluKS8oaW5NYXgtaW5NaW4pKTtcbiAgY29uc3QgcmFuZCA9IChtaW49MCxtYXg9MSk9Pk1hdGgucmFuZG9tKCkqKG1heC1taW4pK21pbjtcbiAgY29uc3QgY2hvaWNlID0gKGFycik9PmFycltNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkqYXJyLmxlbmd0aCldO1xuICBjb25zdCBub3cgPSAoKT0+cGVyZm9ybWFuY2Uubm93KCk7XG4gIGNvbnN0IGVhc2luZyA9IHtcbiAgICBsaW5lYXI6dD0+dCxcbiAgICBpblF1YWQ6dD0+dCp0LFxuICAgIG91dFF1YWQ6dD0+dCooMi10KSxcbiAgICBpbk91dFF1YWQ6dD0+dDwwLjU/Mip0KnQ6LTErKDQtMip0KSp0XG4gIH07XG4gIGNvbnN0IHR3ZWVuID0gKG9iaiwgcHJvcCwgdG8sIGR1cmF0aW9uLCBlYXNlPWVhc2luZy5pbk91dFF1YWQpID0+IHtcbiAgICBjb25zdCBmcm9tID0gb2JqW3Byb3BdO1xuICAgIGNvbnN0IHN0YXJ0ID0gbm93KCk7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKT0+e1xuICAgICAgZnVuY3Rpb24gdGljaygpe1xuICAgICAgICBjb25zdCB0ID0gTWF0aC5taW4oMSwgKG5vdygpLXN0YXJ0KS9kdXJhdGlvbik7XG4gICAgICAgIG9ialtwcm9wXSA9IGZyb20gKyAodG8tZnJvbSkqZWFzZSh0KTtcbiAgICAgICAgaWYgKHQ8MSkgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKHRpY2spOyBlbHNlIHJlc29sdmUodHJ1ZSk7XG4gICAgICB9XG4gICAgICB0aWNrKCk7XG4gICAgfSk7XG4gIH07XG4gIGNvbnN0IHN0b3JhZ2UgPSB7XG4gICAgc2F2ZTooa2V5LHZhbCk9PmxvY2FsU3RvcmFnZS5zZXRJdGVtKGtleSxKU09OLnN0cmluZ2lmeSh2YWwpKSxcbiAgICBsb2FkOihrZXksZGVmPW51bGwpPT57IHRyeXtjb25zdCB2PWxvY2FsU3RvcmFnZS5nZXRJdGVtKGtleSk7IHJldHVybiB2P0pTT04ucGFyc2Uodik6ZGVmO31jYXRjaHtyZXR1cm4gZGVmO30gfSxcbiAgICBzbG90U2F2ZTooc2xvdCx2YWwpPT5sb2NhbFN0b3JhZ2Uuc2V0SXRlbShcImdmX3Nsb3RfXCIrc2xvdCxKU09OLnN0cmluZ2lmeSh2YWwpKSxcbiAgICBzbG90TG9hZDooc2xvdCxkZWY9bnVsbCk9PnsgdHJ5e2NvbnN0IHY9bG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJnZl9zbG90X1wiK3Nsb3QpOyByZXR1cm4gdj9KU09OLnBhcnNlKHYpOmRlZjt9Y2F0Y2h7cmV0dXJuIGRlZjt9IH1cbiAgfTtcbiAgY29uc3QgaW5wdXQgPSAoZnVuY3Rpb24oKXtcbiAgICBjb25zdCBrZXlzID0ge307XG4gICAgY29uc3QgbW91c2UgPSB7eDowLHk6MCxkb3duOmZhbHNlfTtcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsZT0+a2V5c1tlLmtleV09dHJ1ZSk7XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2tleXVwJyxlPT5rZXlzW2Uua2V5XT1mYWxzZSk7XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsZT0+e21vdXNlLng9ZS5jbGllbnRYOyBtb3VzZS55PWUuY2xpZW50WTt9KTtcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywoKT0+bW91c2UuZG93bj10cnVlKTtcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsKCk9Pm1vdXNlLmRvd249ZmFsc2UpO1xuICAgIHJldHVybiB7IGtleXMsIG1vdXNlLCBpc0Rvd246KGspPT4hIWtleXNba10gfTtcbiAgfSkoKTtcbiAgY29uc3QgYXVkaW8gPSAoZnVuY3Rpb24oKXtcbiAgICBsZXQgY3R4O1xuICAgIGNvbnN0IGVuc3VyZT0oKT0+Y3R4fHwoY3R4PW5ldyAod2luZG93LkF1ZGlvQ29udGV4dHx8d2luZG93LndlYmtpdEF1ZGlvQ29udGV4dCkoKSk7XG4gICAgY29uc3QgYmVlcD0oZnJlcT00NDAsZHVyPTAuMSx0eXBlPSdzaW5lJyx2b2w9MC4yKT0+e1xuICAgICAgaWYgKGR1ciA+IDUpIGR1ciA9IGR1ciAvIDEwMDA7XG4gICAgICBjb25zdCBjPWVuc3VyZSgpO1xuICAgICAgY29uc3Qgbz1jLmNyZWF0ZU9zY2lsbGF0b3IoKTsgY29uc3QgZz1jLmNyZWF0ZUdhaW4oKTtcbiAgICAgIG8udHlwZT10eXBlOyBvLmZyZXF1ZW5jeS52YWx1ZT1mcmVxO1xuICAgICAgY29uc3QgdD1jLmN1cnJlbnRUaW1lO1xuICAgICAgZy5nYWluLnNldFZhbHVlQXRUaW1lKDAuMDAwMSwgdCk7XG4gICAgICBnLmdhaW4uZXhwb25lbnRpYWxSYW1wVG9WYWx1ZUF0VGltZShNYXRoLm1heCgwLjAwMDEsIHZvbCksIHQrMC4wMSk7XG4gICAgICBnLmdhaW4uZXhwb25lbnRpYWxSYW1wVG9WYWx1ZUF0VGltZSgwLjAwMDEsIHQrZHVyKTtcbiAgICAgIG8uY29ubmVjdChnKTsgZy5jb25uZWN0KGMuZGVzdGluYXRpb24pO1xuICAgICAgby5zdGFydCh0KTsgby5zdG9wKHQrZHVyKzAuMDIpO1xuICAgIH07XG4gICAgcmV0dXJuIHsgYmVlcCB9O1xuICB9KSgpO1xuICBjb25zdCBwaHlzaWNzMmQgPSB7XG4gICAgc3RlcDoob2JqLGR0KT0+eyBvYmoudng9KG9iai52eHx8MCkrKG9iai5heHx8MCkqZHQ7IG9iai52eT0ob2JqLnZ5fHwwKSsob2JqLmF5fHwwKSpkdDsgb2JqLngrPW9iai52eCpkdDsgb2JqLnkrPW9iai52eSpkdDsgfSxcbiAgICBhYWJiOihhLGIpPT5hLng8YS53K2IueCYmYS54K2Eudz5iLngmJmEueTxhLmgrYi55JiZhLnkrYS5oPmIueSxcbiAgICBjaXJjbGU6KGEsYik9Pk1hdGguaHlwb3QoYS54LWIueCxhLnktYi55KTwoYS5yK2IucilcbiAgfTtcbiAgY29uc3QgY29vbGRvd24gPSAoZnVuY3Rpb24oKXtcbiAgICBjb25zdCBtYXAgPSBuZXcgTWFwKCk7XG4gICAgY29uc3QgcmVhZHk9KGtleSxtcyk9PnsgY29uc3QgdD1ub3coKTsgaWYoIW1hcC5oYXMoa2V5KXx8dC1tYXAuZ2V0KGtleSk+PW1zKXsgbWFwLnNldChrZXksdCk7IHJldHVybiB0cnVlO30gcmV0dXJuIGZhbHNlOyB9O1xuICAgIHJldHVybiB7IHJlYWR5IH07XG4gIH0pKCk7XG4gIGNvbnN0IHRpbWVycyA9IChmdW5jdGlvbigpe1xuICAgIGNvbnN0IGxpc3Q9W107XG4gICAgY29uc3QgYWZ0ZXI9KG1zLGZuKT0+eyBjb25zdCB0PW5vdygpK21zOyBsaXN0LnB1c2goe3QsZm59KTsgfTtcbiAgICBjb25zdCB0aWNrPSgpPT57IGNvbnN0IHQ9bm93KCk7IGZvcihsZXQgaT1saXN0Lmxlbmd0aC0xO2k+PTA7aS0tKXsgaWYodD49bGlzdFtpXS50KXsgbGlzdFtpXS5mbigpOyBsaXN0LnNwbGljZShpLDEpO30gfSB9O1xuICAgIHJldHVybiB7IGFmdGVyLCB0aWNrIH07XG4gIH0pKCk7XG4gIGNvbnN0IHBhcnRpY2xlcyA9IChmdW5jdGlvbigpe1xuICAgIGNvbnN0IGxpc3Q9W107XG4gICAgY29uc3Qgc3Bhd249KHgseSxjb3VudD0yMCk9PnsgZm9yKGxldCBpPTA7aTxjb3VudDtpKyspeyBsaXN0LnB1c2goe3gseSx2eDpyYW5kKC0xLDEpLHZ5OnJhbmQoLTEsMSksbGlmZTpyYW5kKDAuNCwxKX0pO30gfTtcbiAgICBjb25zdCB1cGRhdGU9KGR0KT0+eyBmb3IoY29uc3QgcCBvZiBsaXN0KXsgcC54Kz1wLnZ4KmR0KjYwOyBwLnkrPXAudnkqZHQqNjA7IHAubGlmZS09ZHQ7IH0gfTtcbiAgICBjb25zdCBkcmF3PShjdHgpPT57IGZvcihjb25zdCBwIG9mIGxpc3QpeyBpZihwLmxpZmU8PTApIGNvbnRpbnVlOyBjdHguZ2xvYmFsQWxwaGE9TWF0aC5tYXgoMCxwLmxpZmUpOyBjdHguZmlsbFJlY3QocC54LHAueSwyLDIpO30gY3R4Lmdsb2JhbEFscGhhPTE7IH07XG4gICAgY29uc3QgcHJ1bmU9KCk9PnsgZm9yKGxldCBpPWxpc3QubGVuZ3RoLTE7aT49MDtpLS0peyBpZihsaXN0W2ldLmxpZmU8PTApIGxpc3Quc3BsaWNlKGksMSk7fSB9O1xuICAgIHJldHVybiB7IHNwYXduLCB1cGRhdGUsIGRyYXcsIHBydW5lLCBsaXN0IH07XG4gIH0pKCk7XG4gIGNvbnN0IHBzZXVkbzNkID0ge1xuICAgIHByb2plY3Q6KHB0LGNhbSk9PnsgY29uc3Qgej1wdC56LShjYW0uenx8MCk7IGNvbnN0IHNjYWxlPShjYW0uZm92fHw0MDApLyh6fHwxKTsgcmV0dXJuIHsgeDoocHQueC0oY2FtLnh8fDApKSpzY2FsZSsoY2FtLmN4fHwwKSwgeToocHQueS0oY2FtLnl8fDApKSpzY2FsZSsoY2FtLmN5fHwwKSwgc2NhbGUgfTsgfVxuICB9O1xuICBjb25zdCBjb2xvciA9IHtcbiAgICBoZXhUb1JnYjooaGV4KT0+eyBjb25zdCBoPWhleC5yZXBsYWNlKCcjJywnJyk7IGNvbnN0IGJpZ2ludD1wYXJzZUludChoLDE2KTsgcmV0dXJuIHtyOihiaWdpbnQ+PjE2KSYyNTUsZzooYmlnaW50Pj44KSYyNTUsYjpiaWdpbnQmMjU1fTsgfSxcbiAgICByZ2JUb0hleDoocixnLGIpPT4nIycrW3IsZyxiXS5tYXAodj0+di50b1N0cmluZygxNikucGFkU3RhcnQoMiwnMCcpKS5qb2luKCcnKSxcbiAgICBsZXJwOihhLGIsdCk9Pih7IHI6TWF0aC5yb3VuZChhLnIrKGIuci1hLnIpKnQpLCBnOk1hdGgucm91bmQoYS5nKyhiLmctYS5nKSp0KSwgYjpNYXRoLnJvdW5kKGEuYisoYi5iLWEuYikqdCkgfSlcbiAgfTtcbiAgY29uc3QgdGV4dCA9IHtcbiAgICB3cmFwOihjdHgsdGV4dCxtYXhXaWR0aE9yWCx5LG1heWJlVyxtYXliZUxpbmVIKT0+e1xuICAgICAgaWYgKHR5cGVvZiBtYXhXaWR0aE9yWCA9PT0gJ251bWJlcicgJiYgdHlwZW9mIHkgPT09ICdudW1iZXInICYmIHR5cGVvZiBtYXliZVcgPT09ICdudW1iZXInKSB7XG4gICAgICAgIGNvbnN0IHggPSBtYXhXaWR0aE9yWDtcbiAgICAgICAgY29uc3QgbWF4VyA9IG1heWJlVztcbiAgICAgICAgY29uc3QgbGluZUggPSB0eXBlb2YgbWF5YmVMaW5lSCA9PT0gJ251bWJlcicgPyBtYXliZUxpbmVIIDogMTg7XG4gICAgICAgIGNvbnN0IGxpbmVzID0gdGV4dFdyYXAoY3R4LCB0ZXh0LCBtYXhXKTtcbiAgICAgICAgbGluZXMuZm9yRWFjaCgobG4saSk9PmN0eC5maWxsVGV4dChsbix4LHkraSpsaW5lSCkpO1xuICAgICAgICByZXR1cm4gbGluZXM7XG4gICAgICB9XG4gICAgICByZXR1cm4gdGV4dFdyYXAoY3R4LCB0ZXh0LCBtYXhXaWR0aE9yWCk7XG4gICAgfVxuICB9O1xuICBmdW5jdGlvbiB0ZXh0V3JhcChjdHgsIHR4dCwgbWF4V2lkdGgpe1xuICAgIGNvbnN0IHdvcmRzPVN0cmluZyh0eHR8fCcnKS5zcGxpdCgnICcpOyBsZXQgbGluZT0nJzsgY29uc3QgbGluZXM9W107XG4gICAgZm9yKGNvbnN0IHcgb2Ygd29yZHMpeyBjb25zdCB0ZXN0PWxpbmUrdysnICc7IGlmKGN0eC5tZWFzdXJlVGV4dCh0ZXN0KS53aWR0aD5tYXhXaWR0aCl7IGxpbmVzLnB1c2gobGluZS50cmltKCkpOyBsaW5lPXcrJyAnOyB9IGVsc2UgeyBsaW5lPXRlc3Q7IH0gfVxuICAgIGxpbmVzLnB1c2gobGluZS50cmltKCkpOyByZXR1cm4gbGluZXM7XG4gIH1cbiAgY29uc3Qgcm5nID0gKGZ1bmN0aW9uKCl7XG4gICAgbGV0IHNlZWQgPSAxMjM0NTY3O1xuICAgIGNvbnN0IHNldFNlZWQgPSAocyk9Pnsgc2VlZCA9IHM+Pj4wOyB9O1xuICAgIGNvbnN0IG5leHQgPSAoKT0+eyBzZWVkID0gKHNlZWQqMTY2NDUyNSsxMDEzOTA0MjIzKT4+PjA7IHJldHVybiBzZWVkLzQyOTQ5NjcyOTY7IH07XG4gICAgcmV0dXJuIHsgc2V0U2VlZCwgbmV4dCB9O1xuICB9KSgpO1xuICBjb25zdCBldmVudEJ1cyA9IChmdW5jdGlvbigpe1xuICAgIGNvbnN0IG1hcD1uZXcgTWFwKCk7XG4gICAgY29uc3Qgb249KGV2dCxmbik9PnsgaWYoIW1hcC5oYXMoZXZ0KSkgbWFwLnNldChldnQsW10pOyBtYXAuZ2V0KGV2dCkucHVzaChmbik7IH07XG4gICAgY29uc3QgZW1pdD0oZXZ0LGRhdGEpPT57IChtYXAuZ2V0KGV2dCl8fFtdKS5mb3JFYWNoKGZuPT5mbihkYXRhKSk7IH07XG4gICAgcmV0dXJuIHsgb24sIGVtaXQgfTtcbiAgfSkoKTtcbiAgY29uc3QgZnNtID0gKGluaXRpYWwpPT57IGxldCBzdGF0ZT1pbml0aWFsOyBjb25zdCB0cmFuc2l0aW9ucz1uZXcgTWFwKCk7IGNvbnN0IG9uPShmcm9tLHRvLGZuKT0+dHJhbnNpdGlvbnMuc2V0KGZyb20rJz4nK3RvLGZuKTsgY29uc3Qgc2V0PSh0byk9PnsgY29uc3QgZm49dHJhbnNpdGlvbnMuZ2V0KHN0YXRlKyc+Jyt0byk7IHN0YXRlPXRvOyBpZihmbikgZm4oKTsgfTsgY29uc3QgZ2V0PSgpPT5zdGF0ZTsgcmV0dXJuIHsgb24sIHNldCwgZ2V0IH07IH07XG4gIGNvbnN0IHNwcml0ZXMgPSB7XG4gICAgZHJhdzooY3R4LGltZyxmcmFtZSxmdyxmaCx4LHksc2NhbGU9MSk9PnsgY29uc3Qgc3g9ZnJhbWUqZnc7IGN0eC5kcmF3SW1hZ2UoaW1nLHN4LDAsZncsZmgseCx5LGZ3KnNjYWxlLGZoKnNjYWxlKTsgfVxuICB9O1xuICBjb25zdCBwYXRoZmluZGluZyA9IHtcbiAgICBhU3RhcjooZ3JpZCxzdGFydCxlbmQpPT57IGNvbnN0IG9wZW49W3N0YXJ0XTsgY29uc3QgY2FtZT1uZXcgTWFwKCk7IGNvbnN0IGc9bmV3IE1hcCgpOyBjb25zdCBmPW5ldyBNYXAoKTsgY29uc3Qga2V5PShwKT0+cC54KycsJytwLnk7IGNvbnN0IGg9KGEsYik9Pk1hdGguYWJzKGEueC1iLngpK01hdGguYWJzKGEueS1iLnkpOyBnLnNldChrZXkoc3RhcnQpLDApOyBmLnNldChrZXkoc3RhcnQpLGgoc3RhcnQsZW5kKSk7IHdoaWxlKG9wZW4ubGVuZ3RoKXsgb3Blbi5zb3J0KChhLGIpPT5mLmdldChrZXkoYSkpLWYuZ2V0KGtleShiKSkpOyBjb25zdCBjdXJyZW50PW9wZW4uc2hpZnQoKTsgaWYoY3VycmVudC54PT09ZW5kLngmJmN1cnJlbnQueT09PWVuZC55KXsgY29uc3QgcGF0aD1bY3VycmVudF07IGxldCBrPWtleShjdXJyZW50KTsgd2hpbGUoY2FtZS5oYXMoaykpeyBjb25zdCBwPWNhbWUuZ2V0KGspOyBwYXRoLnB1c2gocCk7IGs9a2V5KHApOyB9IHJldHVybiBwYXRoLnJldmVyc2UoKTsgfSBjb25zdCBkaXJzPVt7eDoxLHk6MH0se3g6LTEseTowfSx7eDowLHk6MX0se3g6MCx5Oi0xfV07IGZvcihjb25zdCBkIG9mIGRpcnMpeyBjb25zdCBueD17eDpjdXJyZW50LngrZC54LHk6Y3VycmVudC55K2QueX07IGlmKGdyaWRbbngueV0/LltueC54XT09PTEpIGNvbnRpbnVlOyBjb25zdCB0ZW50YXRpdmU9KGcuZ2V0KGtleShjdXJyZW50KSl8fDApKzE7IGNvbnN0IG5rPWtleShueCk7IGlmKHRlbnRhdGl2ZSA8IChnLmdldChuayk/P0luZmluaXR5KSl7IGNhbWUuc2V0KG5rLGN1cnJlbnQpOyBnLnNldChuayx0ZW50YXRpdmUpOyBmLnNldChuayx0ZW50YXRpdmUraChueCxlbmQpKTsgaWYoIW9wZW4uZmluZChwPT5wLng9PT1ueC54JiZwLnk9PT1ueC55KSkgb3Blbi5wdXNoKG54KTsgfSB9IH0gcmV0dXJuIFtdOyB9XG4gIH07XG4gIGNvbnN0IG5hdm1lc2ggPSB7XG4gICAgYnVpbGQ6KGdyaWQsZGlhZz1mYWxzZSk9Pih7IGdyaWQsIGRpYWcgfSksXG4gICAgbmVpZ2hib3JzOihtZXNoLG5vZGUpPT57IGNvbnN0IGRpcnM9bWVzaC5kaWFnP1t7eDoxLHk6MH0se3g6LTEseTowfSx7eDowLHk6MX0se3g6MCx5Oi0xfSx7eDoxLHk6MX0se3g6LTEseToxfSx7eDoxLHk6LTF9LHt4Oi0xLHk6LTF9XTpbe3g6MSx5OjB9LHt4Oi0xLHk6MH0se3g6MCx5OjF9LHt4OjAseTotMX1dOyByZXR1cm4gZGlycy5tYXAoZD0+KHt4Om5vZGUueCtkLngseTpub2RlLnkrZC55fSkpLmZpbHRlcihuPT5tZXNoLmdyaWRbbi55XT8uW24ueF0hPT0xKTsgfSxcbiAgICBsaW5lT2ZTaWdodDoobWVzaCxhLGIpPT57IGxldCB4MD1hLngseTA9YS55LHgxPWIueCx5MT1iLnk7IGNvbnN0IGR4PU1hdGguYWJzKHgxLXgwKSwgZHk9TWF0aC5hYnMoeTEteTApOyBsZXQgc3g9eDA8eDE/MTotMSwgc3k9eTA8eTE/MTotMTsgbGV0IGVycj1keC1keTsgd2hpbGUodHJ1ZSl7IGlmKG1lc2guZ3JpZFt5MF0/Llt4MF09PT0xKSByZXR1cm4gZmFsc2U7IGlmKHgwPT09eDEgJiYgeTA9PT15MSkgYnJlYWs7IGNvbnN0IGUyPTIqZXJyOyBpZihlMj4tZHkpeyBlcnItPWR5OyB4MCs9c3g7IH0gaWYoZTI8ZHgpeyBlcnIrPWR4OyB5MCs9c3k7IH0gfSByZXR1cm4gdHJ1ZTsgfSxcbiAgICBzbW9vdGg6KHBhdGgsbWVzaCk9PnsgaWYocGF0aC5sZW5ndGg8PTIpIHJldHVybiBwYXRoOyBjb25zdCBvdXQ9W3BhdGhbMF1dOyBsZXQgaT0wOyB3aGlsZShpPHBhdGgubGVuZ3RoLTEpeyBsZXQgaj1wYXRoLmxlbmd0aC0xOyBmb3IoO2o+aSsxO2otLSl7IGlmKG5hdm1lc2gubGluZU9mU2lnaHQobWVzaCxwYXRoW2ldLHBhdGhbal0pKSBicmVhazsgfSBvdXQucHVzaChwYXRoW2pdKTsgaT1qOyB9IHJldHVybiBvdXQ7IH0sXG4gICAgZmluZFBhdGg6KG1lc2gsc3RhcnQsZW5kKT0+eyBjb25zdCBwPXBhdGhmaW5kaW5nLmFTdGFyKG1lc2guZ3JpZCxzdGFydCxlbmQpOyByZXR1cm4gbmF2bWVzaC5zbW9vdGgocCxtZXNoKTsgfVxuICB9O1xuICBjb25zdCBsZXZlbEdyYW1tYXIgPSB7XG4gICAgZXhwYW5kOihydWxlcyxheGlvbSxkZXB0aD0zKT0+eyBsZXQgc3RyPWF4aW9tOyBmb3IobGV0IGk9MDtpPGRlcHRoO2krKyl7IGxldCBvdXQ9XCJcIjsgZm9yKGNvbnN0IGNoIG9mIHN0cil7IGNvbnN0IHJ1bGU9cnVsZXNbY2hdOyBpZighcnVsZSl7IG91dCs9Y2g7IGNvbnRpbnVlOyB9IGlmKEFycmF5LmlzQXJyYXkocnVsZSkpeyBjb25zdCBwaWNrPXJ1bGVbTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpKnJ1bGUubGVuZ3RoKV07IG91dCs9cGljazsgfSBlbHNlIGlmKHR5cGVvZiBydWxlPT09J29iamVjdCcpeyBjb25zdCBlbnRyaWVzPU9iamVjdC5lbnRyaWVzKHJ1bGUpOyBjb25zdCB0b3RhbD1lbnRyaWVzLnJlZHVjZSgocyxbLHddKT0+cytOdW1iZXIod3x8MCksMCk7IGxldCByPU1hdGgucmFuZG9tKCkqdG90YWw7IGZvcihjb25zdCBbc3ltLHddIG9mIGVudHJpZXMpeyByLT1OdW1iZXIod3x8MCk7IGlmKHI8PTApeyBvdXQrPXN5bTsgYnJlYWs7IH0gfSB9IGVsc2UgeyBvdXQrPVN0cmluZyhydWxlKTsgfSB9IHN0cj1vdXQ7IH0gcmV0dXJuIHN0cjsgfSxcbiAgICB0b0dyaWQ6KHN0cix3LHdhbGw9JyMnKT0+eyBjb25zdCByb3dzPVtdOyBmb3IobGV0IGk9MDtpPHN0ci5sZW5ndGg7aSs9dyl7IHJvd3MucHVzaChzdHIuc2xpY2UoaSxpK3cpLnNwbGl0KFwiXCIpLm1hcChjPT5jPT09d2FsbD8xOjApKTsgfSByZXR1cm4gcm93czsgfSxcbiAgICBpbnRlcnByZXQ6KHN0cixoYW5kbGVycyk9PnsgY29uc3Qgc3RhdGU9eyB4OjAseTowLGRpcjowLHN0YWNrOltdIH07IGZvcihjb25zdCBjaCBvZiBzdHIpeyBpZihoYW5kbGVyc1tjaF0pIGhhbmRsZXJzW2NoXShzdGF0ZSk7IH0gcmV0dXJuIHN0YXRlOyB9XG4gIH07XG4gIGNvbnN0IGF1ZGlvU2VxID0gKGZ1bmN0aW9uKCl7XG4gICAgbGV0IGN0eDtcbiAgICBjb25zdCBlbnN1cmU9KCk9PmN0eHx8KGN0eD1uZXcgKHdpbmRvdy5BdWRpb0NvbnRleHR8fHdpbmRvdy53ZWJraXRBdWRpb0NvbnRleHQpKCkpO1xuICAgIGNvbnN0IG5vdGVUb0ZyZXE9KG4pPT57IGNvbnN0IEE0PTQ0MDsgY29uc3QgbWFwPXsnQyc6LTksJ0MjJzotOCwnRCc6LTcsJ0QjJzotNiwnRSc6LTUsJ0YnOi00LCdGIyc6LTMsJ0cnOi0yLCdHIyc6LTEsJ0EnOjAsJ0EjJzoxLCdCJzoyfTsgY29uc3QgbT1uLm1hdGNoKC8oW0EtR10jPykoXFxkKS8pOyBpZighbSkgcmV0dXJuIDQ0MDsgY29uc3Qgc2VtPW1hcFttWzFdXSsoTnVtYmVyKG1bMl0pLTQpKjEyOyByZXR1cm4gQTQqTWF0aC5wb3coMixzZW0vMTIpOyB9O1xuICAgIGNvbnN0IHBsYXk9KHBhdHRlcm4sYnBtPTEyMCk9PnsgY29uc3QgYz1lbnN1cmUoKTsgY29uc3QgYmVhdD02MC9icG07IGxldCB0PWMuY3VycmVudFRpbWU7IGZvcihjb25zdCBub3RlIG9mIHBhdHRlcm4peyBjb25zdCBvPWMuY3JlYXRlT3NjaWxsYXRvcigpOyBjb25zdCBnPWMuY3JlYXRlR2FpbigpOyBvLnR5cGU9bm90ZS50eXBlfHwnc2luZSc7IG8uZnJlcXVlbmN5LnZhbHVlPW5vdGUuZnJlcXx8IChub3RlLm5vdGU/bm90ZVRvRnJlcShub3RlLm5vdGUpOjQ0MCk7IGcuZ2Fpbi52YWx1ZT1ub3RlLnZvbHx8MC4xNTsgby5jb25uZWN0KGcpOyBnLmNvbm5lY3QoYy5kZXN0aW5hdGlvbik7IG8uc3RhcnQodCk7IG8uc3RvcCh0Kyhub3RlLmR1cnx8MC4yKSk7IHQrPWJlYXQqKG5vdGUuYmVhdHN8fDEpOyB9IH07XG4gICAgY29uc3QgdHJhY2s9KHN0ZXBzLGJwbT0xMjApPT57IGNvbnN0IGM9ZW5zdXJlKCk7IGNvbnN0IGJlYXQ9NjAvYnBtOyBjb25zdCBzdGFydD1jLmN1cnJlbnRUaW1lOyBzdGVwcy5mb3JFYWNoKChzLGkpPT57IGlmKCFzKSByZXR1cm47IGNvbnN0IG89Yy5jcmVhdGVPc2NpbGxhdG9yKCk7IGNvbnN0IGc9Yy5jcmVhdGVHYWluKCk7IG8udHlwZT1zLnR5cGV8fCdzcXVhcmUnOyBvLmZyZXF1ZW5jeS52YWx1ZT1zLmZyZXF8fCAocy5ub3RlP25vdGVUb0ZyZXEocy5ub3RlKTo0NDApOyBnLmdhaW4udmFsdWU9cy52b2x8fDAuMTsgby5jb25uZWN0KGcpOyBnLmNvbm5lY3QoYy5kZXN0aW5hdGlvbik7IG8uc3RhcnQoc3RhcnQraSpiZWF0KTsgby5zdG9wKHN0YXJ0K2kqYmVhdCsocy5kdXJ8fDAuMikpOyB9KTsgfTtcbiAgICByZXR1cm4geyBwbGF5LCB0cmFjaywgbm90ZVRvRnJlcSB9O1xuICB9KSgpO1xuICBjb25zdCB1aSA9IHtcbiAgICBidXR0b246KHRleHQsIHgsIHksIHcsIGgsIG9uQ2xpY2spPT4oeyB0eXBlOididXR0b24nLCB0ZXh0LCB4LHksdyxoLG9uQ2xpY2ssaG92ZXI6ZmFsc2UgfSksXG4gICAgc2xpZGVyOihsYWJlbCx4LHksdyxtaW4sbWF4LHZhbHVlLG9uQ2hhbmdlKT0+KHsgdHlwZTonc2xpZGVyJywgbGFiZWwseCx5LHcsaDoyNCxtaW4sbWF4LHZhbHVlLG9uQ2hhbmdlIH0pLFxuICAgIGNoZWNrYm94OihsYWJlbCx4LHksdmFsdWUsb25DaGFuZ2UpPT4oeyB0eXBlOidjaGVja2JveCcsIGxhYmVsLHgseSx3OjE4LGg6MTgsdmFsdWUsb25DaGFuZ2UgfSksXG4gICAgZHJhdzooY3R4LCB3aWRnZXRzKT0+eyB3aWRnZXRzLmZvckVhY2godz0+eyBpZih3LnR5cGU9PT0nYnV0dG9uJyl7IGN0eC5maWxsU3R5bGU9dy5ob3Zlcj8ncmdiYSgyNTUsMjU1LDI1NSwwLjIpJzoncmdiYSgwLDAsMCwwLjUpJzsgY3R4LmZpbGxSZWN0KHcueCx3Lnksdy53LHcuaCk7IGN0eC5maWxsU3R5bGU9JyNmZmYnOyBjdHguZmlsbFRleHQody50ZXh0LHcueCs4LHcueSt3LmgvMis0KTsgfSBpZih3LnR5cGU9PT0nc2xpZGVyJyl7IGN0eC5maWxsU3R5bGU9J3JnYmEoMCwwLDAsMC41KSc7IGN0eC5maWxsUmVjdCh3Lngsdy55LHcudyx3LmgpOyBjb25zdCB0PSh3LnZhbHVlLXcubWluKS8ody5tYXgtdy5taW4pOyBjdHguZmlsbFN0eWxlPScjN2RmOWZmJzsgY3R4LmZpbGxSZWN0KHcueCwgdy55LCB3LncqdCwgdy5oKTsgY3R4LmZpbGxTdHlsZT0nI2ZmZic7IGN0eC5maWxsVGV4dCh3LmxhYmVsKyc6ICcrdy52YWx1ZS50b0ZpeGVkKDEpLCB3LngrNCwgdy55LTQpOyB9IGlmKHcudHlwZT09PSdjaGVja2JveCcpeyBjdHguc3Ryb2tlU3R5bGU9JyNmZmYnOyBjdHguc3Ryb2tlUmVjdCh3Lngsdy55LHcudyx3LmgpOyBpZih3LnZhbHVlKXsgY3R4LmZpbGxTdHlsZT0nIzdkZjlmZic7IGN0eC5maWxsUmVjdCh3LngrMyx3LnkrMyx3LnctNix3LmgtNik7IH0gY3R4LmZpbGxTdHlsZT0nI2ZmZic7IGN0eC5maWxsVGV4dCh3LmxhYmVsLCB3Lngrdy53KzYsIHcueSt3LmgtMik7IH0gfSk7IH0sXG4gICAgaGl0Oih3LCBteCwgbXkpPT5teD49dy54JiZteDw9dy54K3cudyYmbXk+PXcueSYmbXk8PXcueSt3LmgsXG4gICAgaGFuZGxlQ2xpY2s6KHdpZGdldHMsbXgsbXkpPT57IHdpZGdldHMuZm9yRWFjaCh3PT57IGlmKHVpLmhpdCh3LG14LG15KSl7IGlmKHcudHlwZT09PSdidXR0b24nICYmIHcub25DbGljaykgdy5vbkNsaWNrKCk7IGlmKHcudHlwZT09PSdjaGVja2JveCcgJiYgdy5vbkNoYW5nZSl7IHcudmFsdWU9IXcudmFsdWU7IHcub25DaGFuZ2Uody52YWx1ZSk7IH0gfSB9KTsgfSxcbiAgICBoYW5kbGVEcmFnOih3aWRnZXRzLG14LG15KT0+eyB3aWRnZXRzLmZvckVhY2godz0+eyBpZih3LnR5cGU9PT0nc2xpZGVyJyAmJiB1aS5oaXQodyxteCxteSkpeyBjb25zdCB0PU1hdGgubWF4KDAsTWF0aC5taW4oMSwobXgtdy54KS93LncpKTsgdy52YWx1ZT13Lm1pbiArICh3Lm1heC13Lm1pbikqdDsgaWYody5vbkNoYW5nZSkgdy5vbkNoYW5nZSh3LnZhbHVlKTsgfSB9KTsgfVxuICB9O1xuICBjb25zdCBlY3MgPSAoZnVuY3Rpb24oKXtcbiAgICBsZXQgbmV4dElkPTE7XG4gICAgY29uc3QgZW50aXRpZXM9bmV3IFNldCgpO1xuICAgIGNvbnN0IGNvbXBvbmVudHM9bmV3IE1hcCgpO1xuICAgIGNvbnN0IHN5c3RlbXM9W107XG4gICAgY29uc3QgY3JlYXRlPSgpPT57IGNvbnN0IGlkPW5leHRJZCsrOyBlbnRpdGllcy5hZGQoaWQpOyByZXR1cm4gaWQ7IH07XG4gICAgY29uc3QgYWRkPShpZCxuYW1lLGRhdGEpPT57IGlmKCFjb21wb25lbnRzLmhhcyhuYW1lKSkgY29tcG9uZW50cy5zZXQobmFtZSxuZXcgTWFwKCkpOyBjb21wb25lbnRzLmdldChuYW1lKS5zZXQoaWQsZGF0YSk7IHJldHVybiBkYXRhOyB9O1xuICAgIGNvbnN0IGdldD0oaWQsbmFtZSk9PmNvbXBvbmVudHMuZ2V0KG5hbWUpPy5nZXQoaWQpO1xuICAgIGNvbnN0IGhhcz0oaWQsbmFtZSk9PmNvbXBvbmVudHMuZ2V0KG5hbWUpPy5oYXMoaWQpO1xuICAgIGNvbnN0IHJlbW92ZT0oaWQpPT57IGVudGl0aWVzLmRlbGV0ZShpZCk7IGZvcihjb25zdCBtYXAgb2YgY29tcG9uZW50cy52YWx1ZXMoKSl7IG1hcC5kZWxldGUoaWQpO30gfTtcbiAgICBjb25zdCBxdWVyeT0obmFtZXMpPT57IGNvbnN0IHNldHM9bmFtZXMubWFwKG49PmNvbXBvbmVudHMuZ2V0KG4pfHxuZXcgTWFwKCkpOyByZXR1cm4gWy4uLmVudGl0aWVzXS5maWx0ZXIoaWQ9Pm5hbWVzLmV2ZXJ5KG49PnNldHNbbmFtZXMuaW5kZXhPZihuKV0uaGFzKGlkKSkpOyB9O1xuICAgIGNvbnN0IHN5c3RlbT0obmFtZXMsZm4pPT57IHN5c3RlbXMucHVzaCh7bmFtZXMsZm59KTsgfTtcbiAgICBjb25zdCB1cGRhdGU9KGR0KT0+eyBmb3IoY29uc3QgcyBvZiBzeXN0ZW1zKXsgY29uc3QgaWRzPXF1ZXJ5KHMubmFtZXMpOyBmb3IoY29uc3QgaWQgb2YgaWRzKXsgY29uc3QgY29tcHM9cy5uYW1lcy5tYXAobj0+Z2V0KGlkLG4pKTsgcy5mbihpZCwgLi4uY29tcHMsIGR0KTsgfSB9IH07XG4gICAgcmV0dXJuIHsgY3JlYXRlLCBhZGQsIGdldCwgaGFzLCByZW1vdmUsIHF1ZXJ5LCBzeXN0ZW0sIHVwZGF0ZSwgY29tcG9uZW50cywgZW50aXRpZXMgfTtcbiAgfSkoKTtcbiAgY29uc3QgdGVycmFpbiA9IHtcbiAgICBwZXJsaW4yOih4LHkpPT57IGNvbnN0IHM9TWF0aC5zaW4oeCoxMi45ODk4K3kqNzguMjMzKSo0Mzc1OC41NDUzOyByZXR1cm4gcy1NYXRoLmZsb29yKHMpOyB9LFxuICAgIGhlaWdodE1hcDoodyxoLHNjYWxlPTAuMSk9PnsgY29uc3QgbWFwPVtdOyBmb3IobGV0IHk9MDt5PGg7eSsrKXsgY29uc3Qgcm93PVtdOyBmb3IobGV0IHg9MDt4PHc7eCsrKXsgcm93LnB1c2godGVycmFpbi5wZXJsaW4yKHgqc2NhbGUseSpzY2FsZSkpOyB9IG1hcC5wdXNoKHJvdyk7fSByZXR1cm4gbWFwOyB9XG4gIH07XG4gIGNvbnN0IGNhbWVyYSA9IHtcbiAgICBzaGFrZTooc3RhdGUsc3RyZW5ndGg9NixkZWNheT0wLjkpPT57IHN0YXRlLnNoYWtlPSB7c3RyZW5ndGgsZGVjYXkseDowLHk6MH07IH0sXG4gICAgYXBwbHlTaGFrZTooc3RhdGUsY3R4KT0+eyBpZighc3RhdGUuc2hha2UpIHJldHVybjsgc3RhdGUuc2hha2UueCA9IHJhbmQoLXN0YXRlLnNoYWtlLnN0cmVuZ3RoLHN0YXRlLnNoYWtlLnN0cmVuZ3RoKTsgc3RhdGUuc2hha2UueSA9IHJhbmQoLXN0YXRlLnNoYWtlLnN0cmVuZ3RoLHN0YXRlLnNoYWtlLnN0cmVuZ3RoKTsgY3R4LnRyYW5zbGF0ZShzdGF0ZS5zaGFrZS54LHN0YXRlLnNoYWtlLnkpOyBzdGF0ZS5zaGFrZS5zdHJlbmd0aCo9c3RhdGUuc2hha2UuZGVjYXk7IGlmKHN0YXRlLnNoYWtlLnN0cmVuZ3RoPDAuMykgc3RhdGUuc2hha2U9bnVsbDsgfVxuICB9O1xuICBjb25zdCB3ZWJnbCA9IHtcbiAgICBjcmVhdGU6KGNhbnZhcyk9PmNhbnZhcy5nZXRDb250ZXh0KCd3ZWJnbCcpfHxjYW52YXMuZ2V0Q29udGV4dCgnZXhwZXJpbWVudGFsLXdlYmdsJylcbiAgfTtcbiAgY29uc3QgZ2FtZXBhZCA9IChmdW5jdGlvbigpe1xuICAgIGNvbnN0IHN0YXRlPXsgYXhlczpbXSwgYnV0dG9uczpbXSB9O1xuICAgIGNvbnN0IHBvbGw9KCk9PnsgY29uc3QgZ3A9bmF2aWdhdG9yLmdldEdhbWVwYWRzPy4oKVswXTsgaWYoIWdwKSByZXR1cm4gc3RhdGU7IHN0YXRlLmF4ZXM9Z3AuYXhlczsgc3RhdGUuYnV0dG9ucz1ncC5idXR0b25zLm1hcChiPT5iLnByZXNzZWQpOyByZXR1cm4gc3RhdGU7IH07XG4gICAgcmV0dXJuIHsgcG9sbCwgc3RhdGUgfTtcbiAgfSkoKTtcbiAgY29uc3QgYXNzZXRzID0ge1xuICAgIGltYWdlOihzcmMpPT5uZXcgUHJvbWlzZSgocmVzLHJlaik9PnsgY29uc3QgaW1nPW5ldyBJbWFnZSgpOyBpbWcub25sb2FkPSgpPT5yZXMoaW1nKTsgaW1nLm9uZXJyb3I9cmVqOyBpbWcuc3JjPXNyYzsgfSksXG4gICAgYXVkaW86KHNyYyk9Pm5ldyBQcm9taXNlKChyZXMscmVqKT0+eyBjb25zdCBhPW5ldyBBdWRpbygpOyBhLm9uY2FucGxheXRocm91Z2g9KCk9PnJlcyhhKTsgYS5vbmVycm9yPXJlajsgYS5zcmM9c3JjOyB9KVxuICB9O1xuICBjb25zdCBncmlkID0ge1xuICAgIG1ha2U6KHcsaCxmaWxsPTApPT5BcnJheS5mcm9tKHtsZW5ndGg6aH0sKCk9PkFycmF5LmZyb20oe2xlbmd0aDp3fSwoKT0+ZmlsbCkpLFxuICAgIGluQm91bmRzOihnLHgseSk9Pnk+PTAmJnk8Zy5sZW5ndGgmJng+PTAmJng8Z1swXS5sZW5ndGhcbiAgfTtcbiAgY29uc3QgY2FtZXJhMmQgPSB7XG4gICAgd29ybGRUb1NjcmVlbjooY2FtLHgseSk9Pih7IHg6IHgtY2FtLngsIHk6IHktY2FtLnkgfSksXG4gICAgc2NyZWVuVG9Xb3JsZDooY2FtLHgseSk9Pih7IHg6IHgrY2FtLngsIHk6IHkrY2FtLnkgfSlcbiAgfTtcbiAgY29uc3QgbWV0cmljcyA9IChmdW5jdGlvbigpe1xuICAgIGxldCBsYXN0PW5vdygpLCBmcHM9MDtcbiAgICBjb25zdCB0aWNrPSgpPT57IGNvbnN0IHQ9bm93KCk7IGZwcz0xMDAwLyh0LWxhc3QpOyBsYXN0PXQ7IHJldHVybiBmcHM7IH07XG4gICAgcmV0dXJuIHsgdGljaywgZ2V0OigpPT5mcHMgfTtcbiAgfSkoKTtcbiAgY29uc3QgbG9nZ2VyID0gKGZ1bmN0aW9uKCl7XG4gICAgY29uc3QgbG9ncz1bXTsgY29uc3QgcHVzaD0obXNnKT0+eyBsb2dzLnVuc2hpZnQoeyBtc2csIHQ6bm93KCkgfSk7IGlmKGxvZ3MubGVuZ3RoPjIwKSBsb2dzLnBvcCgpOyB9O1xuICAgIHJldHVybiB7IGxvZ3MsIHB1c2ggfTtcbiAgfSkoKTtcbiAgY29uc3QgZGlhbG9ndWUgPSAoZnVuY3Rpb24oKXtcbiAgICBjb25zdCBsaW5lcz1bXTsgY29uc3Qgc2F5PSh0ZXh0KT0+bGluZXMucHVzaCh0ZXh0KTsgY29uc3QgbmV4dD0oKT0+bGluZXMuc2hpZnQoKTtcbiAgICByZXR1cm4geyBzYXksIG5leHQsIGxpbmVzIH07XG4gIH0pKCk7XG4gIGNvbnN0IHRpbWVsaW5lID0gKGZ1bmN0aW9uKCl7XG4gICAgY29uc3Qgc3RlcHM9W107IGNvbnN0IGFkZD0oYXQsZm4pPT5zdGVwcy5wdXNoKHthdCxmbixkb25lOmZhbHNlfSk7IGNvbnN0IHJ1bj0odCk9PnsgZm9yKGNvbnN0IHMgb2Ygc3RlcHMpeyBpZighcy5kb25lICYmIHQ+PXMuYXQpeyBzLmRvbmU9dHJ1ZTsgcy5mbigpOyB9IH0gfTtcbiAgICByZXR1cm4geyBhZGQsIHJ1biB9O1xuICB9KSgpO1xuICByZXR1cm4geyBjbGFtcCwgbGVycCwgbWFwLCByYW5kLCBjaG9pY2UsIG5vdywgZWFzaW5nLCB0d2Vlbiwgc3RvcmFnZSwgaW5wdXQsIGF1ZGlvLCBwaHlzaWNzMmQsIGNvb2xkb3duLCB0aW1lcnMsIHBhcnRpY2xlcywgcHNldWRvM2QsIGNvbG9yLCB0ZXh0LCBybmcsIGV2ZW50QnVzLCBmc20sIHNwcml0ZXMsIHBhdGhmaW5kaW5nLCBuYXZtZXNoLCBsZXZlbEdyYW1tYXIsIGF1ZGlvU2VxLCB1aSwgZWNzLCB0ZXJyYWluLCBjYW1lcmEsIHdlYmdsLCBnYW1lcGFkLCBhc3NldHMsIGdyaWQsIGNhbWVyYTJkLCBtZXRyaWNzLCBsb2dnZXIsIGRpYWxvZ3VlLCB0aW1lbGluZSB9O1xufSkoKTtcbi8vIENvbXBhdGliaWxpdHkgc2hpbXMgZm9yIG1vZGVscyB0aGF0IGRvbid0IG5hbWVzcGFjZSBoZWxwZXJzXG4oZnVuY3Rpb24oKXtcbiAgY29uc3QgSyA9IHdpbmRvdy5HYW1lRmFjdG9yeUtpdDtcbiAgaWYgKCFLKSByZXR1cm47XG4gIHdpbmRvdy5jbGFtcCA9IHdpbmRvdy5jbGFtcCB8fCBLLmNsYW1wO1xuICB3aW5kb3cubGVycCA9IHdpbmRvdy5sZXJwIHx8IEsubGVycDtcbiAgd2luZG93Lm1hcCA9IHdpbmRvdy5tYXAgfHwgSy5tYXA7XG4gIHdpbmRvdy5yYW5kID0gd2luZG93LnJhbmQgfHwgSy5yYW5kO1xuICB3aW5kb3cucm5nID0gd2luZG93LnJuZyB8fCBLLnJuZztcbiAgd2luZG93LmNob2ljZSA9IHdpbmRvdy5jaG9pY2UgfHwgSy5jaG9pY2U7XG4gIHdpbmRvdy5ub3cgPSB3aW5kb3cubm93IHx8IEsubm93O1xuICB3aW5kb3cuYXVkaW8gPSB3aW5kb3cuYXVkaW8gfHwgSy5hdWRpbztcbiAgd2luZG93LmlucHV0ID0gd2luZG93LmlucHV0IHx8IEsuaW5wdXQ7XG4gIHdpbmRvdy5zdG9yYWdlID0gd2luZG93LnN0b3JhZ2UgfHwgSy5zdG9yYWdlO1xuICB3aW5kb3cudGV4dCA9IHdpbmRvdy50ZXh0IHx8IEsudGV4dDtcbiAgd2luZG93LnBzZXVkbzNkID0gd2luZG93LnBzZXVkbzNkIHx8IEsucHNldWRvM2Q7XG4gIGNvbnN0IGNhbVN0YXRlID0geyBzaGFrZTogbnVsbCB9O1xuICB3aW5kb3cuY2FtZXJhID0gd2luZG93LmNhbWVyYSB8fCB7XG4gICAgc2hha2U6IChzdHJlbmd0aD02LCBkZWNheT0wLjkpID0+IEsuY2FtZXJhLnNoYWtlKGNhbVN0YXRlLCBzdHJlbmd0aCwgZGVjYXkpLFxuICAgIGFwcGx5U2hha2U6IChjdHgpID0+IEsuY2FtZXJhLmFwcGx5U2hha2UoY2FtU3RhdGUsIGN0eClcbiAgfTtcbiAgd2luZG93LnBhcnRpY2xlcyA9IHdpbmRvdy5wYXJ0aWNsZXMgfHwge1xuICAgIHNwYXduOiAoYSxiLGMpID0+IHtcbiAgICAgIGlmICh0eXBlb2YgYSA9PT0gXCJvYmplY3RcIikge1xuICAgICAgICBjb25zdCBvID0gYSB8fCB7fTtcbiAgICAgICAgSy5wYXJ0aWNsZXMuc3Bhd24oby54IHx8IDAsIG8ueSB8fCAwLCBvLmNvdW50IHx8IDIwKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIEsucGFydGljbGVzLnNwYXduKGEgfHwgMCwgYiB8fCAwLCBjIHx8IDIwKTtcbiAgICAgIH1cbiAgICB9LFxuICAgIHVwZGF0ZTogKGR0KSA9PiB7XG4gICAgICBjb25zdCB2ID0gZHQgPiAxMCA/IGR0IC8gMTAwMCA6IGR0O1xuICAgICAgSy5wYXJ0aWNsZXMudXBkYXRlKHYpO1xuICAgICAgSy5wYXJ0aWNsZXMucHJ1bmUoKTtcbiAgICB9LFxuICAgIGRyYXc6IChjdHgpID0+IEsucGFydGljbGVzLmRyYXcoY3R4KSxcbiAgICBwcnVuZTogKCkgPT4gSy5wYXJ0aWNsZXMucHJ1bmUoKVxuICB9O1xufSkoKTtcbjwvc2NyaXB0PlxuYDtcbiAgICBpZiAoY29kZS5pbmNsdWRlcyhcIndpbmRvdy5HYW1lRmFjdG9yeUtpdFwiKSB8fCBjb2RlLmluY2x1ZGVzKFwiR2FtZUZhY3RvcnlBSSA9IGFzeW5jIGZ1bmN0aW9uXCIpKSByZXR1cm4gY29kZTtcbiAgICBpZiAoY29kZS5pbmNsdWRlcyhcIjwvaGVhZD5cIikpIHJldHVybiBjb2RlLnJlcGxhY2UoXCI8L2hlYWQ+XCIsIGAke2hlbHBlcn08L2hlYWQ+YCk7XG4gICAgcmV0dXJuIGhlbHBlciArIGNvZGU7XG4gIH1cblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGFzeW5jIGZ1bmN0aW9uIGxvYWQoKSB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaChgJHtBUEl9L2dhbWVzLyR7cGFyYW1zLmlkfWApO1xuICAgICAgICBpZiAoIXJlcy5vaykgdGhyb3cgbmV3IEVycm9yKGF3YWl0IHJlcy50ZXh0KCkpO1xuICAgICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzLmpzb24oKTtcbiAgICAgICAgc2V0R2FtZShkYXRhKTtcbiAgICAgICAgc2V0TWFudWFsQ29kZShkYXRhLmNvZGUpO1xuICAgICAgICBjb25zdCB2ZXIgPSBhd2FpdCBmZXRjaChgJHtBUEl9L2dhbWVzLyR7cGFyYW1zLmlkfS92ZXJzaW9uc2ApO1xuICAgICAgICBpZiAodmVyLm9rKSB7XG4gICAgICAgICAgY29uc3QgdmRhdGEgPSBhd2FpdCB2ZXIuanNvbigpO1xuICAgICAgICAgIHNldFZlcnNpb25zKHZkYXRhKTtcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZXJyOiBhbnkpIHtcbiAgICAgICAgc2V0RXJyb3IoZXJyLm1lc3NhZ2UgfHwgXCJGYWlsZWQgdG8gbG9hZCBnYW1lXCIpO1xuICAgICAgfVxuICAgIH1cbiAgICBsb2FkKCk7XG4gIH0sIFtwYXJhbXMuaWRdKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGZ1bmN0aW9uIG9uTWVzc2FnZShldmVudDogTWVzc2FnZUV2ZW50KSB7XG4gICAgICBjb25zdCBkYXRhID0gZXZlbnQuZGF0YTtcbiAgICAgIGlmIChkYXRhICYmIGRhdGEudHlwZSA9PT0gXCJnYW1lX2Vycm9yXCIpIHtcbiAgICAgICAgc2V0UHJldmlld0Vycm9ycygocHJldikgPT4gW2RhdGEubWVzc2FnZSwgLi4ucHJldl0uc2xpY2UoMCwgNSkpO1xuICAgICAgfVxuICAgIH1cbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcIm1lc3NhZ2VcIiwgb25NZXNzYWdlKTtcbiAgICByZXR1cm4gKCkgPT4gd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtZXNzYWdlXCIsIG9uTWVzc2FnZSk7XG4gIH0sIFtdKTtcblxuICBjb25zdCBncm91cGVkVmVyc2lvbnMgPSB1c2VNZW1vKCgpID0+IHtcbiAgICBmdW5jdGlvbiBoYXNoKHN0cjogc3RyaW5nKSB7XG4gICAgICBsZXQgaCA9IDA7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHN0ci5sZW5ndGg7IGkrKykge1xuICAgICAgICBoID0gKGggKiAzMSArIHN0ci5jaGFyQ29kZUF0KGkpKSB8IDA7XG4gICAgICB9XG4gICAgICByZXR1cm4gaC50b1N0cmluZygxNik7XG4gICAgfVxuICAgIGNvbnN0IHNlZW4gPSBuZXcgTWFwPHN0cmluZywgeyB2OiBhbnk7IGNvdW50OiBudW1iZXIgfT4oKTtcbiAgICBjb25zdCBvcmRlcmVkOiB7IHY6IGFueTsgY291bnQ6IG51bWJlciB9W10gPSBbXTtcbiAgICBmb3IgKGNvbnN0IHYgb2YgdmVyc2lvbnMpIHtcbiAgICAgIGNvbnN0IGtleSA9IGhhc2godi5jb2RlIHx8IFwiXCIpO1xuICAgICAgaWYgKHNlZW4uaGFzKGtleSkpIHtcbiAgICAgICAgc2Vlbi5nZXQoa2V5KSEuY291bnQgKz0gMTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IGVudHJ5ID0geyB2LCBjb3VudDogMSB9O1xuICAgICAgICBzZWVuLnNldChrZXksIGVudHJ5KTtcbiAgICAgICAgb3JkZXJlZC5wdXNoKGVudHJ5KTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG9yZGVyZWQ7XG4gIH0sIFt2ZXJzaW9uc10pO1xuXG4gIGFzeW5jIGZ1bmN0aW9uIG9wZW5GdWxsc2NyZWVuKCkge1xuICAgIGlmICghcHJldmlld1JlZi5jdXJyZW50KSByZXR1cm47XG4gICAgaWYgKGRvY3VtZW50LmZ1bGxzY3JlZW5FbGVtZW50KSB7XG4gICAgICBhd2FpdCBkb2N1bWVudC5leGl0RnVsbHNjcmVlbigpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBhd2FpdCBwcmV2aWV3UmVmLmN1cnJlbnQucmVxdWVzdEZ1bGxzY3JlZW4oKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGZvY3VzUHJldmlldygpIHtcbiAgICBpZnJhbWVSZWYuY3VycmVudD8uY29udGVudFdpbmRvdz8uZm9jdXMoKTtcbiAgfVxuXG4gIGFzeW5jIGZ1bmN0aW9uIHN1Ym1pdEVkaXQoKSB7XG4gICAgaWYgKCFpbnN0cnVjdGlvbi50cmltKCkgfHwgIWdhbWUpIHJldHVybjtcbiAgICBzZXRFZGl0aW5nKHRydWUpO1xuICAgIHNldEVycm9yKG51bGwpO1xuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaChgJHtBUEl9L2dhbWVzLyR7Z2FtZS5pZH0vZWRpdGAsIHtcbiAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgICAgaGVhZGVyczogeyBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIiB9LFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IGluc3RydWN0aW9uIH0pXG4gICAgICB9KTtcbiAgICAgIGlmICghcmVzLm9rKSB0aHJvdyBuZXcgRXJyb3IoYXdhaXQgcmVzLnRleHQoKSk7XG4gICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzLmpzb24oKTtcbiAgICAgIHNldEdhbWUoZGF0YSk7XG4gICAgICBzZXRJbnN0cnVjdGlvbihcIlwiKTtcbiAgICAgIGNvbnN0IHZlciA9IGF3YWl0IGZldGNoKGAke0FQSX0vZ2FtZXMvJHtwYXJhbXMuaWR9L3ZlcnNpb25zYCk7XG4gICAgICBpZiAodmVyLm9rKSB7XG4gICAgICAgIGNvbnN0IHZkYXRhID0gYXdhaXQgdmVyLmpzb24oKTtcbiAgICAgICAgc2V0VmVyc2lvbnModmRhdGEpO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycjogYW55KSB7XG4gICAgICBzZXRFcnJvcihlcnIubWVzc2FnZSB8fCBcIkVkaXQgZmFpbGVkXCIpO1xuICAgIH0gZmluYWxseSB7XG4gICAgICBzZXRFZGl0aW5nKGZhbHNlKTtcbiAgICB9XG4gIH1cblxuICBhc3luYyBmdW5jdGlvbiByb2xsYmFjayh2ZXJzaW9uSWQ6IG51bWJlcikge1xuICAgIGlmICghZ2FtZSkgcmV0dXJuO1xuICAgIHNldEVkaXRpbmcodHJ1ZSk7XG4gICAgc2V0RXJyb3IobnVsbCk7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKGAke0FQSX0vZ2FtZXMvJHtnYW1lLmlkfS9yb2xsYmFjay8ke3ZlcnNpb25JZH1gLCB7XG4gICAgICAgIG1ldGhvZDogXCJQT1NUXCJcbiAgICAgIH0pO1xuICAgICAgaWYgKCFyZXMub2spIHRocm93IG5ldyBFcnJvcihhd2FpdCByZXMudGV4dCgpKTtcbiAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXMuanNvbigpO1xuICAgICAgc2V0R2FtZShkYXRhKTtcbiAgICAgIGNvbnN0IHZlciA9IGF3YWl0IGZldGNoKGAke0FQSX0vZ2FtZXMvJHtwYXJhbXMuaWR9L3ZlcnNpb25zYCk7XG4gICAgICBpZiAodmVyLm9rKSB7XG4gICAgICAgIGNvbnN0IHZkYXRhID0gYXdhaXQgdmVyLmpzb24oKTtcbiAgICAgICAgc2V0VmVyc2lvbnModmRhdGEpO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycjogYW55KSB7XG4gICAgICBzZXRFcnJvcihlcnIubWVzc2FnZSB8fCBcIlJvbGxiYWNrIGZhaWxlZFwiKTtcbiAgICB9IGZpbmFsbHkge1xuICAgICAgc2V0RWRpdGluZyhmYWxzZSk7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgZnVuY3Rpb24gc2F2ZU1hbnVhbCgpIHtcbiAgICBpZiAoIWdhbWUpIHJldHVybjtcbiAgICBzZXRFZGl0aW5nKHRydWUpO1xuICAgIHNldEVycm9yKG51bGwpO1xuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaChgJHtBUEl9L2dhbWVzLyR7Z2FtZS5pZH1gLCB7XG4gICAgICAgIG1ldGhvZDogXCJQVVRcIixcbiAgICAgICAgaGVhZGVyczogeyBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIiB9LFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IGNvZGU6IG1hbnVhbENvZGUgfSlcbiAgICAgIH0pO1xuICAgICAgaWYgKCFyZXMub2spIHRocm93IG5ldyBFcnJvcihhd2FpdCByZXMudGV4dCgpKTtcbiAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXMuanNvbigpO1xuICAgICAgc2V0R2FtZShkYXRhKTtcbiAgICAgIGNvbnN0IHZlciA9IGF3YWl0IGZldGNoKGAke0FQSX0vZ2FtZXMvJHtwYXJhbXMuaWR9L3ZlcnNpb25zYCk7XG4gICAgICBpZiAodmVyLm9rKSB7XG4gICAgICAgIGNvbnN0IHZkYXRhID0gYXdhaXQgdmVyLmpzb24oKTtcbiAgICAgICAgc2V0VmVyc2lvbnModmRhdGEpO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycjogYW55KSB7XG4gICAgICBzZXRFcnJvcihlcnIubWVzc2FnZSB8fCBcIk1hbnVhbCBzYXZlIGZhaWxlZFwiKTtcbiAgICB9IGZpbmFsbHkge1xuICAgICAgc2V0RWRpdGluZyhmYWxzZSk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIChcbiAgICA8bWFpbiBjbGFzc05hbWU9XCJzZWN0aW9uXCI+XG4gICAgICA8TGluayBocmVmPVwiL1wiIGNsYXNzTmFtZT1cImJhZGdlXCI+QmFjazwvTGluaz5cbiAgICAgIHtlcnJvciAmJiA8cCBzdHlsZT17eyBjb2xvcjogXCIjZmY5YjliXCIgfX0+e2Vycm9yfTwvcD59XG4gICAgICB7IWdhbWUgJiYgIWVycm9yICYmIDxwPkxvYWRpbmcuLi48L3A+fVxuICAgICAge2dhbWUgJiYgKFxuICAgICAgICA8ZGl2IHN0eWxlPXt7IGRpc3BsYXk6IFwiZ3JpZFwiLCBnYXA6IDE2IH19PlxuICAgICAgICAgIDxoMT57Z2FtZS50aXRsZX08L2gxPlxuICAgICAgICAgIDxwIHN0eWxlPXt7IGNvbG9yOiBcIiM5OGEwYjVcIiB9fT57Z2FtZS5kZXNjcmlwdGlvbn08L3A+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJwcmV2aWV3LWhlYWRlclwiPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjYXJkLXRpdGxlXCI+UGxheTwvZGl2PlxuICAgICAgICAgICAgPGJ1dHRvbiBjbGFzc05hbWU9XCJzZWNvbmRhcnlcIiBvbkNsaWNrPXtvcGVuRnVsbHNjcmVlbn0+RnVsbHNjcmVlbjwvYnV0dG9uPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicHJldmlld1wiIHJlZj17cHJldmlld1JlZn0gb25DbGljaz17Zm9jdXNQcmV2aWV3fT5cbiAgICAgICAgICAgIDxpZnJhbWUgcmVmPXtpZnJhbWVSZWZ9IHNyY0RvYz17d2l0aEFJSGVscGVyKGdhbWUuY29kZSl9IHNhbmRib3g9XCJhbGxvdy1zY3JpcHRzXCIgLz5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICB7cHJldmlld0Vycm9ycy5sZW5ndGggPiAwICYmIChcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY2FyZFwiPlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNhcmQtdGl0bGVcIj5QcmV2aWV3IEVycm9yczwvZGl2PlxuICAgICAgICAgICAgICB7cHJldmlld0Vycm9ycy5tYXAoKGUsIGkpID0+IChcbiAgICAgICAgICAgICAgICA8ZGl2IGtleT17aX0gY2xhc3NOYW1lPVwiY2FyZC1tZXRhXCIgc3R5bGU9e3sgY29sb3I6IFwiI2ZmOWI5YlwiIH19PntlfTwvZGl2PlxuICAgICAgICAgICAgICApKX1cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICl9XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjYXJkXCI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNhcmQtdGl0bGVcIj5Qcm9tcHQ8L2Rpdj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY2FyZC1tZXRhXCI+e2dhbWUucHJvbXB0fTwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY2FyZFwiPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjYXJkLXRpdGxlXCI+RWRpdCBXaXRoIEFJPC9kaXY+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNhcmQtbWV0YVwiPkRlc2NyaWJlIHRoZSBjaGFuZ2UgeW91IHdhbnQuPC9kaXY+XG4gICAgICAgICAgICA8dGV4dGFyZWFcbiAgICAgICAgICAgICAgdmFsdWU9e2luc3RydWN0aW9ufVxuICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHNldEluc3RydWN0aW9uKGUudGFyZ2V0LnZhbHVlKX1cbiAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJBZGQgYSB0aW1lciwgbmV3IG9ic3RhY2xlcywgY2hhbmdlIGFydCBzdHlsZS4uLlwiXG4gICAgICAgICAgICAgIHN0eWxlPXt7IG1pbkhlaWdodDogMTIwIH19XG4gICAgICAgICAgICAvPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJidXR0b24tcm93XCI+XG4gICAgICAgICAgICAgIDxidXR0b24gb25DbGljaz17c3VibWl0RWRpdH0gZGlzYWJsZWQ9e2VkaXRpbmd9PlxuICAgICAgICAgICAgICAgIHtlZGl0aW5nID8gXCJFZGl0aW5nLi4uXCIgOiBcIkFwcGx5IEVkaXRcIn1cbiAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNhcmRcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY2FyZC10aXRsZVwiPk1hbnVhbCBDb2RlIEVkaXQ8L2Rpdj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY2FyZC1tZXRhXCI+RWRpdCBIVE1MIGRpcmVjdGx5IGFuZCBzYXZlLjwvZGl2PlxuICAgICAgICAgICAgPHRleHRhcmVhXG4gICAgICAgICAgICAgIHZhbHVlPXttYW51YWxDb2RlfVxuICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHNldE1hbnVhbENvZGUoZS50YXJnZXQudmFsdWUpfVxuICAgICAgICAgICAgICBzdHlsZT17eyBtaW5IZWlnaHQ6IDIyMCB9fVxuICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYnV0dG9uLXJvd1wiPlxuICAgICAgICAgICAgICA8YnV0dG9uIG9uQ2xpY2s9e3NhdmVNYW51YWx9IGRpc2FibGVkPXtlZGl0aW5nfT5cbiAgICAgICAgICAgICAgICB7ZWRpdGluZyA/IFwiU2F2aW5nLi4uXCIgOiBcIlNhdmUgQ29kZVwifVxuICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY2FyZFwiPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjYXJkLXRpdGxlXCI+VmVyc2lvbiBIaXN0b3J5PC9kaXY+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNhcmQtbWV0YVwiPlJvbGxiYWNrIHRvIGEgcHJldmlvdXMgdmVyc2lvbi48L2Rpdj5cbiAgICAgICAgICAgIDxkaXYgc3R5bGU9e3sgZGlzcGxheTogXCJncmlkXCIsIGdhcDogOCB9fT5cbiAgICAgICAgICAgICAge3ZlcnNpb25zLmxlbmd0aCA9PT0gMCAmJiA8ZGl2IGNsYXNzTmFtZT1cImNhcmQtbWV0YVwiPk5vIHZlcnNpb25zIHlldC48L2Rpdj59XG4gICAgICAgICAgICAgIHsoc2hvd0FsbFZlcnNpb25zID8gZ3JvdXBlZFZlcnNpb25zIDogZ3JvdXBlZFZlcnNpb25zLnNsaWNlKDAsIDYpKS5tYXAoKGVudHJ5OiBhbnkpID0+IChcbiAgICAgICAgICAgICAgICA8ZGl2IGtleT17ZW50cnkudi5pZH0gc3R5bGU9e3sgZGlzcGxheTogXCJmbGV4XCIsIGdhcDogOCwgYWxpZ25JdGVtczogXCJjZW50ZXJcIiB9fT5cbiAgICAgICAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwic2Vjb25kYXJ5XCJcbiAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gcm9sbGJhY2soZW50cnkudi5pZCl9XG4gICAgICAgICAgICAgICAgICAgIGRpc2FibGVkPXtlZGl0aW5nfVxuICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyBmbGV4OiAxIH19XG4gICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIHtuZXcgRGF0ZShlbnRyeS52LmNyZWF0ZWRfYXQpLnRvTG9jYWxlU3RyaW5nKCl9IOKAlCB7ZW50cnkudi50aXRsZX0gW3tlbnRyeS52LmFjdGlvbiB8fCBcImVkaXRcIn1dXG4gICAgICAgICAgICAgICAgICAgIHtlbnRyeS5jb3VudCA+IDEgPyBgICh4JHtlbnRyeS5jb3VudH0pYCA6IFwiXCJ9XG4gICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwic2Vjb25kYXJ5XCJcbiAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gc2V0U2VsZWN0ZWRWZXJzaW9uKGVudHJ5LnYpfVxuICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZD17ZWRpdGluZ31cbiAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgQ29tcGFyZVxuICAgICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICkpfVxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICB7Z3JvdXBlZFZlcnNpb25zLmxlbmd0aCA+IDYgJiYgKFxuICAgICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwic2Vjb25kYXJ5XCJcbiAgICAgICAgICAgICAgICBzdHlsZT17eyBtYXJnaW5Ub3A6IDggfX1cbiAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBzZXRTaG93QWxsVmVyc2lvbnMoKHMpID0+ICFzKX1cbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIHtzaG93QWxsVmVyc2lvbnMgPyBcIlNob3cgTGVzc1wiIDogXCJTaG93IEFsbFwifVxuICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICl9XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAge3NlbGVjdGVkVmVyc2lvbiAmJiAoXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNhcmRcIj5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjYXJkLXRpdGxlXCI+Q29tcGFyZSBWZXJzaW9uczwvZGl2PlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNhcmQtbWV0YVwiPlxuICAgICAgICAgICAgICAgIFNlbGVjdGVkOiB7bmV3IERhdGUoc2VsZWN0ZWRWZXJzaW9uLmNyZWF0ZWRfYXQpLnRvTG9jYWxlU3RyaW5nKCl9IOKAlCB7c2VsZWN0ZWRWZXJzaW9uLnRpdGxlfVxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgPGRpdiBzdHlsZT17eyBkaXNwbGF5OiBcImdyaWRcIiwgZ3JpZFRlbXBsYXRlQ29sdW1uczogXCIxZnIgMWZyXCIsIGdhcDogMTIgfX0+XG4gICAgICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY2FyZC1tZXRhXCI+Q3VycmVudDwvZGl2PlxuICAgICAgICAgICAgICAgICAgPHRleHRhcmVhIHJlYWRPbmx5IHZhbHVlPXtnYW1lLmNvZGV9IHN0eWxlPXt7IG1pbkhlaWdodDogMjIwIH19IC8+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY2FyZC1tZXRhXCI+U2VsZWN0ZWQ8L2Rpdj5cbiAgICAgICAgICAgICAgICAgIDx0ZXh0YXJlYSByZWFkT25seSB2YWx1ZT17c2VsZWN0ZWRWZXJzaW9uLmNvZGV9IHN0eWxlPXt7IG1pbkhlaWdodDogMjIwIH19IC8+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImJ1dHRvbi1yb3dcIiBzdHlsZT17eyBtYXJnaW5Ub3A6IDggfX0+XG4gICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzc05hbWU9XCJzZWNvbmRhcnlcIiBvbkNsaWNrPXsoKSA9PiBzZXRTZWxlY3RlZFZlcnNpb24obnVsbCl9PlxuICAgICAgICAgICAgICAgICAgQ2xvc2UgQ29tcGFyZVxuICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICl9XG4gICAgICAgIDwvZGl2PlxuICAgICAgKX1cbiAgICA8L21haW4+XG4gICk7XG59XG4iXSwibmFtZXMiOlsidXNlRWZmZWN0IiwidXNlTWVtbyIsInVzZVJlZiIsInVzZVN0YXRlIiwiTGluayIsInByb2Nlc3MiLCJBUEkiLCJlbnYiLCJORVhUX1BVQkxJQ19BUElfVVJMIiwiR2FtZVBhZ2UiLCJwYXJhbXMiLCJnYW1lIiwic2V0R2FtZSIsImVycm9yIiwic2V0RXJyb3IiLCJwcmV2aWV3UmVmIiwiaWZyYW1lUmVmIiwiaW5zdHJ1Y3Rpb24iLCJzZXRJbnN0cnVjdGlvbiIsImVkaXRpbmciLCJzZXRFZGl0aW5nIiwidmVyc2lvbnMiLCJzZXRWZXJzaW9ucyIsInNob3dBbGxWZXJzaW9ucyIsInNldFNob3dBbGxWZXJzaW9ucyIsInNlbGVjdGVkVmVyc2lvbiIsInNldFNlbGVjdGVkVmVyc2lvbiIsIm1hbnVhbENvZGUiLCJzZXRNYW51YWxDb2RlIiwicHJldmlld0Vycm9ycyIsInNldFByZXZpZXdFcnJvcnMiLCJ3aXRoQUlIZWxwZXIiLCJjb2RlIiwid3NVcmwiLCJyZXBsYWNlIiwiaGVscGVyIiwiaW5jbHVkZXMiLCJsb2FkIiwicmVzIiwiZmV0Y2giLCJpZCIsIm9rIiwiRXJyb3IiLCJ0ZXh0IiwiZGF0YSIsImpzb24iLCJ2ZXIiLCJ2ZGF0YSIsImVyciIsIm1lc3NhZ2UiLCJvbk1lc3NhZ2UiLCJldmVudCIsInR5cGUiLCJwcmV2Iiwic2xpY2UiLCJ3aW5kb3ciLCJhZGRFdmVudExpc3RlbmVyIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImdyb3VwZWRWZXJzaW9ucyIsImhhc2giLCJzdHIiLCJoIiwiaSIsImxlbmd0aCIsImNoYXJDb2RlQXQiLCJ0b1N0cmluZyIsInNlZW4iLCJNYXAiLCJvcmRlcmVkIiwidiIsImtleSIsImhhcyIsImdldCIsImNvdW50IiwiZW50cnkiLCJzZXQiLCJwdXNoIiwib3BlbkZ1bGxzY3JlZW4iLCJjdXJyZW50IiwiZG9jdW1lbnQiLCJmdWxsc2NyZWVuRWxlbWVudCIsImV4aXRGdWxsc2NyZWVuIiwicmVxdWVzdEZ1bGxzY3JlZW4iLCJmb2N1c1ByZXZpZXciLCJjb250ZW50V2luZG93IiwiZm9jdXMiLCJzdWJtaXRFZGl0IiwidHJpbSIsIm1ldGhvZCIsImhlYWRlcnMiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsInJvbGxiYWNrIiwidmVyc2lvbklkIiwic2F2ZU1hbnVhbCIsIm1haW4iLCJjbGFzc05hbWUiLCJocmVmIiwicCIsInN0eWxlIiwiY29sb3IiLCJkaXYiLCJkaXNwbGF5IiwiZ2FwIiwiaDEiLCJ0aXRsZSIsImRlc2NyaXB0aW9uIiwiYnV0dG9uIiwib25DbGljayIsInJlZiIsImlmcmFtZSIsInNyY0RvYyIsInNhbmRib3giLCJtYXAiLCJlIiwicHJvbXB0IiwidGV4dGFyZWEiLCJ2YWx1ZSIsIm9uQ2hhbmdlIiwidGFyZ2V0IiwicGxhY2Vob2xkZXIiLCJtaW5IZWlnaHQiLCJkaXNhYmxlZCIsImFsaWduSXRlbXMiLCJmbGV4IiwiRGF0ZSIsImNyZWF0ZWRfYXQiLCJ0b0xvY2FsZVN0cmluZyIsImFjdGlvbiIsIm1hcmdpblRvcCIsInMiLCJncmlkVGVtcGxhdGVDb2x1bW5zIiwicmVhZE9ubHkiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./app/games/[id]/page.tsx\n"));

/***/ })

});